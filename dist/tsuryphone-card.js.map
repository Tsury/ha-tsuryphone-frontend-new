{"version":3,"file":"tsuryphone-card.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-element/lit-element.js","../node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/@lit/reactive-element/decorators/property.js","../node_modules/@lit/reactive-element/decorators/state.js","../src/styles/theme.ts","../src/styles/common.ts","../src/components/navigation/tsuryphone-navigation.ts","../src/utils/date-formatter.ts","../src/utils/call-history-grouping.ts","../src/components/home/call-log-filters.ts","../src/utils/avatar-color.ts","../src/components/home/frequent-contacts.ts","../src/utils/formatters.ts","../src/components/home/call-log-item.ts","../src/styles/shared-styles.ts","../src/components/shared/empty-state.ts","../src/components/home/call-log-list.ts","../src/components/home/home-view.ts","../src/utils/entity-discovery.ts","../src/utils/haptics.ts","../src/components/keypad/dialed-number-display.ts","../src/components/keypad/keypad-grid.ts","../src/components/keypad/keypad-view.ts","../src/components/shared/avatar.ts","../src/components/contacts/contact-item.ts","../src/components/contacts/contacts-view.ts","../src/components/blocked/blocked-item.ts","../src/components/blocked/blocked-view.ts","../src/components/modals/contact-modal.ts","../src/components/modals/call-modal.ts","../src/components/modals/block-number-modal.ts","../src/tsuryphone-card.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){const e=this.constructor,h=this[t];if(i??=e.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(e._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.1\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.3.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.1\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{defaultConverter as t,notEqual as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:t,reflect:!1,hasChanged:e},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),\"setter\"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","import { css } from \"lit\";\r\n\r\n/**\r\n * Common HA theme CSS variables for consistent styling\r\n */\r\nexport const haThemeVariables = css`\r\n  /* Primary colors */\r\n  --tsury-primary-color: var(--primary-color);\r\n  --tsury-primary-text-color: var(--primary-text-color);\r\n  --tsury-secondary-text-color: var(--secondary-text-color);\r\n  --tsury-disabled-text-color: var(--disabled-text-color);\r\n  --tsury-text-primary-color: var(--text-primary-color);\r\n\r\n  /* Background colors */\r\n  --tsury-card-background-color: var(--card-background-color);\r\n  --tsury-primary-background-color: var(--primary-background-color);\r\n  --tsury-secondary-background-color: var(--secondary-background-color);\r\n\r\n  /* State colors */\r\n  --tsury-success-color: var(--success-color, #4caf50);\r\n  --tsury-error-color: var(--error-color, #f44336);\r\n  --tsury-warning-color: var(--warning-color, #ff9800);\r\n  --tsury-info-color: var(--info-color, #2196f3);\r\n\r\n  /* Dividers and borders */\r\n  --tsury-divider-color: var(--divider-color);\r\n  --tsury-outline-color: var(--outline-color, var(--divider-color));\r\n\r\n  /* Shadows */\r\n  --tsury-card-box-shadow: var(--ha-card-box-shadow);\r\n\r\n  /* Interactive states */\r\n  --tsury-state-active-color: var(--state-active-color, var(--primary-color));\r\n  --tsury-state-hover-opacity: 0.08;\r\n  --tsury-state-focus-opacity: 0.12;\r\n  --tsury-state-selected-opacity: 0.12;\r\n  --tsury-state-pressed-opacity: 0.12;\r\n\r\n  /* Spacing */\r\n  --tsury-spacing-xs: 4px;\r\n  --tsury-spacing-sm: 8px;\r\n  --tsury-spacing-md: 16px;\r\n  --tsury-spacing-lg: 24px;\r\n  --tsury-spacing-xl: 32px;\r\n\r\n  /* Border radius */\r\n  --tsury-border-radius-sm: 4px;\r\n  --tsury-border-radius-md: 8px;\r\n  --tsury-border-radius-lg: 12px;\r\n  --tsury-border-radius-xl: 16px;\r\n\r\n  /* Typography */\r\n  --tsury-font-family: var(\r\n    --paper-font-common-base_-_font-family,\r\n    \"Roboto\",\r\n    sans-serif\r\n  );\r\n  --tsury-font-size-sm: 12px;\r\n  --tsury-font-size-md: 14px;\r\n  --tsury-font-size-lg: 16px;\r\n  --tsury-font-size-xl: 20px;\r\n  --tsury-font-size-xxl: 24px;\r\n  --tsury-font-weight-regular: 400;\r\n  --tsury-font-weight-medium: 500;\r\n  --tsury-font-weight-bold: 700;\r\n\r\n  /* Transitions */\r\n  --tsury-transition-duration: 200ms;\r\n  --tsury-transition-timing: cubic-bezier(0.4, 0, 0.2, 1);\r\n`;\r\n\r\n/**\r\n * Helper function to determine if dark mode is active\r\n */\r\nexport function isDarkMode(hass: any): boolean {\r\n  return hass?.themes?.darkMode ?? false;\r\n}\r\n\r\n/**\r\n * Get a color with opacity adjustment based on theme\r\n */\r\nexport function getColorWithOpacity(color: string, opacity: number): string {\r\n  // If color is already rgba, extract rgb part\r\n  if (color.startsWith(\"rgba\")) {\r\n    const rgbMatch = color.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\r\n    if (rgbMatch) {\r\n      return `rgba(${rgbMatch[1]}, ${rgbMatch[2]}, ${rgbMatch[3]}, ${opacity})`;\r\n    }\r\n  }\r\n\r\n  // If color is rgb\r\n  if (color.startsWith(\"rgb\")) {\r\n    const rgbMatch = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\r\n    if (rgbMatch) {\r\n      return `rgba(${rgbMatch[1]}, ${rgbMatch[2]}, ${rgbMatch[3]}, ${opacity})`;\r\n    }\r\n  }\r\n\r\n  // If hex color\r\n  if (color.startsWith(\"#\")) {\r\n    const hex = color.replace(\"#\", \"\");\r\n    const r = parseInt(hex.substring(0, 2), 16);\r\n    const g = parseInt(hex.substring(2, 4), 16);\r\n    const b = parseInt(hex.substring(4, 6), 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\r\n  }\r\n\r\n  // Fallback: return as-is\r\n  return color;\r\n}\r\n\r\n/**\r\n * Get contrast text color based on background\r\n */\r\nexport function getContrastTextColor(\r\n  backgroundColor: string,\r\n  isDark: boolean\r\n): string {\r\n  // Simple heuristic: use primary text color\r\n  return isDark ? \"#ffffff\" : \"#000000\";\r\n}\r\n\r\n/**\r\n * Get surface color with elevation\r\n */\r\nexport function getSurfaceColor(elevation: number, isDark: boolean): string {\r\n  if (!isDark) {\r\n    return \"var(--card-background-color)\";\r\n  }\r\n\r\n  // In dark mode, add white overlay based on elevation\r\n  const opacity = Math.min(0.05 + elevation * 0.02, 0.16);\r\n  return `rgba(255, 255, 255, ${opacity})`;\r\n}\r\n\r\n/**\r\n * Common button styles respecting HA theme\r\n */\r\nexport const haButtonStyles = css`\r\n  button {\r\n    font-family: var(--tsury-font-family);\r\n    font-size: var(--tsury-font-size-md);\r\n    font-weight: var(--tsury-font-weight-medium);\r\n    border: none;\r\n    border-radius: var(--tsury-border-radius-md);\r\n    padding: var(--tsury-spacing-sm) var(--tsury-spacing-md);\r\n    cursor: pointer;\r\n    transition: all var(--tsury-transition-duration)\r\n      var(--tsury-transition-timing);\r\n    outline: none;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n\r\n  button:disabled {\r\n    opacity: 0.38;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  button:not(:disabled):hover {\r\n    filter: brightness(1.1);\r\n  }\r\n\r\n  button:not(:disabled):active {\r\n    filter: brightness(0.9);\r\n  }\r\n\r\n  button.primary {\r\n    background-color: var(--tsury-primary-color);\r\n    color: var(--text-primary-color);\r\n  }\r\n\r\n  button.success {\r\n    background-color: var(--tsury-success-color);\r\n    color: white;\r\n  }\r\n\r\n  button.error {\r\n    background-color: var(--tsury-error-color);\r\n    color: white;\r\n  }\r\n\r\n  button.text {\r\n    background-color: transparent;\r\n    color: var(--tsury-primary-color);\r\n  }\r\n\r\n  button.outlined {\r\n    background-color: transparent;\r\n    color: var(--tsury-primary-color);\r\n    border: 1px solid var(--tsury-outline-color);\r\n  }\r\n\r\n  /* Ripple effect */\r\n  button::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    width: 0;\r\n    height: 0;\r\n    border-radius: 50%;\r\n    background-color: rgba(255, 255, 255, 0.3);\r\n    transform: translate(-50%, -50%);\r\n    transition:\r\n      width 0.6s,\r\n      height 0.6s;\r\n  }\r\n\r\n  button:active::before {\r\n    width: 300px;\r\n    height: 300px;\r\n  }\r\n`;\r\n\r\n/**\r\n * Common card styles respecting HA theme\r\n */\r\nexport const haCardStyles = css`\r\n  .card {\r\n    background-color: var(--tsury-card-background-color);\r\n    border-radius: var(--ha-card-border-radius, var(--tsury-border-radius-lg));\r\n    box-shadow: var(--tsury-card-box-shadow);\r\n    padding: var(--tsury-spacing-md);\r\n  }\r\n\r\n  .card-header {\r\n    font-size: var(--tsury-font-size-xl);\r\n    font-weight: var(--tsury-font-weight-medium);\r\n    color: var(--tsury-primary-text-color);\r\n    margin-bottom: var(--tsury-spacing-md);\r\n  }\r\n\r\n  .card-content {\r\n    color: var(--tsury-primary-text-color);\r\n  }\r\n`;\r\n\r\n/**\r\n * Common list item styles\r\n */\r\nexport const haListStyles = css`\r\n  .list-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: var(--tsury-spacing-md);\r\n    min-height: 48px;\r\n    cursor: pointer;\r\n    transition: background-color var(--tsury-transition-duration)\r\n      var(--tsury-transition-timing);\r\n    border-radius: var(--tsury-border-radius-md);\r\n  }\r\n\r\n  .list-item:hover {\r\n    background-color: rgba(\r\n      var(--rgb-primary-color),\r\n      var(--tsury-state-hover-opacity)\r\n    );\r\n  }\r\n\r\n  .list-item:active {\r\n    background-color: rgba(\r\n      var(--rgb-primary-color),\r\n      var(--tsury-state-pressed-opacity)\r\n    );\r\n  }\r\n\r\n  .list-item-avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-right: var(--tsury-spacing-md);\r\n    font-size: var(--tsury-font-size-lg);\r\n    font-weight: var(--tsury-font-weight-medium);\r\n  }\r\n\r\n  .list-item-text {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-width: 0;\r\n  }\r\n\r\n  .list-item-primary {\r\n    font-size: var(--tsury-font-size-md);\r\n    color: var(--tsury-primary-text-color);\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .list-item-secondary {\r\n    font-size: var(--tsury-font-size-sm);\r\n    color: var(--tsury-secondary-text-color);\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .divider {\r\n    height: 1px;\r\n    background-color: var(--tsury-divider-color);\r\n    margin: var(--tsury-spacing-sm) 0;\r\n  }\r\n`;\r\n","import { css } from \"lit\";\r\n\r\n/**\r\n * Common utility styles used across components\r\n */\r\nexport const commonStyles = css`\r\n  * {\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .flex {\r\n    display: flex;\r\n  }\r\n\r\n  .flex-column {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .flex-center {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .flex-1 {\r\n    flex: 1;\r\n  }\r\n\r\n  .text-center {\r\n    text-align: center;\r\n  }\r\n\r\n  .text-ellipsis {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .clickable {\r\n    cursor: pointer;\r\n    user-select: none;\r\n    -webkit-tap-highlight-color: transparent;\r\n  }\r\n\r\n  .disabled {\r\n    opacity: 0.38;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .hidden {\r\n    display: none !important;\r\n  }\r\n\r\n  .scrollable {\r\n    overflow-y: auto;\r\n    -webkit-overflow-scrolling: touch;\r\n  }\r\n\r\n  .scrollable::-webkit-scrollbar {\r\n    width: 8px;\r\n  }\r\n\r\n  .scrollable::-webkit-scrollbar-track {\r\n    background: transparent;\r\n  }\r\n\r\n  .scrollable::-webkit-scrollbar-thumb {\r\n    background-color: rgba(128, 128, 128, 0.3);\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .scrollable::-webkit-scrollbar-thumb:hover {\r\n    background-color: rgba(128, 128, 128, 0.5);\r\n  }\r\n\r\n  /* Fade animations */\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  @keyframes fadeOut {\r\n    from {\r\n      opacity: 1;\r\n    }\r\n    to {\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  @keyframes slideInUp {\r\n    from {\r\n      transform: translateY(100%);\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      transform: translateY(0);\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  @keyframes slideOutDown {\r\n    from {\r\n      transform: translateY(0);\r\n      opacity: 1;\r\n    }\r\n    to {\r\n      transform: translateY(100%);\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .fade-in {\r\n    animation: fadeIn var(--tsury-transition-duration)\r\n      var(--tsury-transition-timing);\r\n  }\r\n\r\n  .fade-out {\r\n    animation: fadeOut var(--tsury-transition-duration)\r\n      var(--tsury-transition-timing);\r\n  }\r\n\r\n  .slide-in-up {\r\n    animation: slideInUp var(--tsury-transition-duration)\r\n      var(--tsury-transition-timing);\r\n  }\r\n\r\n  .slide-out-down {\r\n    animation: slideOutDown var(--tsury-transition-duration)\r\n      var(--tsury-transition-timing);\r\n  }\r\n`;\r\n","/**\r\n * TsuryPhone Navigation Component\r\n * Bottom navigation bar with three tabs: Home, Keypad, Contacts\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { haThemeVariables } from \"../../styles/theme\";\r\n\r\nexport type NavigationTab = \"home\" | \"keypad\" | \"contacts\" | \"blocked\";\r\n\r\nexport interface TabChangeEvent {\r\n  tab: NavigationTab;\r\n}\r\n\r\n@customElement(\"tsuryphone-navigation\")\r\nexport class TsuryPhoneNavigation extends LitElement {\r\n  @property({ type: String }) activeTab: NavigationTab = \"home\";\r\n  @property({ type: Boolean }) disabled = false;\r\n\r\n  private _handleTabClick(tab: NavigationTab): void {\r\n    if (this.disabled || tab === this.activeTab) {\r\n      return;\r\n    }\r\n\r\n    // Dispatch custom event for parent to handle\r\n    this.dispatchEvent(\r\n      new CustomEvent<TabChangeEvent>(\"tab-change\", {\r\n        detail: { tab },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render(): TemplateResult {\r\n    return html`\r\n      <nav class=\"navigation ${this.disabled ? \"disabled\" : \"\"}\" role=\"tablist\">\r\n        ${this._renderTab(\"contacts\", \"mdi:contacts\", \"Contacts\")}\r\n        ${this._renderTab(\"home\", \"mdi:home\", \"Home\")}\r\n        ${this._renderTab(\"keypad\", \"mdi:dialpad\", \"Keypad\")}\r\n      </nav>\r\n    `;\r\n  }\r\n\r\n  private _renderTab(\r\n    tab: NavigationTab,\r\n    icon: string,\r\n    label: string\r\n  ): TemplateResult {\r\n    const isActive = this.activeTab === tab;\r\n\r\n    return html`\r\n      <button\r\n        class=\"nav-tab ${isActive ? \"active\" : \"\"}\"\r\n        role=\"tab\"\r\n        aria-selected=\"${isActive}\"\r\n        aria-label=\"${label}\"\r\n        @click=${() => this._handleTabClick(tab)}\r\n        ?disabled=${this.disabled}\r\n      >\r\n        <ha-icon icon=\"${icon}\"></ha-icon>\r\n        <span class=\"nav-label\">${label}</span>\r\n      </button>\r\n    `;\r\n  }\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      haThemeVariables,\r\n      css`\r\n        :host {\r\n          display: block;\r\n        }\r\n\r\n        .navigation {\r\n          display: flex;\r\n          justify-content: space-around;\r\n          align-items: center;\r\n          background: color-mix(in srgb, var(--card-background-color) 85%, var(--primary-background-color) 15%);\r\n          border-top: 1px solid var(--tsury-divider-color);\r\n          padding: var(--tsury-spacing-xs) 0;\r\n          min-height: 56px;\r\n          position: relative;\r\n        }\r\n\r\n        .navigation.disabled {\r\n          opacity: 0.5;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .nav-tab {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex: 1;\r\n          gap: 4px;\r\n          padding: var(--tsury-spacing-sm);\r\n          background: transparent;\r\n          border: none;\r\n          cursor: pointer;\r\n          color: var(--tsury-secondary-text-color);\r\n          transition: all var(--tsury-transition-duration)\r\n            var(--tsury-transition-timing);\r\n          position: relative;\r\n          min-width: 64px;\r\n          outline: none;\r\n          -webkit-tap-highlight-color: transparent;\r\n        }\r\n\r\n        .nav-tab:disabled {\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        .nav-tab:not(:disabled):hover {\r\n          background: rgba(\r\n            var(--rgb-primary-color, 128, 128, 128),\r\n            var(--tsury-state-hover-opacity)\r\n          );\r\n        }\r\n\r\n        .nav-tab:not(:disabled):active {\r\n          background: rgba(\r\n            var(--rgb-primary-color, 128, 128, 128),\r\n            var(--tsury-state-pressed-opacity)\r\n          );\r\n        }\r\n\r\n        .nav-tab:not(:disabled):focus-visible {\r\n          outline: 2px solid var(--tsury-primary-color);\r\n          outline-offset: -2px;\r\n        }\r\n\r\n        .nav-tab ha-icon {\r\n          --mdc-icon-size: 24px;\r\n          display: block;\r\n          padding: 8px;\r\n          border-radius: 12px;\r\n          transition: background-color 0.2s ease;\r\n        }\r\n\r\n        .nav-tab.active {\r\n          color: var(--tsury-primary-color);\r\n        }\r\n\r\n        .nav-tab.active ha-icon {\r\n          background: rgba(var(--rgb-primary-color, 128, 128, 128), 0.2);\r\n        }\r\n\r\n        .nav-tab.active::before {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: 0;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          width: 64px;\r\n          height: 3px;\r\n          background: var(--tsury-primary-color);\r\n          border-radius: 0 0 3px 3px;\r\n          animation: slideIn 200ms var(--tsury-transition-timing);\r\n        }\r\n\r\n        @keyframes slideIn {\r\n          from {\r\n            width: 0;\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            width: 64px;\r\n            opacity: 1;\r\n          }\r\n        }\r\n\r\n        .nav-label {\r\n          font-size: 12px;\r\n          font-weight: var(--tsury-font-weight-medium);\r\n          white-space: nowrap;\r\n        }\r\n\r\n        /* Ripple effect on tap */\r\n        .nav-tab::after {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 50%;\r\n          width: 0;\r\n          height: 0;\r\n          border-radius: 50%;\r\n          background: rgba(var(--rgb-primary-color, 128, 128, 128), 0.2);\r\n          transform: translate(-50%, -50%);\r\n          transition:\r\n            width 0.4s,\r\n            height 0.4s;\r\n          pointer-events: none;\r\n        }\r\n\r\n        .nav-tab:active::after {\r\n          width: 100px;\r\n          height: 100px;\r\n        }\r\n\r\n        /* Mobile optimization */\r\n        @media (max-width: 600px) {\r\n          .nav-label {\r\n            font-size: 11px;\r\n          }\r\n\r\n          .nav-tab {\r\n            min-width: 56px;\r\n          }\r\n        }\r\n\r\n        /* Desktop optimization */\r\n        @media (min-width: 1024px) {\r\n          .navigation {\r\n            min-height: 64px;\r\n          }\r\n\r\n          .nav-tab {\r\n            min-width: 80px;\r\n          }\r\n\r\n          .nav-label {\r\n            font-size: 13px;\r\n          }\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-navigation\": TsuryPhoneNavigation;\r\n  }\r\n}\r\n","/**\r\n * Format dates for call history display\r\n */\r\n\r\n/**\r\n * Format a timestamp for display in call log\r\n */\r\nexport function formatCallTime(timestamp: string | Date): string {\r\n  const date = typeof timestamp === \"string\" ? new Date(timestamp) : timestamp;\r\n  const now = new Date();\r\n  const diff = now.getTime() - date.getTime();\r\n  const diffMinutes = Math.floor(diff / 60000);\r\n  const diffHours = Math.floor(diff / 3600000);\r\n\r\n  // Just now (< 1 minute)\r\n  if (diffMinutes < 1) {\r\n    return \"Just now\";\r\n  }\r\n\r\n  // Minutes ago (< 1 hour)\r\n  if (diffMinutes < 60) {\r\n    return `${diffMinutes}m ago`;\r\n  }\r\n\r\n  // Hours ago (< 24 hours)\r\n  if (diffHours < 24) {\r\n    return `${diffHours}h ago`;\r\n  }\r\n\r\n  // For calls within the same week, show day and time (e.g., \"Fri 23:50\")\r\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n  const callDate = new Date(\r\n    date.getFullYear(),\r\n    date.getMonth(),\r\n    date.getDate()\r\n  );\r\n  const diffDays = Math.floor((today.getTime() - callDate.getTime()) / 86400000);\r\n\r\n  if (diffDays < 7) {\r\n    const days = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    const dayName = days[date.getDay()];\r\n    const hours = String(date.getHours()).padStart(2, \"0\");\r\n    const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n    return `${dayName} ${hours}:${minutes}`;\r\n  }\r\n\r\n  // For older calls, show month, day, and time (e.g., \"Oct 25, 16:23\")\r\n  const months = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n  const monthName = months[date.getMonth()];\r\n  const day = date.getDate();\r\n  const hours = String(date.getHours()).padStart(2, \"0\");\r\n  const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n  return `${monthName} ${day}, ${hours}:${minutes}`;\r\n}\r\n\r\n/**\r\n * Get group label for call history grouping\r\n */\r\nexport function getCallHistoryGroup(timestamp: string | Date): string {\r\n  const date = typeof timestamp === \"string\" ? new Date(timestamp) : timestamp;\r\n  const now = new Date();\r\n\r\n  // Reset time to midnight for comparison\r\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n  const callDate = new Date(\r\n    date.getFullYear(),\r\n    date.getMonth(),\r\n    date.getDate()\r\n  );\r\n\r\n  const diffTime = today.getTime() - callDate.getTime();\r\n  const diffDays = Math.floor(diffTime / 86400000);\r\n\r\n  // Cap at 365 days\r\n  if (diffDays > 365) {\r\n    return \"\"; // Will be filtered out\r\n  }\r\n\r\n  if (diffDays === 0) {\r\n    return \"Today\";\r\n  }\r\n\r\n  if (diffDays === 1) {\r\n    return \"Yesterday\";\r\n  }\r\n\r\n  // Everything else is \"Older\"\r\n  return \"Older\";\r\n}\r\n\r\n/**\r\n * Format call duration in seconds to readable format\r\n */\r\nexport function formatDuration(seconds: number): string {\r\n  if (seconds < 60) {\r\n    return `${seconds}s`;\r\n  }\r\n\r\n  const minutes = Math.floor(seconds / 60);\r\n  const remainingSeconds = seconds % 60;\r\n\r\n  if (minutes < 60) {\r\n    return remainingSeconds > 0\r\n      ? `${minutes}m ${remainingSeconds}s`\r\n      : `${minutes}m`;\r\n  }\r\n\r\n  const hours = Math.floor(minutes / 60);\r\n  const remainingMinutes = minutes % 60;\r\n  return remainingMinutes > 0 ? `${hours}h ${remainingMinutes}m` : `${hours}h`;\r\n}\r\n","/**\r\n * Group and filter call history entries\r\n */\r\n\r\nimport { getCallHistoryGroup } from \"./date-formatter\";\r\n\r\nexport type CallType = \"incoming\" | \"outgoing\" | \"missed\";\r\nexport type CallFilter = \"all\" | \"missed\" | \"outgoing\" | \"incoming\";\r\n\r\nexport interface CallHistoryEntry {\r\n  id: string;\r\n  contactName: string;\r\n  phoneNumber: string;\r\n  timestamp: string;\r\n  duration: number;\r\n  type: CallType;\r\n  isBlocked?: boolean;\r\n  count?: number; // For stacked calls\r\n}\r\n\r\nexport interface GroupedCallHistory {\r\n  groupLabel: string;\r\n  calls: CallHistoryEntry[];\r\n}\r\n\r\n/**\r\n * Filter call history by type\r\n */\r\nexport function filterCallHistory(\r\n  calls: CallHistoryEntry[],\r\n  filter: CallFilter\r\n): CallHistoryEntry[] {\r\n  if (filter === \"all\") {\r\n    return calls;\r\n  }\r\n  return calls.filter((call) => call.type === filter);\r\n}\r\n\r\n/**\r\n * Group call history by date ranges\r\n */\r\nexport function groupCallHistory(\r\n  calls: CallHistoryEntry[]\r\n): GroupedCallHistory[] {\r\n  // Create a map of groups\r\n  const groups = new Map<string, CallHistoryEntry[]>();\r\n\r\n  // Sort calls by timestamp (newest first)\r\n  const sortedCalls = [...calls].sort((a, b) => {\r\n    return new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime();\r\n  });\r\n\r\n  // Group calls and stack adjacent calls from same contact\r\n  sortedCalls.forEach((call) => {\r\n    const groupLabel = getCallHistoryGroup(call.timestamp);\r\n    \r\n    // Filter out calls older than 365 days\r\n    if (!groupLabel) {\r\n      return;\r\n    }\r\n    \r\n    if (!groups.has(groupLabel)) {\r\n      groups.set(groupLabel, []);\r\n    }\r\n    \r\n    const groupCalls = groups.get(groupLabel)!;\r\n    const lastCall = groupCalls[groupCalls.length - 1];\r\n    \r\n    // Stack if: same phone number, same type, and adjacent\r\n    if (\r\n      lastCall &&\r\n      lastCall.phoneNumber === call.phoneNumber &&\r\n      lastCall.type === call.type\r\n    ) {\r\n      // Increment count on the last call\r\n      lastCall.count = (lastCall.count || 1) + 1;\r\n      // Don't add the current call - it's now stacked\r\n    } else {\r\n      // Add as new call (count defaults to undefined, showing as single call)\r\n      groupCalls.push({ ...call });\r\n    }\r\n  });\r\n\r\n  // Convert to array and maintain order\r\n  const groupOrder = [\"Today\", \"Yesterday\", \"Older\"];\r\n  const result: GroupedCallHistory[] = [];\r\n\r\n  console.log(`[CallHistoryGrouping] Grouped ${sortedCalls.length} calls into ${groups.size} groups`);\r\n  groups.forEach((calls, label) => {\r\n    console.log(`  - ${label}: ${calls.length} items (after stacking)`);\r\n  });\r\n\r\n  // Add known groups in order\r\n  groupOrder.forEach((label) => {\r\n    if (groups.has(label)) {\r\n      result.push({\r\n        groupLabel: label,\r\n        calls: groups.get(label)!,\r\n      });\r\n    }\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Get frequent contacts from call history (top N most called)\r\n */\r\nexport function getFrequentContacts(\r\n  calls: CallHistoryEntry[],\r\n  limit: number = 6\r\n): { contactName: string; phoneNumber: string; callCount: number }[] {\r\n  // Count calls per contact\r\n  const contactCounts = new Map<\r\n    string,\r\n    { name: string; phone: string; count: number }\r\n  >();\r\n\r\n  calls.forEach((call) => {\r\n    const key = call.phoneNumber;\r\n    if (contactCounts.has(key)) {\r\n      contactCounts.get(key)!.count++;\r\n    } else {\r\n      contactCounts.set(key, {\r\n        name: call.contactName,\r\n        phone: call.phoneNumber,\r\n        count: 1,\r\n      });\r\n    }\r\n  });\r\n\r\n  // Sort by count and take top N\r\n  return Array.from(contactCounts.values())\r\n    .sort((a, b) => b.count - a.count)\r\n    .slice(0, limit)\r\n    .map((contact) => ({\r\n      contactName: contact.name,\r\n      phoneNumber: contact.phone,\r\n      callCount: contact.count,\r\n    }));\r\n}\r\n","import { LitElement, html, css } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { CallFilter } from \"../../utils/call-history-grouping\";\r\n\r\n@customElement(\"tsuryphone-call-log-filters\")\r\nexport class TsuryPhoneCallLogFilters extends LitElement {\r\n  @property({ type: String }) activeFilter: CallFilter = \"all\";\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n    }\r\n\r\n    .filters {\r\n      display: flex;\r\n      justify-content: center;\r\n      gap: 8px;\r\n      padding: 16px;\r\n      overflow-x: auto;\r\n      -webkit-overflow-scrolling: touch;\r\n      scrollbar-width: none;\r\n    }\r\n\r\n    .filters::-webkit-scrollbar {\r\n      display: none;\r\n    }\r\n\r\n    .filter-chip {\r\n      flex-shrink: 0;\r\n      padding: 8px 16px;\r\n      border-radius: 16px;\r\n      border: 1px solid var(--divider-color);\r\n      background: var(--card-background-color);\r\n      color: var(--primary-text-color);\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      cursor: pointer;\r\n      transition: all 0.2s ease;\r\n      white-space: nowrap;\r\n      user-select: none;\r\n    }\r\n\r\n    .filter-chip:hover {\r\n      background: var(--primary-color);\r\n      color: var(--text-primary-color);\r\n      border-color: var(--primary-color);\r\n    }\r\n\r\n    .filter-chip.active {\r\n      background: var(--primary-color);\r\n      color: var(--text-primary-color);\r\n      border-color: var(--primary-color);\r\n    }\r\n\r\n    .filter-chip:active {\r\n      transform: scale(0.95);\r\n    }\r\n  `;\r\n\r\n  private _handleFilterClick(filter: CallFilter) {\r\n    this.activeFilter = filter;\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"filter-changed\", {\r\n        detail: { filter },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"filters\">\r\n        <div\r\n          class=\"filter-chip ${this.activeFilter === \"all\" ? \"active\" : \"\"}\"\r\n          @click=${() => this._handleFilterClick(\"all\")}\r\n          role=\"button\"\r\n          tabindex=\"0\"\r\n          aria-label=\"Show all calls\"\r\n        >\r\n          All\r\n        </div>\r\n        <div\r\n          class=\"filter-chip ${this.activeFilter === \"missed\" ? \"active\" : \"\"}\"\r\n          @click=${() => this._handleFilterClick(\"missed\")}\r\n          role=\"button\"\r\n          tabindex=\"0\"\r\n          aria-label=\"Show missed calls\"\r\n        >\r\n          Missed\r\n        </div>\r\n        <div\r\n          class=\"filter-chip ${this.activeFilter === \"outgoing\"\r\n            ? \"active\"\r\n            : \"\"}\"\r\n          @click=${() => this._handleFilterClick(\"outgoing\")}\r\n          role=\"button\"\r\n          tabindex=\"0\"\r\n          aria-label=\"Show outgoing calls\"\r\n        >\r\n          Outgoing\r\n        </div>\r\n        <div\r\n          class=\"filter-chip ${this.activeFilter === \"incoming\"\r\n            ? \"active\"\r\n            : \"\"}\"\r\n          @click=${() => this._handleFilterClick(\"incoming\")}\r\n          role=\"button\"\r\n          tabindex=\"0\"\r\n          aria-label=\"Show incoming calls\"\r\n        >\r\n          Incoming\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-call-log-filters\": TsuryPhoneCallLogFilters;\r\n  }\r\n}\r\n","/**\r\n * Generate consistent avatar colors based on contact name\r\n */\r\n\r\nconst AVATAR_COLORS_DARK = [\r\n  \"#1565c0\", // Darker Blue\r\n  \"#2e7d32\", // Darker Green\r\n  \"#c62828\", // Darker Red\r\n  \"#6a1b9a\", // Darker Purple\r\n  \"#e65100\", // Darker Orange\r\n  \"#00838f\", // Darker Cyan\r\n  \"#ad1457\", // Darker Pink\r\n  \"#4e342e\", // Darker Brown\r\n  \"#37474f\", // Darker Blue Grey\r\n  \"#558b2f\", // Darker Light Green\r\n  \"#01579b\", // Darker Light Blue\r\n  \"#bf360c\", // Darker Deep Orange\r\n];\r\n\r\nconst AVATAR_COLORS_LIGHT = [\r\n  \"#42a5f5\", // Lighter Blue\r\n  \"#66bb6a\", // Lighter Green\r\n  \"#ef5350\", // Lighter Red\r\n  \"#ab47bc\", // Lighter Purple\r\n  \"#ffa726\", // Lighter Orange\r\n  \"#26c6da\", // Lighter Cyan\r\n  \"#ec407a\", // Lighter Pink\r\n  \"#8d6e63\", // Lighter Brown\r\n  \"#78909c\", // Lighter Blue Grey\r\n  \"#9ccc65\", // Lighter Light Green\r\n  \"#29b6f6\", // Lighter Light Blue\r\n  \"#ff7043\", // Lighter Deep Orange\r\n];\r\n\r\n/**\r\n * Check if the UI is in dark mode\r\n */\r\nfunction isDarkMode(): boolean {\r\n  // Check if the document has a dark theme class or attribute\r\n  if (typeof document !== 'undefined') {\r\n    const html = document.documentElement;\r\n    const bodyTheme = document.body.getAttribute('data-theme');\r\n    \r\n    // Check for common dark mode indicators\r\n    if (bodyTheme === 'dark' || html.classList.contains('dark-mode')) {\r\n      return true;\r\n    }\r\n    \r\n    // Check CSS variable for theme\r\n    const themeStyle = getComputedStyle(html);\r\n    const cardBg = themeStyle.getPropertyValue('--card-background-color');\r\n    \r\n    // If background is dark (low lightness), assume dark mode\r\n    if (cardBg) {\r\n      // Simple heuristic: if it starts with # and looks dark\r\n      const rgb = themeStyle.getPropertyValue('--primary-background-color') || cardBg;\r\n      if (rgb.includes('rgb')) {\r\n        const values = rgb.match(/\\d+/g);\r\n        if (values && values.length >= 3) {\r\n          const brightness = (parseInt(values[0]) + parseInt(values[1]) + parseInt(values[2])) / 3;\r\n          return brightness < 128;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Default to dark mode if we can't determine\r\n  return true;\r\n}\r\n\r\n/**\r\n * Simple hash function for strings\r\n */\r\nfunction hashCode(str: string): number {\r\n  let hash = 0;\r\n  for (let i = 0; i < str.length; i++) {\r\n    const char = str.charCodeAt(i);\r\n    hash = (hash << 5) - hash + char;\r\n    hash = hash & hash; // Convert to 32bit integer\r\n  }\r\n  return Math.abs(hash);\r\n}\r\n\r\n/**\r\n * Get a consistent color for a given name\r\n */\r\nexport function getAvatarColor(name: string): string {\r\n  if (!name) {\r\n    return isDarkMode() ? AVATAR_COLORS_DARK[0] : AVATAR_COLORS_LIGHT[0];\r\n  }\r\n  \r\n  const colors = isDarkMode() ? AVATAR_COLORS_DARK : AVATAR_COLORS_LIGHT;\r\n  const index = hashCode(name) % colors.length;\r\n  return colors[index];\r\n}\r\n\r\n/**\r\n * Get initials from a name (up to 2 characters)\r\n */\r\nexport function getInitials(name: string): string {\r\n  if (!name) {\r\n    return \"?\";\r\n  }\r\n\r\n  const words = name.trim().split(/\\s+/);\r\n\r\n  // Always return just the first letter\r\n  return words[0][0].toUpperCase();\r\n}\r\n","import { LitElement, html, css } from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\nimport { getAvatarColor, getInitials } from '../../utils/avatar-color';\r\n\r\ninterface FrequentContact {\r\n  contactName: string;\r\n  phoneNumber: string;\r\n  callCount: number;\r\n}\r\n\r\n@customElement('tsuryphone-frequent-contacts')\r\nexport class TsuryPhoneFrequentContacts extends LitElement {\r\n  @property({ type: Array }) contacts: FrequentContact[] = [];\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n    }\r\n\r\n    .frequent-contacts {\r\n      padding: 16px;\r\n    }\r\n\r\n    .section-header {\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      color: var(--secondary-text-color);\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.5px;\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    .contacts-grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));\r\n      gap: 16px;\r\n    }\r\n\r\n    .contact-item {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      gap: 8px;\r\n      cursor: pointer;\r\n      padding: 8px;\r\n      border-radius: 8px;\r\n      transition: background-color 0.2s ease;\r\n    }\r\n\r\n    .contact-item:hover {\r\n      background: var(--sidebar-background-color, rgba(0, 0, 0, 0.05));\r\n    }\r\n\r\n    .contact-item:active {\r\n      transform: scale(0.95);\r\n    }\r\n\r\n    .avatar {\r\n      width: 56px;\r\n      height: 56px;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: white;\r\n      font-weight: 600;\r\n      font-size: 20px;\r\n      position: relative;\r\n    }\r\n\r\n    .call-count-badge {\r\n      position: absolute;\r\n      top: -4px;\r\n      right: -4px;\r\n      background: var(--primary-color);\r\n      color: var(--text-primary-color);\r\n      font-size: 11px;\r\n      font-weight: 600;\r\n      padding: 2px 6px;\r\n      border-radius: 10px;\r\n      min-width: 20px;\r\n      text-align: center;\r\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .contact-name {\r\n      font-size: 13px;\r\n      color: var(--primary-text-color);\r\n      text-align: center;\r\n      max-width: 100%;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .empty-state {\r\n      text-align: center;\r\n      padding: 32px 16px;\r\n      color: var(--secondary-text-color);\r\n    }\r\n\r\n    .empty-icon {\r\n      --mdc-icon-size: 48px;\r\n      margin-bottom: 12px;\r\n      opacity: 0.5;\r\n    }\r\n\r\n    .empty-text {\r\n      font-size: 14px;\r\n    }\r\n  `;\r\n\r\n  private _handleContactClick(contact: FrequentContact) {\r\n    this.dispatchEvent(\r\n      new CustomEvent('contact-clicked', {\r\n        detail: { contact },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.contacts.length === 0) {\r\n      return html`\r\n        <div class=\"frequent-contacts\">\r\n          <div class=\"section-header\">Frequents</div>\r\n          <div class=\"empty-state\">\r\n            <ha-icon class=\"empty-icon\" icon=\"mdi:account-multiple-outline\"></ha-icon>\r\n            <div class=\"empty-text\">No frequent contacts yet</div>\r\n          </div>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n      <div class=\"frequent-contacts\">\r\n        <div class=\"section-header\">Frequents</div>\r\n        <div class=\"contacts-grid\">\r\n          ${this.contacts.map(\r\n            contact => html`\r\n              <div\r\n                class=\"contact-item\"\r\n                @click=${() => this._handleContactClick(contact)}\r\n                role=\"button\"\r\n                tabindex=\"0\"\r\n                aria-label=\"Call ${contact.contactName}\"\r\n              >\r\n                <div class=\"avatar\" style=\"background-color: ${getAvatarColor(contact.contactName)}\">\r\n                  ${getInitials(contact.contactName)}\r\n                  ${contact.callCount > 1\r\n                    ? html`<div class=\"call-count-badge\">${contact.callCount}</div>`\r\n                    : ''}\r\n                </div>\r\n                <div class=\"contact-name\" title=\"${contact.contactName}\">\r\n                  ${contact.contactName}\r\n                </div>\r\n              </div>\r\n            `\r\n          )}\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'tsuryphone-frequent-contacts': TsuryPhoneFrequentContacts;\r\n  }\r\n}\r\n","/**\r\n * Formatting Utilities\r\n * Reusable formatters for phone numbers, dates, durations\r\n */\r\n\r\n/**\r\n * Format phone number for display\r\n */\r\nexport function formatPhoneNumber(number: string): string {\r\n  if (!number) return \"\";\r\n\r\n  // Remove non-digit characters\r\n  const digits = number.replace(/\\D/g, \"\");\r\n\r\n  // Format based on length\r\n  if (digits.length === 10) {\r\n    // US format: (555) 123-4567\r\n    return `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6)}`;\r\n  } else if (digits.length === 11 && digits[0] === \"1\") {\r\n    // US format with country code: +1 (555) 123-4567\r\n    return `+1 (${digits.slice(1, 4)}) ${digits.slice(4, 7)}-${digits.slice(7)}`;\r\n  } else if (digits.length > 11) {\r\n    // International format: +XX XXX XXX XXXX\r\n    return `+${digits.slice(0, 2)} ${digits.slice(2, 5)} ${digits.slice(5, 8)} ${digits.slice(8)}`;\r\n  }\r\n\r\n  // Default: return as-is\r\n  return number;\r\n}\r\n\r\n/**\r\n * Format duration in seconds to human-readable string\r\n */\r\nexport function formatDuration(seconds: number | null): string {\r\n  if (seconds === null || seconds === 0) return \"0s\";\r\n\r\n  const hours = Math.floor(seconds / 3600);\r\n  const minutes = Math.floor((seconds % 3600) / 60);\r\n  const secs = seconds % 60;\r\n\r\n  if (hours > 0) {\r\n    return `${hours}h ${minutes}m`;\r\n  } else if (minutes > 0) {\r\n    return `${minutes}m ${secs}s`;\r\n  } else {\r\n    return `${secs}s`;\r\n  }\r\n}\r\n\r\n/**\r\n * Format timestamp to relative time (e.g., \"2 min ago\", \"Yesterday\")\r\n */\r\nexport function formatRelativeTime(timestamp: number): string {\r\n  const now = Date.now();\r\n  const date = new Date(timestamp * 1000);\r\n  const diffMs = now - date.getTime();\r\n  const diffSec = Math.floor(diffMs / 1000);\r\n  const diffMin = Math.floor(diffSec / 60);\r\n  const diffHour = Math.floor(diffMin / 60);\r\n  const diffDay = Math.floor(diffHour / 24);\r\n\r\n  if (diffMin < 1) return \"Just now\";\r\n  if (diffMin < 60) return `${diffMin} min ago`;\r\n  if (diffHour < 24) return `${diffHour} hour${diffHour > 1 ? \"s\" : \"\"} ago`;\r\n  if (diffDay === 1) return \"Yesterday\";\r\n  if (diffDay < 7) return `${diffDay} days ago`;\r\n\r\n  // Format as date\r\n  return date.toLocaleDateString(undefined, {\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n}\r\n\r\n/**\r\n * Format time for call log (e.g., \"14:30\", \"Yesterday 09:15\")\r\n */\r\nexport function formatCallTime(timestamp: number): string {\r\n  const now = Date.now();\r\n  const date = new Date(timestamp * 1000);\r\n  const diffMs = now - date.getTime();\r\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n\r\n  const timeStr = date.toLocaleTimeString(undefined, {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    hour12: false,\r\n  });\r\n\r\n  if (diffHours < 24) {\r\n    // Today - show only time\r\n    return timeStr;\r\n  } else if (diffHours < 48) {\r\n    // Yesterday\r\n    return `Yesterday ${timeStr}`;\r\n  } else if (diffHours < 168) {\r\n    // This week - show day name\r\n    return date.toLocaleDateString(undefined, {\r\n      weekday: \"short\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: false,\r\n    });\r\n  } else {\r\n    // Older - show date\r\n    return date.toLocaleDateString(undefined, {\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: false,\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Generate consistent color from string (for avatars)\r\n */\r\nexport function generateColor(input: string): string {\r\n  if (!input) return \"hsl(200, 60%, 45%)\"; // Default color\r\n\r\n  let hash = 0;\r\n  for (let i = 0; i < input.length; i++) {\r\n    hash = input.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n\r\n  const hue = Math.abs(hash % 360);\r\n  \r\n  // Check if dark mode - simple heuristic\r\n  const isDark = (() => {\r\n    if (typeof document !== 'undefined') {\r\n      const html = document.documentElement;\r\n      const themeStyle = getComputedStyle(html);\r\n      const cardBg = themeStyle.getPropertyValue('--card-background-color');\r\n      \r\n      if (cardBg && cardBg.includes('rgb')) {\r\n        const values = cardBg.match(/\\d+/g);\r\n        if (values && values.length >= 3) {\r\n          const brightness = (parseInt(values[0]) + parseInt(values[1]) + parseInt(values[2])) / 3;\r\n          return brightness < 128;\r\n        }\r\n      }\r\n    }\r\n    return true; // default to dark\r\n  })();\r\n  \r\n  // Dark mode: darker, more saturated colors\r\n  // Light mode: lighter, less saturated colors\r\n  if (isDark) {\r\n    return `hsl(${hue}, 65%, 45%)`; // Darker for dark mode\r\n  } else {\r\n    return `hsl(${hue}, 60%, 60%)`; // Lighter for light mode\r\n  }\r\n}\r\n\r\n/**\r\n * Get first letter of name for avatar\r\n */\r\nexport function getAvatarLetter(name: string): string {\r\n  if (!name) return \"?\";\r\n  return name.trim()[0].toUpperCase();\r\n}\r\n\r\n/**\r\n * Normalize phone number for display based on default dial code\r\n * If number starts with the default dial code (e.g., +972), replace it with 0\r\n */\r\nexport function normalizePhoneNumberForDisplay(\r\n  number: string,\r\n  defaultDialCode: string\r\n): string {\r\n  if (!number || !defaultDialCode) return number;\r\n\r\n  // Remove any + prefix and whitespace from both number and code\r\n  const cleanNumber = number.replace(/^\\+/, \"\").replace(/\\s/g, \"\");\r\n  const cleanDefaultCode = defaultDialCode.replace(/^\\+/, \"\").replace(/\\s/g, \"\");\r\n\r\n  // Check if number starts with the default code\r\n  if (cleanNumber.startsWith(cleanDefaultCode)) {\r\n    // Replace with 0 and the rest of the number\r\n    return \"0\" + cleanNumber.substring(cleanDefaultCode.length);\r\n  }\r\n\r\n  return number;\r\n}\r\n","import { LitElement, html, css } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { CallHistoryEntry } from \"../../utils/call-history-grouping\";\r\nimport { formatCallTime, formatDuration } from \"../../utils/date-formatter\";\r\nimport { getAvatarColor, getInitials } from \"../../utils/avatar-color\";\r\nimport { normalizePhoneNumberForDisplay } from \"../../utils/formatters\";\r\n\r\n@customElement(\"tsuryphone-call-log-item\")\r\nexport class TsuryPhoneCallLogItem extends LitElement {\r\n  @property({ type: Object }) call!: CallHistoryEntry;\r\n  @property({ type: String }) defaultDialCode = \"\";\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n    }\r\n\r\n    .call-item {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 12px 16px;\r\n      gap: 12px;\r\n      cursor: pointer;\r\n      transition: background-color 0.2s ease;\r\n    }\r\n\r\n    .call-item:hover {\r\n      background: var(--secondary-background-color);\r\n    }\r\n\r\n    .call-item:active {\r\n      background: var(--divider-color);\r\n    }\r\n\r\n    .avatar {\r\n      width: 40px;\r\n      height: 40px;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: white;\r\n      font-weight: 600;\r\n      font-size: 16px;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    .call-info {\r\n      flex: 1;\r\n      min-width: 0;\r\n    }\r\n\r\n    .call-header {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n      margin-bottom: 4px;\r\n    }\r\n\r\n    .contact-name {\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .call-type-icon {\r\n      width: 16px;\r\n      height: 16px;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    .call-type-icon svg {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n\r\n    .call-type-icon.incoming {\r\n      color: var(--success-color);\r\n    }\r\n\r\n    .call-type-icon.outgoing {\r\n      color: var(--info-color);\r\n    }\r\n\r\n    .call-type-icon.missed {\r\n      color: var(--error-color);\r\n    }\r\n\r\n    .call-details {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n      font-size: 13px;\r\n      color: var(--secondary-text-color);\r\n    }\r\n\r\n    .phone-number {\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .call-time {\r\n      flex-shrink: 0;\r\n      font-size: 13px;\r\n      color: var(--secondary-text-color);\r\n      margin-left: auto;\r\n    }\r\n\r\n    .blocked-badge {\r\n      background: var(--error-color);\r\n      color: var(--text-primary-color, white);\r\n      font-size: 11px;\r\n      padding: 2px 6px;\r\n      border-radius: 4px;\r\n      font-weight: 500;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    .count-badge {\r\n      color: var(--secondary-text-color);\r\n      font-size: 13px;\r\n      font-weight: 500;\r\n      flex-shrink: 0;\r\n    }\r\n  `;\r\n\r\n  private _getCallTypeIcon() {\r\n    switch (this.call.type) {\r\n      case \"incoming\":\r\n        return html`\r\n          <div class=\"call-type-icon incoming\" title=\"Incoming call\">\r\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n              <path d=\"M20 4 L4 20 M4 20 L4 12 M4 20 L12 20\" />\r\n            </svg>\r\n          </div>\r\n        `;\r\n      case \"outgoing\":\r\n        return html`\r\n          <div class=\"call-type-icon outgoing\" title=\"Outgoing call\">\r\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n              <path d=\"M4 20 L20 4 M20 4 L20 12 M20 4 L12 4\" />\r\n            </svg>\r\n          </div>\r\n        `;\r\n      case \"missed\":\r\n        return html`\r\n          <div class=\"call-type-icon missed\" title=\"Missed call\">\r\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n              <path d=\"M20 4 L12 12 M8 16 L4 20 M4 20 L4 12 M4 20 L12 20\" />\r\n            </svg>\r\n          </div>\r\n        `;\r\n    }\r\n  }\r\n\r\n  private _handleClick() {\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"call-item-clicked\", {\r\n        detail: { call: this.call },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const avatarColor = getAvatarColor(this.call.contactName);\r\n    const initials = getInitials(this.call.contactName);\r\n    const timeFormatted = formatCallTime(this.call.timestamp);\r\n    \r\n    // Show duration for answered calls, \"Missed\" for missed/blocked calls\r\n    let durationDisplay = null;\r\n    if (this.call.type === \"missed\" || this.call.isBlocked) {\r\n      durationDisplay = html`<span> Missed</span>`;\r\n    } else if (this.call.duration > 0) {\r\n      durationDisplay = html`<span> ${formatDuration(this.call.duration)}</span>`;\r\n    }\r\n\r\n    // Debug logging for first call item\r\n    if (!this.hasAttribute('debug-logged')) {\r\n      console.log('[CallLogItem] Rendering call:', {\r\n        type: this.call.type,\r\n        duration: this.call.duration,\r\n        isBlocked: this.call.isBlocked,\r\n        durationDisplay: durationDisplay ? 'shown' : 'hidden',\r\n        contactName: this.call.contactName\r\n      });\r\n      this.setAttribute('debug-logged', 'true');\r\n    }\r\n    \r\n    const displayNumber = normalizePhoneNumberForDisplay(\r\n      this.call.phoneNumber,\r\n      this.defaultDialCode || \"972\" // Fallback to Israel if not provided\r\n    );\r\n\r\n    // Debug logging for number normalization\r\n    if (!this.hasAttribute('number-debug-logged')) {\r\n      console.log('[CallLogItem] Number normalization:', {\r\n        originalNumber: this.call.phoneNumber,\r\n        defaultDialCode: this.defaultDialCode,\r\n        fallbackUsed: !this.defaultDialCode,\r\n        displayNumber: displayNumber\r\n      });\r\n      this.setAttribute('number-debug-logged', 'true');\r\n    }\r\n\r\n    return html`\r\n      <div class=\"call-item\" @click=${this._handleClick}>\r\n        <div class=\"avatar\" style=\"background-color: ${avatarColor}\">\r\n          ${initials}\r\n        </div>\r\n        <div class=\"call-info\">\r\n          <div class=\"call-header\">\r\n            <span class=\"contact-name\">${this.call.contactName}</span>\r\n            ${this._getCallTypeIcon()}\r\n            ${this.call.count && this.call.count > 1\r\n              ? html`<span class=\"count-badge\">(${this.call.count})</span>`\r\n              : \"\"}\r\n            ${this.call.isBlocked\r\n              ? html`<span class=\"blocked-badge\">Blocked</span>`\r\n              : \"\"}\r\n          </div>\r\n          <div class=\"call-details\">\r\n            <span class=\"phone-number\">${displayNumber}</span>\r\n            ${durationDisplay}\r\n          </div>\r\n        </div>\r\n        <div class=\"call-time\">${timeFormatted}</div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-call-log-item\": TsuryPhoneCallLogItem;\r\n  }\r\n}\r\n","/**\r\n * Shared Styles\r\n * Reusable CSS patterns for TsuryPhone components\r\n */\r\n\r\nimport { css } from \"lit\";\r\n\r\n/**\r\n * Common avatar styles\r\n */\r\nexport const avatarStyles = css`\r\n  .avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-weight: 500;\r\n    font-size: 16px;\r\n    color: white;\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  .avatar.large {\r\n    width: 56px;\r\n    height: 56px;\r\n    font-size: 24px;\r\n  }\r\n\r\n  .avatar.small {\r\n    width: 32px;\r\n    height: 32px;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\n/**\r\n * Common list item styles\r\n */\r\nexport const listItemStyles = css`\r\n  .list-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 12px 16px;\r\n    gap: 12px;\r\n    background: var(--card-background-color);\r\n    border-bottom: 1px solid var(--divider-color);\r\n    cursor: pointer;\r\n    transition: background-color 0.2s;\r\n  }\r\n\r\n  .list-item:hover {\r\n    background: var(--secondary-background-color);\r\n  }\r\n\r\n  .list-item:active {\r\n    background: var(--divider-color);\r\n  }\r\n\r\n  .list-item-content {\r\n    flex: 1;\r\n    min-width: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n  }\r\n\r\n  .list-item-title {\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    color: var(--primary-text-color);\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .list-item-subtitle {\r\n    font-size: 14px;\r\n    color: var(--secondary-text-color);\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .list-item-actions {\r\n    display: flex;\r\n    gap: 8px;\r\n    align-items: center;\r\n  }\r\n`;\r\n\r\n/**\r\n * Common button styles\r\n */\r\nexport const buttonStyles = css`\r\n  .action-button {\r\n    padding: 8px 16px;\r\n    border-radius: 8px;\r\n    border: none;\r\n    background: var(--primary-color);\r\n    color: var(--text-primary-color, white);\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    transition: all 0.2s;\r\n  }\r\n\r\n  .action-button:hover {\r\n    background: var(--dark-primary-color, var(--primary-color));\r\n    transform: scale(1.02);\r\n  }\r\n\r\n  .action-button:active {\r\n    transform: scale(0.98);\r\n  }\r\n\r\n  .action-button:disabled {\r\n    background: var(--disabled-color);\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  .action-button.secondary {\r\n    background: var(--secondary-background-color);\r\n    color: var(--primary-text-color);\r\n  }\r\n\r\n  .action-button.danger {\r\n    background: var(--error-color);\r\n    color: var(--text-primary-color, white);\r\n  }\r\n\r\n  .icon-button {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    border: none;\r\n    background: transparent;\r\n    color: var(--secondary-text-color);\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.2s;\r\n  }\r\n\r\n  .icon-button:hover {\r\n    background: var(--secondary-background-color);\r\n  }\r\n\r\n  .icon-button:active {\r\n    background: var(--divider-color);\r\n    transform: scale(0.95);\r\n  }\r\n`;\r\n\r\n/**\r\n * Common modal styles\r\n */\r\nexport const modalStyles = css`\r\n  .modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: var(--mdc-dialog-scrim-color, rgba(0, 0, 0, 0.5));\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n    padding: 16px;\r\n  }\r\n\r\n  .modal {\r\n    background: var(--card-background-color);\r\n    border-radius: 16px;\r\n    max-width: 500px;\r\n    width: 100%;\r\n    max-height: 80vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-shadow: var(\r\n      --ha-card-box-shadow,\r\n      0 8px 32px rgba(0, 0, 0, 0.3)\r\n    );\r\n  }\r\n\r\n  .modal-header {\r\n    padding: 20px 24px;\r\n    border-bottom: 1px solid var(--divider-color);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .modal-title {\r\n    font-size: 20px;\r\n    font-weight: 500;\r\n    color: var(--primary-text-color);\r\n  }\r\n\r\n  .modal-body {\r\n    padding: 24px;\r\n    overflow-y: auto;\r\n    flex: 1;\r\n  }\r\n\r\n  .modal-footer {\r\n    padding: 16px 24px;\r\n    border-top: 1px solid var(--divider-color);\r\n    display: flex;\r\n    gap: 12px;\r\n    justify-content: flex-end;\r\n  }\r\n`;\r\n\r\n/**\r\n * Common form styles\r\n */\r\nexport const formStyles = css`\r\n  .form-field {\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .form-label {\r\n    display: block;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: var(--primary-text-color);\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .form-input {\r\n    width: 100%;\r\n    padding: 12px 16px;\r\n    border: 1px solid var(--divider-color);\r\n    border-radius: 8px;\r\n    font-size: 16px;\r\n    font-family: inherit;\r\n    color: var(--primary-text-color);\r\n    background: var(--card-background-color);\r\n    box-sizing: border-box;\r\n    transition: border-color 0.2s;\r\n  }\r\n\r\n  .form-input:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n  }\r\n\r\n  .form-input::placeholder {\r\n    color: var(--secondary-text-color);\r\n  }\r\n\r\n  .form-helper {\r\n    font-size: 12px;\r\n    color: var(--secondary-text-color);\r\n    margin-top: 4px;\r\n  }\r\n\r\n  .form-error {\r\n    font-size: 12px;\r\n    color: var(--error-color);\r\n    margin-top: 4px;\r\n  }\r\n`;\r\n\r\n/**\r\n * Common empty state styles\r\n */\r\nexport const emptyStateStyles = css`\r\n  .empty-state {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 48px 24px;\r\n    text-align: center;\r\n  }\r\n\r\n  .empty-state-icon {\r\n    width: 64px;\r\n    height: 64px;\r\n    color: var(--secondary-text-color);\r\n    margin-bottom: 16px;\r\n    opacity: 0.5;\r\n  }\r\n\r\n  .empty-state-title {\r\n    font-size: 18px;\r\n    font-weight: 500;\r\n    color: var(--primary-text-color);\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .empty-state-message {\r\n    font-size: 14px;\r\n    color: var(--secondary-text-color);\r\n    margin-bottom: 24px;\r\n  }\r\n`;\r\n","/**\r\n * Empty State Component\r\n * Reusable empty state message\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { emptyStateStyles } from \"../../styles/shared-styles\";\r\n\r\n@customElement(\"tsuryphone-empty-state\")\r\nexport class TsuryPhoneEmptyState extends LitElement {\r\n  @property({ type: String }) icon = \"mdi:alert-circle-outline\";\r\n  @property({ type: String }) title = \"No items\";\r\n  @property({ type: String }) message = \"\";\r\n  @property({ type: String }) actionLabel?: string;\r\n  @property({ type: Function }) onAction?: () => void;\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      emptyStateStyles,\r\n      css`\r\n        :host {\r\n          display: block;\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n\r\n  private _handleAction(): void {\r\n    if (this.onAction) {\r\n      this.onAction();\r\n    }\r\n    this.dispatchEvent(new CustomEvent(\"action\", { bubbles: true, composed: true }));\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    return html`\r\n      <div class=\"empty-state\">\r\n        <ha-icon class=\"empty-state-icon\" .icon=${this.icon}></ha-icon>\r\n        <div class=\"empty-state-title\">${this.title}</div>\r\n        ${this.message\r\n          ? html`<div class=\"empty-state-message\">${this.message}</div>`\r\n          : \"\"}\r\n        ${this.actionLabel\r\n          ? html`\r\n              <button class=\"action-button\" @click=${this._handleAction}>\r\n                ${this.actionLabel}\r\n              </button>\r\n            `\r\n          : \"\"}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-empty-state\": TsuryPhoneEmptyState;\r\n  }\r\n}\r\n","import { LitElement, html, css } from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\nimport { GroupedCallHistory } from '../../utils/call-history-grouping';\r\nimport './call-log-item';\r\nimport '../shared/empty-state';\r\n\r\n@customElement('tsuryphone-call-log-list')\r\nexport class TsuryPhoneCallLogList extends LitElement {\r\n  @property({ type: Array }) groupedCalls: GroupedCallHistory[] = [];\r\n  @property({ type: Boolean }) loading = false;\r\n  @property({ type: Boolean }) hasAnyCalls = false; // Whether there are any calls (before filtering)\r\n  @property({ type: String }) defaultDialCode = \"\";\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n    }\r\n\r\n    .call-log-list {\r\n      flex: 1;\r\n      overflow-y: auto;\r\n    }\r\n\r\n    .group {\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    .group-header {\r\n      position: sticky;\r\n      top: 0;\r\n      background: var(--card-background-color);\r\n      padding: 12px 16px;\r\n      font-size: 13px;\r\n      font-weight: 600;\r\n      color: var(--secondary-text-color);\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.5px;\r\n      border-bottom: 1px solid var(--divider-color);\r\n      z-index: 1;\r\n    }\r\n\r\n    .divider {\r\n      height: 1px;\r\n      background: var(--divider-color);\r\n      margin: 0 16px;\r\n    }\r\n\r\n    .divider:last-child {\r\n      display: none;\r\n    }\r\n\r\n    .loading {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 64px 32px;\r\n      color: var(--secondary-text-color);\r\n    }\r\n\r\n    .spinner {\r\n      width: 40px;\r\n      height: 40px;\r\n      border: 3px solid var(--divider-color);\r\n      border-top-color: var(--primary-color);\r\n      border-radius: 50%;\r\n      animation: spin 1s linear infinite;\r\n    }\r\n\r\n    @keyframes spin {\r\n      to {\r\n        transform: rotate(360deg);\r\n      }\r\n    }\r\n  `;\r\n\r\n  render() {\r\n    if (this.loading) {\r\n      return html`\r\n        <div class=\"loading\">\r\n          <div class=\"spinner\"></div>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    if (this.groupedCalls.length === 0) {\r\n      // Different message if we have calls but filter matched nothing\r\n      if (this.hasAnyCalls) {\r\n        return html`\r\n          <tsuryphone-empty-state\r\n            icon=\"mdi:filter-off-outline\"\r\n            title=\"No matching calls\"\r\n            message=\"Try changing the filter to see more call history.\"\r\n          ></tsuryphone-empty-state>\r\n        `;\r\n      }\r\n      \r\n      return html`\r\n        <tsuryphone-empty-state\r\n          icon=\"mdi:phone-outline\"\r\n          title=\"No calls yet\"\r\n          message=\"Your call history will appear here once you start making or receiving calls.\"\r\n        ></tsuryphone-empty-state>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n      <div class=\"call-log-list\">\r\n        ${this.groupedCalls.map(\r\n          group => html`\r\n            <div class=\"group\">\r\n              <div class=\"group-header\">${group.groupLabel}</div>\r\n              ${group.calls.map(\r\n                (call, index) => html`\r\n                  <tsuryphone-call-log-item \r\n                    .call=${call} \r\n                    .defaultDialCode=${this.defaultDialCode}\r\n                  ></tsuryphone-call-log-item>\r\n                  ${index < group.calls.length - 1 ? html`<div class=\"divider\"></div>` : ''}\r\n                `\r\n              )}\r\n            </div>\r\n          `\r\n        )}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'tsuryphone-call-log-list': TsuryPhoneCallLogList;\r\n  }\r\n}\r\n","import { LitElement, html, css } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport {\r\n  CallHistoryEntry,\r\n  CallFilter,\r\n  filterCallHistory,\r\n  groupCallHistory,\r\n  getFrequentContacts,\r\n} from \"../../utils/call-history-grouping\";\r\nimport \"./call-log-filters\";\r\nimport \"./frequent-contacts\";\r\nimport \"./call-log-list\";\r\n\r\n@customElement(\"tsuryphone-home-view\")\r\nexport class TsuryPhoneHomeView extends LitElement {\r\n  @property({ type: Array }) callHistory: CallHistoryEntry[] = [];\r\n  @property({ type: Boolean }) loading = false;\r\n  @property({ type: String }) defaultDialCode = \"\";\r\n\r\n  @state() private _activeFilter: CallFilter = \"all\";\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      background: var(--card-background-color);\r\n    }\r\n\r\n    .home-view {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .scrollable-content {\r\n      flex: 1;\r\n      overflow-y: auto;\r\n      -webkit-overflow-scrolling: touch;\r\n    }\r\n\r\n    .divider {\r\n      height: 1px;\r\n      background: var(--divider-color);\r\n      margin: 0 16px;\r\n    }\r\n\r\n    /* Mobile optimizations */\r\n    @media (max-width: 599px) {\r\n      .home-view {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n\r\n    /* Tablet */\r\n    @media (min-width: 600px) and (max-width: 1023px) {\r\n      .home-view {\r\n        max-width: 600px;\r\n        margin: 0 auto;\r\n      }\r\n    }\r\n\r\n    /* Desktop */\r\n    @media (min-width: 1024px) {\r\n      .home-view {\r\n        max-width: 800px;\r\n        margin: 0 auto;\r\n      }\r\n    }\r\n  `;\r\n\r\n  private _handleFilterChanged(e: CustomEvent) {\r\n    this._activeFilter = e.detail.filter;\r\n  }\r\n\r\n  private _handleContactClicked(e: CustomEvent) {\r\n    // Bubble up the event for parent to handle (e.g., open call modal)\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"dial-contact\", {\r\n        detail: e.detail,\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  private _handleCallItemClicked(e: CustomEvent) {\r\n    // Bubble up the event for parent to handle (e.g., open call details)\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"call-details\", {\r\n        detail: e.detail,\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    // Filter and group call history\r\n    const filteredCalls = filterCallHistory(\r\n      this.callHistory,\r\n      this._activeFilter\r\n    );\r\n    const groupedCalls = groupCallHistory(filteredCalls);\r\n\r\n    // Get frequent contacts (only from all calls, not filtered)\r\n    const frequentContacts = getFrequentContacts(this.callHistory, 6);\r\n\r\n    // Show frequent contacts only if we have calls and filter is 'all'\r\n    const showFrequentContacts =\r\n      this._activeFilter === \"all\" && frequentContacts.length > 0;\r\n\r\n    return html`\r\n      <div class=\"home-view\">\r\n        <tsuryphone-call-log-filters\r\n          .activeFilter=${this._activeFilter}\r\n          @filter-changed=${this._handleFilterChanged}\r\n        ></tsuryphone-call-log-filters>\r\n\r\n        <div class=\"scrollable-content\">\r\n          ${showFrequentContacts\r\n            ? html`\r\n                <tsuryphone-frequent-contacts\r\n                  .contacts=${frequentContacts}\r\n                  @contact-clicked=${this._handleContactClicked}\r\n                ></tsuryphone-frequent-contacts>\r\n                <div class=\"divider\"></div>\r\n              `\r\n            : \"\"}\r\n\r\n          <tsuryphone-call-log-list\r\n            .groupedCalls=${groupedCalls}\r\n            .hasAnyCalls=${this.callHistory.length > 0}\r\n            .defaultDialCode=${this.defaultDialCode}\r\n            .loading=${this.loading}\r\n            @call-item-clicked=${this._handleCallItemClicked}\r\n          ></tsuryphone-call-log-list>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-home-view\": TsuryPhoneHomeView;\r\n  }\r\n}\r\n","/**\r\n * Entity Discovery Utilities\r\n * Discover related entities from a device without hardcoded naming patterns\r\n */\r\n\r\nimport { HomeAssistant, HassEntity } from \"../types/homeassistant\";\r\n\r\nexport interface DeviceEntities {\r\n  phoneState: string;\r\n  currentDialingNumber: string | null;\r\n  callHistory: string | null;\r\n  currentCallNumber: string | null;\r\n  // Add more as needed\r\n}\r\n\r\n/**\r\n * Get the device ID from an entity using WebSocket API\r\n */\r\nasync function getDeviceIdFromEntity(\r\n  hass: HomeAssistant,\r\n  entityId: string\r\n): Promise<string | null> {\r\n  try {\r\n    const entities = await hass.callWS<any[]>({\r\n      type: \"config/entity_registry/list\",\r\n    });\r\n\r\n    const entity = entities.find((e) => e.entity_id === entityId);\r\n    return entity?.device_id || null;\r\n  } catch (error) {\r\n    console.error(\"[EntityDiscovery] Failed to get device ID:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get all entities belonging to a device\r\n */\r\nasync function getDeviceEntities(\r\n  hass: HomeAssistant,\r\n  deviceId: string\r\n): Promise<string[]> {\r\n  try {\r\n    const entities = await hass.callWS<any[]>({\r\n      type: \"config/entity_registry/list\",\r\n    });\r\n\r\n    return entities\r\n      .filter((e) => e.device_id === deviceId)\r\n      .map((e) => e.entity_id);\r\n  } catch (error) {\r\n    console.error(\"[EntityDiscovery] Failed to get device entities:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Discover all TsuryPhone entities from a single phone_state entity\r\n */\r\nexport async function discoverTsuryPhoneEntities(\r\n  hass: HomeAssistant,\r\n  phoneStateEntityId: string\r\n): Promise<DeviceEntities> {\r\n  console.log(\r\n    \"[EntityDiscovery] Discovering entities from:\",\r\n    phoneStateEntityId\r\n  );\r\n\r\n  // Get the device ID from the phone_state entity\r\n  const deviceId = await getDeviceIdFromEntity(hass, phoneStateEntityId);\r\n  if (!deviceId) {\r\n    console.error(\r\n      \"[EntityDiscovery] Could not find device ID for entity:\",\r\n      phoneStateEntityId\r\n    );\r\n    return {\r\n      phoneState: phoneStateEntityId,\r\n      currentDialingNumber: null,\r\n      callHistory: null,\r\n      currentCallNumber: null,\r\n    };\r\n  }\r\n\r\n  console.log(\"[EntityDiscovery] Found device ID:\", deviceId);\r\n\r\n  // Get all entities for this device\r\n  const allEntityIds = await getDeviceEntities(hass, deviceId);\r\n  console.log(\r\n    \"[EntityDiscovery] Device has\",\r\n    allEntityIds.length,\r\n    \"entities:\",\r\n    allEntityIds\r\n  );\r\n\r\n  // Find specific entities by matching patterns in entity_id\r\n  const result: DeviceEntities = {\r\n    phoneState: phoneStateEntityId,\r\n    currentDialingNumber:\r\n      allEntityIds.find((id) => id.includes(\"current_dialing_number\")) || null,\r\n    callHistory: allEntityIds.find((id) => id.includes(\"call_history\")) || null,\r\n    currentCallNumber:\r\n      allEntityIds.find((id) => id.includes(\"current_call_number\")) || null,\r\n  };\r\n\r\n  console.log(\"[EntityDiscovery] Discovered entities:\", result);\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Cache for discovered entities to avoid repeated WebSocket calls\r\n */\r\nconst entityCache = new Map<string, DeviceEntities>();\r\n\r\n/**\r\n * Get discovered entities with caching\r\n */\r\nexport async function getCachedTsuryPhoneEntities(\r\n  hass: HomeAssistant,\r\n  phoneStateEntityId: string\r\n): Promise<DeviceEntities> {\r\n  if (entityCache.has(phoneStateEntityId)) {\r\n    return entityCache.get(phoneStateEntityId)!;\r\n  }\r\n\r\n  const entities = await discoverTsuryPhoneEntities(hass, phoneStateEntityId);\r\n  entityCache.set(phoneStateEntityId, entities);\r\n  return entities;\r\n}\r\n\r\n/**\r\n * Clear the cache (call this if devices are added/removed)\r\n */\r\nexport function clearEntityCache(): void {\r\n  entityCache.clear();\r\n}\r\n","/**\r\n * Haptic Feedback Utility\r\n * Uses Home Assistant Companion app's haptic feedback system\r\n * https://companion.home-assistant.io/docs/integrations/haptics/\r\n */\r\n\r\n/**\r\n * Haptic types supported by Home Assistant Companion apps\r\n * - success: Task or action completed successfully\r\n * - warning: Task produced a warning\r\n * - failure: Task or action failed\r\n * - light: Light physical feedback\r\n * - medium: Medium physical feedback\r\n * - heavy: Heavy physical feedback\r\n * - selection: Selection is actively changing\r\n */\r\nexport type HapticType =\r\n  | \"success\"\r\n  | \"warning\"\r\n  | \"failure\"\r\n  | \"light\"\r\n  | \"medium\"\r\n  | \"heavy\"\r\n  | \"selection\";\r\n\r\n/**\r\n * Trigger haptic feedback using Home Assistant Companion app\r\n * Falls back to vibration API if not in HA app\r\n */\r\nexport function triggerHaptic(type: HapticType = \"light\"): void {\r\n  // Fire haptic event for Home Assistant Companion app\r\n  window.dispatchEvent(\r\n    new CustomEvent(\"haptic\", {\r\n      detail: type,\r\n    })\r\n  );\r\n\r\n  // Fallback to vibration API for browsers without HA Companion app\r\n  if (\"vibrate\" in navigator) {\r\n    const fallbackPatterns: Record<HapticType, number | number[]> = {\r\n      success: 50,\r\n      warning: [30, 10, 30],\r\n      failure: [50, 10, 50, 10, 50],\r\n      light: 10,\r\n      medium: 20,\r\n      heavy: 30,\r\n      selection: 5,\r\n    };\r\n\r\n    const pattern = fallbackPatterns[type];\r\n    navigator.vibrate(pattern);\r\n  }\r\n}\r\n\r\n/**\r\n * Check if haptic feedback is supported\r\n */\r\nexport function isHapticSupported(): boolean {\r\n  // Haptics are always supported via HA Companion app events\r\n  // or via vibration API fallback\r\n  return true;\r\n}\r\n","/**\r\n * Dialed Number Display Component\r\n * Shows the currently dialed number with backspace functionality\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\n\r\n@customElement('tsuryphone-dialed-number-display')\r\nexport class TsuryPhoneDialedNumberDisplay extends LitElement {\r\n  @property({ type: String }) dialedNumber = '';\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return css`\r\n      :host {\r\n        display: block;\r\n      }\r\n\r\n      .display-container {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        min-height: 64px;\r\n        padding: 12px 16px;\r\n        background: var(--card-background-color);\r\n        border-bottom: 2px solid var(--divider-color);\r\n      }\r\n\r\n      .number-display {\r\n        flex: 1;\r\n        font-size: 32px;\r\n        font-weight: 300;\r\n        color: var(--primary-text-color);\r\n        letter-spacing: 2px;\r\n        text-align: center;\r\n        min-height: 40px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        user-select: none;\r\n      }\r\n\r\n      .number-display.empty {\r\n        color: var(--secondary-text-color);\r\n        font-size: 18px;\r\n        font-weight: 400;\r\n        letter-spacing: normal;\r\n      }\r\n\r\n      .backspace-button {\r\n        width: 40px;\r\n        height: 40px;\r\n        border: none;\r\n        background: transparent;\r\n        cursor: pointer;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        transition: background 0.2s;\r\n        flex-shrink: 0;\r\n      }\r\n\r\n      .backspace-button:hover {\r\n        background: var(--secondary-background-color);\r\n      }\r\n\r\n      .backspace-button:active {\r\n        background: var(--divider-color);\r\n      }\r\n\r\n      .backspace-button:disabled {\r\n        opacity: 0.3;\r\n        cursor: not-allowed;\r\n      }\r\n\r\n      .backspace-button:disabled:hover {\r\n        background: transparent;\r\n      }\r\n\r\n      .backspace-icon {\r\n        width: 24px;\r\n        height: 24px;\r\n        fill: var(--primary-text-color);\r\n      }\r\n\r\n      .placeholder {\r\n        opacity: 0.5;\r\n      }\r\n    `;\r\n  }\r\n\r\n  private _handleBackspace(): void {\r\n    this.dispatchEvent(new CustomEvent('backspace', { bubbles: true, composed: true }));\r\n  }\r\n\r\n  private _handleLongPress(): void {\r\n    // Long press on backspace clears all\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true, composed: true }));\r\n  }\r\n\r\n  private _formatDialedNumber(number: string): string {\r\n    if (!number) return '';\r\n\r\n    // Format the number with spaces for readability\r\n    // Simple formatting: add space every 3 digits (can be enhanced)\r\n    let formatted = '';\r\n    for (let i = 0; i < number.length; i++) {\r\n      if (i > 0 && i % 3 === 0) {\r\n        formatted += ' ';\r\n      }\r\n      formatted += number[i];\r\n    }\r\n    return formatted;\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    const hasNumber = this.dialedNumber.length > 0;\r\n    const formattedNumber = this._formatDialedNumber(this.dialedNumber);\r\n\r\n    return html`\r\n      <div class=\"display-container\">\r\n        <div class=\"number-display ${!hasNumber ? 'empty' : ''}\">\r\n          ${hasNumber\r\n            ? formattedNumber\r\n            : html`<span class=\"placeholder\">Enter number</span>`}\r\n        </div>\r\n        <button\r\n          class=\"backspace-button\"\r\n          @click=${this._handleBackspace}\r\n          @contextmenu=${(e: Event) => {\r\n            e.preventDefault();\r\n            this._handleLongPress();\r\n          }}\r\n          ?disabled=${!hasNumber}\r\n          aria-label=\"Backspace\"\r\n          title=\"Click to delete, right-click to clear all\"\r\n        >\r\n          <svg class=\"backspace-icon\" viewBox=\"0 0 24 24\">\r\n            <path d=\"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7.07L2.4 12l4.66-7H22v14zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'tsuryphone-dialed-number-display': TsuryPhoneDialedNumberDisplay;\r\n  }\r\n}\r\n","/**\r\n * Keypad Grid Component\r\n * 3x4 grid of number buttons with *, 0, # on bottom row\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from 'lit';\r\nimport { customElement, state } from 'lit/decorators.js';\r\nimport { triggerHaptic } from '../../utils/haptics';\r\n\r\ninterface KeypadButton {\r\n  digit: string;\r\n  letters?: string;\r\n  longPressDigit?: string;\r\n}\r\n\r\n@customElement('tsuryphone-keypad-grid')\r\nexport class TsuryPhoneKeypadGrid extends LitElement {\r\n  private _longPressTimer: number | null = null;\r\n  private _longPressTriggered = false;\r\n  \r\n  @state() private _pressedButton: string | null = null;\r\n\r\n  private readonly _buttons: KeypadButton[] = [\r\n    { digit: '1', letters: '' },\r\n    { digit: '2', letters: 'ABC' },\r\n    { digit: '3', letters: 'DEF' },\r\n    { digit: '4', letters: 'GHI' },\r\n    { digit: '5', letters: 'JKL' },\r\n    { digit: '6', letters: 'MNO' },\r\n    { digit: '7', letters: 'PQRS' },\r\n    { digit: '8', letters: 'TUV' },\r\n    { digit: '9', letters: 'WXYZ' },\r\n    { digit: '*', letters: '' },\r\n    { digit: '0', letters: '+', longPressDigit: '+' },\r\n    { digit: '#', letters: '' },\r\n  ];\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return css`\r\n      :host {\r\n        display: block;\r\n      }\r\n\r\n      .keypad-grid {\r\n        display: grid;\r\n        grid-template-columns: repeat(3, 1fr);\r\n        gap: 12px;\r\n        max-width: 320px;\r\n        margin: 0 auto;\r\n        padding: 16px;\r\n      }\r\n\r\n      .keypad-button {\r\n        aspect-ratio: 1;\r\n        border: none;\r\n        background: var(--card-background-color);\r\n        border-radius: 50%;\r\n        cursor: pointer;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 28px;\r\n        font-weight: 300;\r\n        color: var(--primary-text-color);\r\n        transition: background 0.15s, transform 0.1s;\r\n        box-shadow: var(--ha-card-box-shadow, 0 2px 4px rgba(0, 0, 0, 0.1));\r\n        user-select: none;\r\n        -webkit-tap-highlight-color: transparent;\r\n        position: relative;\r\n        min-height: 72px;\r\n      }\r\n\r\n      .keypad-button:hover {\r\n        background: var(--secondary-background-color);\r\n      }\r\n\r\n      .keypad-button.pressed {\r\n        transform: scale(0.95);\r\n        background: var(--divider-color);\r\n      }\r\n\r\n      .keypad-button.long-press-active {\r\n        background: var(--primary-color);\r\n        color: var(--text-primary-color);\r\n      }\r\n\r\n      .digit {\r\n        font-size: 32px;\r\n        font-weight: 400;\r\n        line-height: 1;\r\n      }\r\n\r\n      .letters {\r\n        font-size: 10px;\r\n        font-weight: 500;\r\n        letter-spacing: 1px;\r\n        margin-top: 4px;\r\n        opacity: 0.6;\r\n        text-transform: uppercase;\r\n        height: 14px;\r\n        line-height: 14px;\r\n      }\r\n\r\n      .letters-placeholder {\r\n        height: 14px;\r\n        margin-top: 4px;\r\n      }\r\n\r\n      .long-press-hint {\r\n        position: absolute;\r\n        top: 4px;\r\n        right: 4px;\r\n        font-size: 12px;\r\n        opacity: 0.5;\r\n      }\r\n\r\n      @media (max-width: 400px) {\r\n        .keypad-grid {\r\n          gap: 8px;\r\n          padding: 12px;\r\n        }\r\n\r\n        .keypad-button {\r\n          min-height: 64px;\r\n        }\r\n\r\n        .digit {\r\n          font-size: 28px;\r\n        }\r\n      }\r\n    `;\r\n  }\r\n\r\n  private _handlePointerDown(button: KeypadButton): void {\r\n    this._longPressTriggered = false;\r\n    this._pressedButton = button.digit;\r\n\r\n    // Start long press timer if button supports it\r\n    if (button.longPressDigit) {\r\n      this._longPressTimer = window.setTimeout(() => {\r\n        this._longPressTriggered = true;\r\n        this._emitDigit(button.longPressDigit!);\r\n        triggerHaptic('selection');\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  private _handlePointerUp(button: KeypadButton): void {\r\n    // Clear pressed state\r\n    this._pressedButton = null;\r\n    \r\n    // Clear long press timer\r\n    if (this._longPressTimer) {\r\n      clearTimeout(this._longPressTimer);\r\n      this._longPressTimer = null;\r\n    }\r\n\r\n    // If long press was triggered, don't emit the regular digit\r\n    if (this._longPressTriggered) {\r\n      this._longPressTriggered = false;\r\n      return;\r\n    }\r\n\r\n    // Emit the regular digit\r\n    this._emitDigit(button.digit);\r\n    triggerHaptic('selection');\r\n  }\r\n\r\n  private _handlePointerCancel(): void {\r\n    // Clear pressed state\r\n    this._pressedButton = null;\r\n    \r\n    // Clear long press timer if pointer is cancelled (e.g., scrolling)\r\n    if (this._longPressTimer) {\r\n      clearTimeout(this._longPressTimer);\r\n      this._longPressTimer = null;\r\n    }\r\n    this._longPressTriggered = false;\r\n  }\r\n\r\n  private _emitDigit(digit: string): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('digit-press', {\r\n        detail: { digit },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    return html`\r\n      <div class=\"keypad-grid\">\r\n        ${this._buttons.map(\r\n          (button) => html`\r\n            <button\r\n              class=\"keypad-button ${this._pressedButton === button.digit ? 'pressed' : ''}\"\r\n              @pointerdown=${() => this._handlePointerDown(button)}\r\n              @pointerup=${() => this._handlePointerUp(button)}\r\n              @pointercancel=${() => this._handlePointerCancel()}\r\n              aria-label=\"${button.digit}${button.letters ? ` ${button.letters}` : ''}\"\r\n              title=\"${button.longPressDigit ? `Long press for ${button.longPressDigit}` : ''}\"\r\n            >\r\n              <span class=\"digit\">${button.digit}</span>\r\n              ${button.letters\r\n                ? html`<span class=\"letters\">${button.letters}</span>`\r\n                : html`<span class=\"letters-placeholder\"></span>`}\r\n              ${button.longPressDigit && button.longPressDigit !== button.letters\r\n                ? html`<span class=\"long-press-hint\">${button.longPressDigit}</span>`\r\n                : ''}\r\n            </button>\r\n          `\r\n        )}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'tsuryphone-keypad-grid': TsuryPhoneKeypadGrid;\r\n  }\r\n}\r\n","/**\r\n * Keypad View Component\r\n * Main container for the dialing keypad\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"../../types/homeassistant\";\r\nimport { TsuryPhoneCardConfig } from \"../../types/tsuryphone\";\r\nimport {\r\n  getCachedTsuryPhoneEntities,\r\n  DeviceEntities,\r\n} from \"../../utils/entity-discovery\";\r\nimport { triggerHaptic } from \"../../utils/haptics\";\r\nimport \"./dialed-number-display\";\r\nimport \"./keypad-grid\";\r\n\r\n@customElement(\"tsuryphone-keypad-view\")\r\nexport class TsuryPhoneKeypadView extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ attribute: false }) config!: TsuryPhoneCardConfig;\r\n\r\n  // Discovered entities (populated asynchronously)\r\n  @state() private _entities: DeviceEntities | null = null;\r\n\r\n  protected async firstUpdated(): Promise<void> {\r\n    // Discover all entities from the device on first load\r\n    const phoneStateEntityId = this._getPhoneStateEntityId();\r\n    this._entities = await getCachedTsuryPhoneEntities(\r\n      this.hass,\r\n      phoneStateEntityId\r\n    );\r\n    console.log(\"[KeypadView] Entities discovered:\", this._entities);\r\n    this.requestUpdate(); // Trigger re-render with discovered entities\r\n  }\r\n\r\n  protected shouldUpdate(changedProps: Map<string, any>): boolean {\r\n    if (changedProps.has(\"hass\") && this._entities?.currentDialingNumber) {\r\n      const oldHass = changedProps.get(\"hass\") as HomeAssistant;\r\n      if (oldHass) {\r\n        const entityId = this._entities.currentDialingNumber;\r\n        const oldState = oldHass.states[entityId]?.state;\r\n        const newState = this.hass.states[entityId]?.state;\r\n\r\n        console.log(\"[KeypadView] shouldUpdate check:\", {\r\n          entityId,\r\n          oldState,\r\n          newState,\r\n          changed: oldState !== newState,\r\n        });\r\n\r\n        // Force update if the dialing number changed\r\n        if (oldState !== newState) {\r\n          console.log(\"[KeypadView] Forcing update due to state change\");\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return super.shouldUpdate(changedProps);\r\n  }\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return css`\r\n      :host {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100%;\r\n        background: var(--card-background-color);\r\n        padding: 16px;\r\n        box-sizing: border-box;\r\n      }\r\n\r\n      .keypad-container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        height: 100%;\r\n        max-width: 400px;\r\n        margin: 0 auto;\r\n        width: 100%;\r\n      }\r\n\r\n      .display-section {\r\n        flex: 0 0 auto;\r\n        margin-bottom: 24px;\r\n      }\r\n\r\n      .keypad-section {\r\n        flex: 1 1 auto;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n      }\r\n\r\n      .call-button-section {\r\n        flex: 0 0 auto;\r\n        margin-top: 24px;\r\n        padding: 0 16px;\r\n      }\r\n\r\n      .call-button {\r\n        width: 64px;\r\n        height: 64px;\r\n        border-radius: 50%;\r\n        background: var(--success-color);\r\n        border: none;\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin: 0 auto;\r\n        transition:\r\n          transform 0.1s,\r\n          box-shadow 0.2s;\r\n        box-shadow: var(--ha-card-box-shadow, 0 2px 8px rgba(0, 0, 0, 0.2));\r\n      }\r\n\r\n      .call-button:hover {\r\n        transform: scale(1.05);\r\n        filter: brightness(1.1);\r\n      }\r\n\r\n      .call-button:active {\r\n        transform: scale(0.95);\r\n      }\r\n\r\n      .call-button:disabled {\r\n        background: var(--disabled-color);\r\n        opacity: 0.5;\r\n        cursor: not-allowed;\r\n        box-shadow: none;\r\n      }\r\n\r\n      .call-button:disabled:hover {\r\n        transform: none;\r\n        filter: none;\r\n      }\r\n\r\n      .call-icon {\r\n        width: 32px;\r\n        height: 32px;\r\n        fill: var(--text-primary-color, white);\r\n      }\r\n    `;\r\n  }\r\n\r\n  private async _handleDigitPress(digit: string): Promise<void> {\r\n    triggerHaptic(\"selection\");\r\n\r\n    console.log(\r\n      \"[KeypadView] Dialing digit:\",\r\n      digit,\r\n      \"to entity:\",\r\n      this._getPhoneStateEntityId()\r\n    );\r\n\r\n    try {\r\n      // Send digit to backend - no optimistic update\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"dial_digit\",\r\n        {\r\n          digit: parseInt(digit, 10),\r\n        },\r\n        {\r\n          entity_id: this._getPhoneStateEntityId(),\r\n        }\r\n      );\r\n      console.log(\"[KeypadView] Digit dialed successfully\");\r\n    } catch (error) {\r\n      console.error(\"Failed to dial digit:\", error);\r\n      triggerHaptic(\"failure\");\r\n    }\r\n  }\r\n\r\n  private async _handleBackspace(): Promise<void> {\r\n    const currentNumber = this._getCurrentDialingNumber();\r\n    if (!currentNumber) return;\r\n\r\n    try {\r\n      // Request delete from backend - no optimistic update\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"delete_last_digit\",\r\n        {},\r\n        {\r\n          entity_id: this._getPhoneStateEntityId(),\r\n        }\r\n      );\r\n\r\n      triggerHaptic(\"selection\");\r\n    } catch (err) {\r\n      console.error(\"Failed to delete last digit:\", err);\r\n      triggerHaptic(\"failure\");\r\n    }\r\n  }\r\n\r\n  private _handleClear(): void {\r\n    // Clear is just deleting all digits - let user delete one by one\r\n    triggerHaptic(\"selection\");\r\n  }\r\n\r\n  private async _handleCall(): Promise<void> {\r\n    if (!this._canCall()) return;\r\n\r\n    const numberToDial =\r\n      this._getCurrentDialingNumber() || this._getLastCalledNumber();\r\n    if (!numberToDial) return;\r\n\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      // Call the dial service\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"dial\",\r\n        {\r\n          number: numberToDial,\r\n        },\r\n        {\r\n          entity_id: this._getPhoneStateEntityId(),\r\n        }\r\n      );\r\n\r\n      // The backend will clear the dialing number after successful dial\r\n    } catch (error) {\r\n      console.error(\"Failed to dial number:\", error);\r\n      triggerHaptic(\"failure\");\r\n    }\r\n  }\r\n\r\n  private _canCall(): boolean {\r\n    // Can call if we have a dialed number OR we have call history to redial\r\n    return !!this._getCurrentDialingNumber() || !!this._getLastCalledNumber();\r\n  }\r\n\r\n  private _getCurrentDialingNumber(): string {\r\n    // Use discovered entity if available\r\n    if (!this._entities?.currentDialingNumber) {\r\n      console.log(\r\n        \"[KeypadView] _getCurrentDialingNumber: Entity not yet discovered\"\r\n      );\r\n      return \"\";\r\n    }\r\n\r\n    const entityId = this._entities.currentDialingNumber;\r\n    const entity = this.hass?.states[entityId];\r\n    const result =\r\n      entity?.state && entity.state !== \"unknown\" ? entity.state : \"\";\r\n\r\n    console.log(\"[KeypadView] _getCurrentDialingNumber:\", {\r\n      entityId,\r\n      entityState: entity?.state,\r\n      result,\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  private _getPhoneStateEntityId(): string {\r\n    const deviceId = this.config?.device_id || \"tsuryphone\";\r\n\r\n    if (this.config?.entity) {\r\n      return this.config.entity.startsWith(\"sensor.\")\r\n        ? this.config.entity\r\n        : `sensor.${this.config.entity}`;\r\n    }\r\n\r\n    return `sensor.${deviceId}_phone_state`;\r\n  }\r\n\r\n  private _getLastCalledNumber(): string | null {\r\n    const phoneStateEntityId = this._getPhoneStateEntityId();\r\n    const phoneState = this.hass?.states[phoneStateEntityId];\r\n    const callHistory = phoneState?.attributes?.call_log || [];\r\n\r\n    if (callHistory.length === 0) return null;\r\n\r\n    // Get the most recent call\r\n    const lastCall = callHistory[0];\r\n    return lastCall.number || null;\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    const dialedNumber = this._getCurrentDialingNumber();\r\n\r\n    return html`\r\n      <div class=\"keypad-container\">\r\n        <div class=\"display-section\">\r\n          <tsuryphone-dialed-number-display\r\n            .dialedNumber=${dialedNumber}\r\n            @backspace=${this._handleBackspace}\r\n            @clear=${this._handleClear}\r\n          ></tsuryphone-dialed-number-display>\r\n        </div>\r\n\r\n        <div class=\"keypad-section\">\r\n          <tsuryphone-keypad-grid\r\n            @digit-press=${(e: CustomEvent) =>\r\n              this._handleDigitPress(e.detail.digit)}\r\n          ></tsuryphone-keypad-grid>\r\n        </div>\r\n\r\n        <div class=\"call-button-section\">\r\n          <button\r\n            class=\"call-button\"\r\n            @click=${this._handleCall}\r\n            ?disabled=${!this._canCall()}\r\n            aria-label=\"Call\"\r\n          >\r\n            <svg class=\"call-icon\" viewBox=\"0 0 24 24\">\r\n              <path\r\n                d=\"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-keypad-view\": TsuryPhoneKeypadView;\r\n  }\r\n}\r\n","/**\r\n * Avatar Circle Component\r\n * Reusable avatar with letter and color\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { generateColor, getAvatarLetter } from \"../../utils/formatters\";\r\nimport { avatarStyles } from \"../../styles/shared-styles\";\r\n\r\n@customElement(\"tsuryphone-avatar\")\r\nexport class TsuryPhoneAvatar extends LitElement {\r\n  @property({ type: String }) name = \"\";\r\n  @property({ type: String }) size: \"small\" | \"medium\" | \"large\" = \"medium\";\r\n  @property({ type: String }) color?: string;\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      avatarStyles,\r\n      css`\r\n        :host {\r\n          display: inline-block;\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n\r\n  protected render() {\r\n    const letter = getAvatarLetter(this.name);\r\n    const backgroundColor = this.color || generateColor(this.name);\r\n    const sizeClass = this.size === \"medium\" ? \"\" : this.size;\r\n\r\n    return html`\r\n      <div\r\n        class=\"avatar ${sizeClass}\"\r\n        style=\"background-color: ${backgroundColor}\"\r\n      >\r\n        ${letter}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-avatar\": TsuryPhoneAvatar;\r\n  }\r\n}\r\n","/**\r\n * Contact Item Component\r\n * Individual contact list item\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"../../types/homeassistant\";\r\nimport { TsuryPhoneCardConfig, QuickDialEntry } from \"../../types/tsuryphone\";\r\nimport { normalizePhoneNumberForDisplay } from \"../../utils/formatters\";\r\nimport { triggerHaptic } from \"../../utils/haptics\";\r\nimport { listItemStyles, buttonStyles } from \"../../styles/shared-styles\";\r\nimport \"../shared/avatar\";\r\n\r\n@customElement(\"tsuryphone-contact-item\")\r\nexport class TsuryPhoneContactItem extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ attribute: false }) config!: TsuryPhoneCardConfig;\r\n  @property({ attribute: false }) contact!: QuickDialEntry;\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      listItemStyles,\r\n      buttonStyles,\r\n      css`\r\n        :host {\r\n          display: block;\r\n        }\r\n\r\n        .contact-info {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n\r\n        .avatar-container {\r\n          position: relative;\r\n        }\r\n\r\n        .priority-badge {\r\n          position: absolute;\r\n          top: -4px;\r\n          right: -4px;\r\n          width: 20px;\r\n          height: 20px;\r\n          border-radius: 50%;\r\n          background: var(--warning-color);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          box-shadow: var(--ha-card-box-shadow, 0 2px 4px rgba(0, 0, 0, 0.2));\r\n        }\r\n\r\n        .priority-badge ha-icon {\r\n          --mdc-icon-size: 14px;\r\n          color: var(--text-primary-color, white);\r\n        }\r\n\r\n        .contact-details {\r\n          flex: 1;\r\n          min-width: 0;\r\n        }\r\n\r\n        .contact-name {\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n          color: var(--primary-text-color);\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n\r\n        .contact-number {\r\n          font-size: 14px;\r\n          color: var(--secondary-text-color);\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n\r\n        .contact-actions {\r\n          display: flex;\r\n          gap: 8px;\r\n        }\r\n\r\n        .call-button {\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 50%;\r\n          border: none;\r\n          background: var(--primary-color);\r\n          color: var(--text-primary-color, white);\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all 0.2s;\r\n        }\r\n\r\n        .call-button:hover {\r\n          background: var(--dark-primary-color, var(--primary-color));\r\n          transform: scale(1.05);\r\n        }\r\n\r\n        .call-button:active {\r\n          transform: scale(0.95);\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n\r\n  private _getPhoneStateEntityId(): string {\r\n    const deviceId = this.config?.device_id || \"tsuryphone\";\r\n\r\n    if (this.config?.entity) {\r\n      return this.config.entity.startsWith(\"sensor.\")\r\n        ? this.config.entity\r\n        : `sensor.${this.config.entity}`;\r\n    }\r\n\r\n    return `sensor.${deviceId}_phone_state`;\r\n  }\r\n\r\n  private async _handleCall(): Promise<void> {\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"dial\",\r\n        {\r\n          number: this.contact.number,\r\n        },\r\n        {\r\n          entity_id: this._getPhoneStateEntityId(),\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.error(\"[ContactItem] Failed to dial:\", error);\r\n    }\r\n  }\r\n\r\n  private _handleEdit(): void {\r\n    triggerHaptic(\"selection\");\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"edit-contact\", {\r\n        detail: { contact: this.contact },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    // Get default dial code from phone state\r\n    const phoneState = this.hass?.states[this._getPhoneStateEntityId()];\r\n    const defaultDialCode = (phoneState?.attributes as any)?.dialing_context?.default_code || \"\";\r\n    \r\n    const formattedNumber = normalizePhoneNumberForDisplay(\r\n      this.contact.display_number || this.contact.number,\r\n      defaultDialCode\r\n    );\r\n\r\n    // Check if contact is priority by looking in priority_callers list\r\n    const priorityCallers = phoneState?.attributes?.priority_callers || [];\r\n    const isPriority = priorityCallers.some(\r\n      (p: any) => p.number === this.contact.number // Both are normalized E.164 format\r\n    );\r\n\r\n    return html`\r\n      <div class=\"list-item\" @click=${this._handleEdit}>\r\n        <div class=\"contact-info\">\r\n          <div class=\"avatar-container\">\r\n            <tsuryphone-avatar .name=${this.contact.name}></tsuryphone-avatar>\r\n            ${isPriority\r\n              ? html`\r\n                  <div class=\"priority-badge\">\r\n                    <ha-icon icon=\"mdi:star\"></ha-icon>\r\n                  </div>\r\n                `\r\n              : \"\"}\r\n          </div>\r\n          <div class=\"contact-details\">\r\n            <div class=\"contact-name\">\r\n              ${this.contact.name}\r\n            </div>\r\n            <div class=\"contact-number\">${formattedNumber}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"contact-actions\">\r\n          <button\r\n            class=\"call-button\"\r\n            @click=${(e: Event) => {\r\n              e.stopPropagation();\r\n              this._handleCall();\r\n            }}\r\n            title=\"Call ${this.contact.name}\"\r\n          >\r\n            <ha-icon icon=\"mdi:phone\"></ha-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-contact-item\": TsuryPhoneContactItem;\r\n  }\r\n}\r\n","/**\r\n * Contacts View Component\r\n * Main container for contacts management\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"../../types/homeassistant\";\r\nimport { TsuryPhoneCardConfig, QuickDialEntry } from \"../../types/tsuryphone\";\r\nimport \"../shared/empty-state\";\r\nimport \"./contact-item\";\r\n\r\n@customElement(\"tsuryphone-contacts-view\")\r\nexport class TsuryPhoneContactsView extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ attribute: false }) config!: TsuryPhoneCardConfig;\r\n\r\n  @state() private _searchQuery = \"\";\r\n  @state() private _showAddModal = false;\r\n  @state() private _showMenu = false;\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return css`\r\n      :host {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100%;\r\n        background: var(--card-background-color);\r\n      }\r\n\r\n      .contacts-header {\r\n        padding: 16px;\r\n        border-bottom: 1px solid var(--divider-color);\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 12px;\r\n        position: sticky;\r\n        top: 0;\r\n        background: var(--card-background-color);\r\n        z-index: 2;\r\n      }\r\n\r\n      .search-bar {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n        padding: 8px 12px;\r\n        background: var(--secondary-background-color);\r\n        border-radius: 8px;\r\n        flex: 1;\r\n      }\r\n\r\n      .search-bar-container {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n      }\r\n\r\n      .menu-button {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 50%;\r\n        border: none;\r\n        background: transparent;\r\n        color: var(--primary-text-color);\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        transition: background 0.2s;\r\n        position: relative;\r\n      }\r\n\r\n      .menu-button:hover {\r\n        background: var(--secondary-background-color);\r\n      }\r\n\r\n      .menu-button:active {\r\n        transform: scale(0.95);\r\n      }\r\n\r\n      .menu-dropdown {\r\n        position: absolute;\r\n        top: 48px;\r\n        right: 16px;\r\n        background: var(--card-background-color);\r\n        border-radius: 8px;\r\n        box-shadow: var(\r\n          --ha-card-box-shadow,\r\n          0 4px 12px rgba(0, 0, 0, 0.15)\r\n        );\r\n        min-width: 160px;\r\n        z-index: 10;\r\n        overflow: hidden;\r\n      }\r\n\r\n      .menu-item {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n        padding: 12px 16px;\r\n        border: none;\r\n        background: transparent;\r\n        width: 100%;\r\n        text-align: left;\r\n        cursor: pointer;\r\n        color: var(--primary-text-color);\r\n        font-size: 14px;\r\n        transition: background 0.2s;\r\n      }\r\n\r\n      .menu-item:hover {\r\n        background: var(--secondary-background-color);\r\n      }\r\n\r\n      .menu-item:active {\r\n        background: var(--divider-color);\r\n      }\r\n\r\n      .search-input {\r\n        flex: 1;\r\n        border: none;\r\n        background: transparent;\r\n        font-size: 16px;\r\n        color: var(--primary-text-color);\r\n        outline: none;\r\n      }\r\n\r\n      .search-input::placeholder {\r\n        color: var(--secondary-text-color);\r\n      }\r\n\r\n      .add-button {\r\n        width: 100%;\r\n        padding: 12px;\r\n        border-radius: 8px;\r\n        border: none;\r\n        background: var(--primary-color);\r\n        color: var(--text-primary-color, white);\r\n        font-size: 16px;\r\n        font-weight: 500;\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        gap: 8px;\r\n        transition: all 0.2s;\r\n      }\r\n\r\n      .add-button:hover {\r\n        background: var(--dark-primary-color, var(--primary-color));\r\n      }\r\n\r\n      .add-button:active {\r\n        transform: scale(0.98);\r\n      }\r\n\r\n      .contacts-list {\r\n        flex: 1;\r\n        overflow-y: auto;\r\n      }\r\n\r\n      .section-header {\r\n        padding: 12px 16px;\r\n        background: var(--secondary-background-color);\r\n        font-size: 14px;\r\n        font-weight: 500;\r\n        color: var(--secondary-text-color);\r\n        position: sticky;\r\n        top: 0;\r\n        z-index: 1;\r\n      }\r\n    `;\r\n  }\r\n\r\n  private _getContacts(): QuickDialEntry[] {\r\n    const phoneStateEntityId = this._getPhoneStateEntityId();\r\n    const phoneState = this.hass?.states[phoneStateEntityId];\r\n    const contacts = phoneState?.attributes?.quick_dials || [];\r\n\r\n    return contacts;\r\n  }\r\n\r\n  private _getFilteredContacts(): QuickDialEntry[] {\r\n    const contacts = this._getContacts();\r\n\r\n    if (!this._searchQuery.trim()) {\r\n      return contacts;\r\n    }\r\n\r\n    const query = this._searchQuery.toLowerCase();\r\n    return contacts.filter(\r\n      (contact) =>\r\n        contact.name?.toLowerCase().includes(query) ||\r\n        contact.number?.toLowerCase().includes(query) ||\r\n        contact.code?.toLowerCase().includes(query)\r\n    );\r\n  }\r\n\r\n  private _groupContactsByLetter(): Map<string, QuickDialEntry[]> {\r\n    const contacts = this._getFilteredContacts();\r\n    const grouped = new Map<string, QuickDialEntry[]>();\r\n\r\n    contacts.forEach((contact) => {\r\n      const firstLetter = (contact.name?.[0] || \"#\").toUpperCase();\r\n      if (!grouped.has(firstLetter)) {\r\n        grouped.set(firstLetter, []);\r\n      }\r\n      grouped.get(firstLetter)!.push(contact);\r\n    });\r\n\r\n    // Sort groups alphabetically\r\n    return new Map([...grouped.entries()].sort());\r\n  }\r\n\r\n  private _getPhoneStateEntityId(): string {\r\n    const deviceId = this.config?.device_id || \"tsuryphone\";\r\n\r\n    if (this.config?.entity) {\r\n      return this.config.entity.startsWith(\"sensor.\")\r\n        ? this.config.entity\r\n        : `sensor.${this.config.entity}`;\r\n    }\r\n\r\n    return `sensor.${deviceId}_phone_state`;\r\n  }\r\n\r\n  private _handleSearch(e: Event): void {\r\n    const input = e.target as HTMLInputElement;\r\n    this._searchQuery = input.value;\r\n  }\r\n\r\n  private _handleAddContact(): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"action\", {\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  private _toggleMenu(): void {\r\n    this._showMenu = !this._showMenu;\r\n  }\r\n\r\n  private _handleBlockedClick(): void {\r\n    this._showMenu = false;\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"navigate-blocked\", {\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  private _handleClickOutside(e: MouseEvent): void {\r\n    const target = e.target as HTMLElement;\r\n    if (this._showMenu && !target.closest('.menu-button') && !target.closest('.menu-dropdown')) {\r\n      this._showMenu = false;\r\n    }\r\n  }\r\n\r\n  connectedCallback(): void {\r\n    super.connectedCallback();\r\n    document.addEventListener('click', this._handleClickOutside.bind(this));\r\n  }\r\n\r\n  disconnectedCallback(): void {\r\n    super.disconnectedCallback();\r\n    document.removeEventListener('click', this._handleClickOutside.bind(this));\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    const contacts = this._getContacts();\r\n    const groupedContacts = this._groupContactsByLetter();\r\n\r\n    return html`\r\n      <div class=\"contacts-header\">\r\n        <div class=\"search-bar-container\">\r\n          <div class=\"search-bar\">\r\n            <ha-icon icon=\"mdi:magnify\"></ha-icon>\r\n            <input\r\n              class=\"search-input\"\r\n              type=\"text\"\r\n              placeholder=\"Search contacts\"\r\n              .value=${this._searchQuery}\r\n              @input=${this._handleSearch}\r\n            />\r\n            ${this._searchQuery\r\n              ? html`\r\n                  <ha-icon\r\n                    icon=\"mdi:close\"\r\n                    @click=${() => (this._searchQuery = \"\")}\r\n                    style=\"cursor: pointer\"\r\n                  ></ha-icon>\r\n                `\r\n              : \"\"}\r\n          </div>\r\n          <button class=\"menu-button\" @click=${this._toggleMenu} title=\"More options\">\r\n            <ha-icon icon=\"mdi:dots-vertical\"></ha-icon>\r\n          </button>\r\n          ${this._showMenu\r\n            ? html`\r\n                <div class=\"menu-dropdown\">\r\n                  <button class=\"menu-item\" @click=${this._handleBlockedClick}>\r\n                    <ha-icon icon=\"mdi:block-helper\"></ha-icon>\r\n                    Blocked\r\n                  </button>\r\n                </div>\r\n              `\r\n            : \"\"}\r\n        </div>\r\n        <button class=\"add-button\" @click=${this._handleAddContact}>\r\n          <ha-icon icon=\"mdi:plus\"></ha-icon>\r\n          Create contact\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"contacts-list\">\r\n        ${contacts.length === 0\r\n          ? html`\r\n              <tsuryphone-empty-state\r\n                icon=\"mdi:contacts-outline\"\r\n                title=\"No contacts yet\"\r\n                message=\"Add your first contact to get started\"\r\n                actionLabel=\"Create contact\"\r\n                .onAction=${() => this._handleAddContact()}\r\n              ></tsuryphone-empty-state>\r\n            `\r\n          : groupedContacts.size === 0\r\n            ? html`\r\n                <tsuryphone-empty-state\r\n                  icon=\"mdi:magnify\"\r\n                  title=\"No results\"\r\n                  message=\"No contacts match your search\"\r\n                ></tsuryphone-empty-state>\r\n              `\r\n            : Array.from(groupedContacts.entries()).map(\r\n                ([letter, contacts]) => html`\r\n                  <div class=\"section-header\">${letter}</div>\r\n                  ${contacts.map(\r\n                    (contact) => html`\r\n                      <tsuryphone-contact-item\r\n                        .hass=${this.hass}\r\n                        .config=${this.config}\r\n                        .contact=${contact}\r\n                      ></tsuryphone-contact-item>\r\n                    `\r\n                  )}\r\n                `\r\n              )}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-contacts-view\": TsuryPhoneContactsView;\r\n  }\r\n}\r\n","/**\r\n * Blocked Number Item Component\r\n * Displays a single blocked number entry with remove action\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\nimport { BlockedNumberEntry } from '../../types/tsuryphone.d';\r\nimport { haThemeVariables } from '../../styles/theme';\r\n\r\n@customElement('tsuryphone-blocked-item')\r\nexport class TsuryPhoneBlockedItem extends LitElement {\r\n  @property({ attribute: false }) entry!: BlockedNumberEntry;\r\n\r\n  private _handleRemoveClick(): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('remove-blocked', {\r\n        detail: { id: this.entry.id },\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render(): TemplateResult {\r\n    const { name, display_number } = this.entry;\r\n    const displayName = name || 'Unknown';\r\n\r\n    return html`\r\n      <div class=\"blocked-item\">\r\n        <div class=\"blocked-icon\">\r\n          <ha-icon icon=\"mdi:block-helper\"></ha-icon>\r\n        </div>\r\n        <div class=\"blocked-info\">\r\n          <div class=\"blocked-name\">${displayName}</div>\r\n          <div class=\"blocked-number\">${display_number}</div>\r\n        </div>\r\n        <button\r\n          class=\"remove-button\"\r\n          @click=${this._handleRemoveClick}\r\n          aria-label=\"Remove blocked number\"\r\n          title=\"Remove blocked number\"\r\n        >\r\n          <ha-icon icon=\"mdi:delete\"></ha-icon>\r\n        </button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      haThemeVariables,\r\n      css`\r\n        :host {\r\n          display: block;\r\n        }\r\n\r\n        .blocked-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: var(--tsury-spacing-md);\r\n          padding: var(--tsury-spacing-md) var(--tsury-spacing-lg);\r\n          background: var(--tsury-card-background-color);\r\n          border-bottom: 1px solid var(--tsury-divider-color);\r\n          transition: background-color var(--tsury-transition-duration) var(--tsury-transition-timing);\r\n        }\r\n\r\n        .blocked-item:hover {\r\n          background: var(--tsury-hover-background-color);\r\n        }\r\n\r\n        .blocked-icon {\r\n          flex-shrink: 0;\r\n          width: 40px;\r\n          height: 40px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          background: var(--tsury-error-color, #f44336);\r\n          border-radius: 50%;\r\n          color: white;\r\n        }\r\n\r\n        .blocked-icon ha-icon {\r\n          --mdc-icon-size: 20px;\r\n        }\r\n\r\n        .blocked-info {\r\n          flex: 1;\r\n          min-width: 0;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 2px;\r\n        }\r\n\r\n        .blocked-name {\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n          color: var(--tsury-primary-text-color);\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n\r\n        .blocked-number {\r\n          font-size: 14px;\r\n          color: var(--tsury-secondary-text-color);\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          direction: ltr;\r\n        }\r\n\r\n        .remove-button {\r\n          flex-shrink: 0;\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 50%;\r\n          border: none;\r\n          background: transparent;\r\n          color: var(--tsury-error-color, #f44336);\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          transition: all var(--tsury-transition-duration) var(--tsury-transition-timing);\r\n        }\r\n\r\n        .remove-button:hover {\r\n          background: rgba(244, 67, 54, 0.1);\r\n        }\r\n\r\n        .remove-button:active {\r\n          transform: scale(0.95);\r\n        }\r\n\r\n        .remove-button ha-icon {\r\n          --mdc-icon-size: 20px;\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'tsuryphone-blocked-item': TsuryPhoneBlockedItem;\r\n  }\r\n}\r\n","/**\r\n * Blocked View Component\r\n * Displays and manages blocked numbers list\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"../../types/homeassistant\";\r\nimport {\r\n  TsuryPhoneCardConfig,\r\n  BlockedNumberEntry,\r\n} from \"../../types/tsuryphone.d\";\r\nimport { haThemeVariables } from \"../../styles/theme\";\r\nimport \"../shared/empty-state\";\r\nimport \"./blocked-item\";\r\n\r\n@customElement(\"tsuryphone-blocked-view\")\r\nexport class TsuryPhoneBlockedView extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ attribute: false }) config!: TsuryPhoneCardConfig;\r\n  @property({ attribute: false }) blockedNumbers: BlockedNumberEntry[] = [];\r\n\r\n  private _handleAddBlocked(): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"open-block-modal\", {\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  private async _handleRemoveBlocked(e: CustomEvent): Promise<void> {\r\n    const { id } = e.detail;\r\n    const deviceIdPrefix = this.config?.device_id || \"\";\r\n    const phoneStateEntityId = deviceIdPrefix\r\n      ? `sensor.${deviceIdPrefix}_phone_state`\r\n      : `sensor.phone_state`;\r\n\r\n    try {\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"blocked_remove\",\r\n        { id },\r\n        { entity_id: phoneStateEntityId }\r\n      );\r\n    } catch (err) {\r\n      console.error(\"Failed to remove blocked number:\", err);\r\n      // TODO: Show error toast\r\n    }\r\n  }\r\n\r\n  render(): TemplateResult {\r\n    return html`\r\n      <div class=\"blocked-view\">\r\n        <div class=\"blocked-header\">\r\n          <h2 class=\"blocked-title\">Blocked Numbers</h2>\r\n          <button class=\"add-button\" @click=${this._handleAddBlocked}>\r\n            <ha-icon icon=\"mdi:plus\"></ha-icon>\r\n            <span>Block Number</span>\r\n          </button>\r\n        </div>\r\n\r\n        ${this.blockedNumbers.length === 0\r\n          ? this._renderEmptyState()\r\n          : this._renderBlockedList()}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private _renderEmptyState(): TemplateResult {\r\n    return html`\r\n      <tsuryphone-empty-state\r\n        icon=\"mdi:block-helper\"\r\n        title=\"No Blocked Numbers\"\r\n        message=\"Block unwanted callers to prevent them from reaching you.\"\r\n      ></tsuryphone-empty-state>\r\n    `;\r\n  }\r\n\r\n  private _renderBlockedList(): TemplateResult {\r\n    return html`\r\n      <div class=\"blocked-list\">\r\n        ${this.blockedNumbers.map(\r\n          (entry) => html`\r\n            <tsuryphone-blocked-item\r\n              .entry=${entry}\r\n              @remove-blocked=${this._handleRemoveBlocked}\r\n            ></tsuryphone-blocked-item>\r\n          `\r\n        )}\r\n      </div>\r\n      <div class=\"blocked-count\">\r\n        ${this.blockedNumbers.length} blocked\r\n        ${this.blockedNumbers.length === 1 ? \"number\" : \"numbers\"}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      haThemeVariables,\r\n      css`\r\n        :host {\r\n          display: flex;\r\n          flex-direction: column;\r\n          height: 100%;\r\n          background: var(--tsury-card-background-color);\r\n        }\r\n\r\n        .blocked-view {\r\n          display: flex;\r\n          flex-direction: column;\r\n          height: 100%;\r\n        }\r\n\r\n        .blocked-header {\r\n          padding: var(--tsury-spacing-lg);\r\n          border-bottom: 1px solid var(--tsury-divider-color);\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: var(--tsury-spacing-md);\r\n        }\r\n\r\n        .blocked-title {\r\n          margin: 0;\r\n          font-size: 20px;\r\n          font-weight: 600;\r\n          color: var(--tsury-primary-text-color);\r\n        }\r\n\r\n        .add-button {\r\n          width: 100%;\r\n          padding: var(--tsury-spacing-md);\r\n          border-radius: 8px;\r\n          border: none;\r\n          background: var(--tsury-error-color, var(--error-color));\r\n          color: var(--text-primary-color, white);\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          gap: var(--tsury-spacing-sm);\r\n          transition: all var(--tsury-transition-duration)\r\n            var(--tsury-transition-timing);\r\n        }\r\n\r\n        .add-button:hover {\r\n          filter: brightness(0.9);\r\n          transform: translateY(-1px);\r\n          box-shadow: var(--ha-card-box-shadow, 0 2px 8px rgba(0, 0, 0, 0.2));\r\n        }\r\n\r\n        .add-button:active {\r\n          transform: translateY(0);\r\n        }\r\n\r\n        .add-button ha-icon {\r\n          --mdc-icon-size: 20px;\r\n        }\r\n\r\n        .blocked-list {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          -webkit-overflow-scrolling: touch;\r\n        }\r\n\r\n        .blocked-count {\r\n          padding: var(--tsury-spacing-md) var(--tsury-spacing-lg);\r\n          text-align: center;\r\n          font-size: 14px;\r\n          color: var(--tsury-secondary-text-color);\r\n          border-top: 1px solid var(--tsury-divider-color);\r\n          background: var(--tsury-card-background-color);\r\n        }\r\n\r\n        tsuryphone-empty-state {\r\n          flex: 1;\r\n          display: flex;\r\n        }\r\n\r\n        /* Scrollbar styling */\r\n        .blocked-list::-webkit-scrollbar {\r\n          width: 6px;\r\n        }\r\n\r\n        .blocked-list::-webkit-scrollbar-track {\r\n          background: transparent;\r\n        }\r\n\r\n        .blocked-list::-webkit-scrollbar-thumb {\r\n          background: var(--tsury-scrollbar-thumb-color);\r\n          border-radius: 3px;\r\n        }\r\n\r\n        .blocked-list::-webkit-scrollbar-thumb:hover {\r\n          background: var(--tsury-scrollbar-thumb-hover-color);\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-blocked-view\": TsuryPhoneBlockedView;\r\n  }\r\n}\r\n","import { LitElement, html, css, TemplateResult } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"../../types/homeassistant\";\r\nimport { QuickDialEntry } from \"../../types/tsuryphone\";\r\nimport { triggerHaptic } from \"../../utils/haptics\";\r\n\r\ntype ContactModalMode = \"add\" | \"edit\";\r\n\r\ninterface FormData {\r\n  name: string;\r\n  number: string;\r\n  code: string;\r\n  priority: boolean;\r\n}\r\n\r\ninterface ValidationErrors {\r\n  name?: string;\r\n  number?: string;\r\n  code?: string;\r\n}\r\n\r\n@customElement(\"tsuryphone-contact-modal\")\r\nexport class ContactModal extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ type: Boolean, reflect: true }) open = false;\r\n  @property({ type: String }) mode: ContactModalMode = \"add\";\r\n  @property({ attribute: false }) contact?: QuickDialEntry;\r\n\r\n  @state() private formData: FormData = {\r\n    name: \"\",\r\n    number: \"\",\r\n    code: \"\",\r\n    priority: false,\r\n  };\r\n\r\n  @state() private errors: ValidationErrors = {};\r\n  @state() private saving = false;\r\n  @state() private showDeleteConfirm = false;\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: none;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      z-index: 100;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    :host([open]) {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n\r\n    .modal {\r\n      display: flex;\r\n      flex-direction: column;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: var(--card-background-color);\r\n      padding: 24px;\r\n      overflow-y: auto;\r\n      animation: slideUp 0.3s ease-out;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    @keyframes slideUp {\r\n      from {\r\n        transform: translateY(100%);\r\n      }\r\n      to {\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n\r\n    .header {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      margin-bottom: 24px;\r\n    }\r\n\r\n    .title {\r\n      font-size: 24px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n      margin: 0;\r\n    }\r\n\r\n    .close-button {\r\n      width: 40px;\r\n      height: 40px;\r\n      border-radius: 50%;\r\n      border: none;\r\n      background: transparent;\r\n      color: var(--primary-text-color);\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      transition: background-color 0.2s;\r\n    }\r\n\r\n    .close-button:hover {\r\n      background-color: var(--secondary-background-color);\r\n    }\r\n\r\n    .close-button ha-icon {\r\n      --mdc-icon-size: 24px;\r\n    }\r\n\r\n    .form {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n    }\r\n\r\n    .form-field {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 8px;\r\n    }\r\n\r\n    .form-field label {\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n    }\r\n\r\n    .form-field label .required {\r\n      color: var(--error-color);\r\n    }\r\n\r\n    .form-field label .optional {\r\n      color: var(--secondary-text-color);\r\n      font-weight: 400;\r\n      font-size: 12px;\r\n    }\r\n\r\n    .form-field input {\r\n      padding: 12px 16px;\r\n      border: 1px solid var(--divider-color);\r\n      border-radius: 12px;\r\n      font-size: 16px;\r\n      font-family: inherit;\r\n      color: var(--primary-text-color);\r\n      background: var(--card-background-color);\r\n      transition: border-color 0.2s;\r\n    }\r\n\r\n    .form-field input:focus {\r\n      outline: none;\r\n      border-color: var(--primary-color);\r\n    }\r\n\r\n    .form-field input.error {\r\n      border-color: var(--error-color);\r\n    }\r\n\r\n    .form-field .error-message {\r\n      font-size: 12px;\r\n      color: var(--error-color);\r\n      margin-top: 4px;\r\n    }\r\n\r\n    .priority-toggle {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n      padding: 12px 0;\r\n    }\r\n\r\n    .priority-toggle input[type=\"checkbox\"] {\r\n      width: 20px;\r\n      height: 20px;\r\n      cursor: pointer;\r\n      accent-color: var(--primary-color);\r\n    }\r\n\r\n    .priority-toggle label {\r\n      font-size: 16px;\r\n      color: var(--primary-text-color);\r\n      cursor: pointer;\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n    }\r\n\r\n    .priority-toggle ha-icon {\r\n      --mdc-icon-size: 20px;\r\n      color: var(--warning-color);\r\n    }\r\n\r\n    .actions {\r\n      display: flex;\r\n      gap: 12px;\r\n      margin-top: 24px;\r\n    }\r\n\r\n    .actions button {\r\n      flex: 1;\r\n      padding: 14px 24px;\r\n      border: none;\r\n      border-radius: 12px;\r\n      font-size: 16px;\r\n      font-weight: 500;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      gap: 8px;\r\n    }\r\n\r\n    .actions button:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n    }\r\n\r\n    .button-cancel {\r\n      background: transparent;\r\n      color: var(--primary-text-color);\r\n      border: 1px solid var(--divider-color);\r\n    }\r\n\r\n    .button-cancel:hover:not(:disabled) {\r\n      background: var(--secondary-background-color);\r\n    }\r\n\r\n    .button-save {\r\n      background: var(--primary-color);\r\n      color: var(--text-primary-color, white);\r\n    }\r\n\r\n    .button-save:hover:not(:disabled) {\r\n      opacity: 0.9;\r\n    }\r\n\r\n    .button-delete {\r\n      background: var(--error-color);\r\n      color: var(--text-primary-color, white);\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    .button-delete:hover:not(:disabled) {\r\n      opacity: 0.9;\r\n    }\r\n\r\n    .delete-confirm {\r\n      background: var(--card-background-color);\r\n      border: 1px solid var(--divider-color);\r\n      border-radius: 12px;\r\n      padding: 16px;\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    .delete-confirm-text {\r\n      font-size: 14px;\r\n      color: var(--primary-text-color);\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    .delete-confirm-actions {\r\n      display: flex;\r\n      gap: 8px;\r\n    }\r\n\r\n    .delete-confirm-actions button {\r\n      flex: 1;\r\n      padding: 10px;\r\n      border-radius: 8px;\r\n      border: none;\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .spinner {\r\n      width: 20px;\r\n      height: 20px;\r\n      border: 2px solid currentColor;\r\n      border-right-color: transparent;\r\n      border-radius: 50%;\r\n      animation: spin 0.6s linear infinite;\r\n    }\r\n\r\n    @keyframes spin {\r\n      to {\r\n        transform: rotate(360deg);\r\n      }\r\n    }\r\n  `;\r\n\r\n  updated(changedProperties: Map<string, any>) {\r\n    if (changedProperties.has(\"open\") && this.open) {\r\n      this._initializeForm();\r\n    }\r\n  }\r\n\r\n  private _initializeForm() {\r\n    if (this.mode === \"edit\" && this.contact) {\r\n      this.formData = {\r\n        name: this.contact.name || \"\",\r\n        number: this.contact.number || \"\",\r\n        code: this.contact.code || \"\",\r\n        priority: this._isContactPriority(this.contact),\r\n      };\r\n    } else {\r\n      this.formData = {\r\n        name: \"\",\r\n        number: \"\",\r\n        code: \"\",\r\n        priority: false,\r\n      };\r\n    }\r\n    this.errors = {};\r\n    this.showDeleteConfirm = false;\r\n  }\r\n\r\n  private _getPhoneStateId(): string | null {\r\n    // Find the phone_state sensor entity\r\n    return (\r\n      Object.keys(this.hass.states).find(\r\n        (id) => id.startsWith(\"sensor.\") && id.includes(\"phone_state\")\r\n      ) || null\r\n    );\r\n  }\r\n\r\n  private _isContactPriority(contact: QuickDialEntry): boolean {\r\n    const phoneStateId = this._getPhoneStateId();\r\n    if (!phoneStateId) return false;\r\n\r\n    const phoneState = this.hass.states[phoneStateId];\r\n    const priorityCallers = phoneState?.attributes?.priority_callers || [];\r\n    return priorityCallers.some((p: any) => p.number === contact.number);\r\n  }\r\n\r\n  private _handleClose() {\r\n    if (this.saving) return;\r\n    triggerHaptic(\"selection\");\r\n    this.open = false;\r\n    this.dispatchEvent(new CustomEvent(\"close\"));\r\n  }\r\n\r\n  private _handleInputChange(e: Event) {\r\n    const input = e.target as HTMLInputElement;\r\n    const field = input.name as keyof FormData;\r\n\r\n    if (field === \"priority\") {\r\n      this.formData = { ...this.formData, [field]: input.checked };\r\n    } else {\r\n      this.formData = { ...this.formData, [field]: input.value };\r\n    }\r\n\r\n    // Clear error for this field\r\n    if (this.errors[field as keyof ValidationErrors]) {\r\n      this.errors = { ...this.errors, [field]: undefined };\r\n    }\r\n  }\r\n\r\n  private _validate(): boolean {\r\n    const errors: ValidationErrors = {};\r\n\r\n    // Name validation\r\n    if (!this.formData.name.trim()) {\r\n      errors.name = \"Name is required\";\r\n    }\r\n\r\n    // Number validation\r\n    if (!this.formData.number.trim()) {\r\n      errors.number = \"Phone number is required\";\r\n    } else if (!/^[\\d\\s\\-\\+\\(\\)]+$/.test(this.formData.number)) {\r\n      errors.number = \"Invalid phone number format\";\r\n    }\r\n\r\n    // Code validation (uniqueness check if provided)\r\n    if (this.formData.code.trim()) {\r\n      const phoneStateId = this._getPhoneStateId();\r\n      if (phoneStateId) {\r\n        const phoneState = this.hass.states[phoneStateId];\r\n        const quickDials = phoneState?.attributes?.quick_dials || [];\r\n        const isDuplicate = quickDials.some(\r\n          (qd: QuickDialEntry) =>\r\n            qd.code === this.formData.code.trim() &&\r\n            (this.mode === \"add\" || qd.id !== this.contact?.id)\r\n        );\r\n        if (isDuplicate) {\r\n          errors.code = \"This code is already in use\";\r\n        }\r\n      }\r\n    }\r\n\r\n    this.errors = errors;\r\n    return Object.keys(errors).length === 0;\r\n  }\r\n\r\n  private async _handleSave() {\r\n    if (!this._validate()) {\r\n      triggerHaptic(\"warning\");\r\n      return;\r\n    }\r\n\r\n    this.saving = true;\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      if (this.mode === \"edit\" && this.contact) {\r\n        // Edit mode: use edit_contact service which handles priority internally\r\n        await this._editContact();\r\n      } else {\r\n        // Add mode\r\n        await this._addContact();\r\n        // Handle priority changes for new contacts\r\n        await this._handlePriorityChange();\r\n      }\r\n\r\n      triggerHaptic(\"success\");\r\n      this.open = false;\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"contact-saved\", {\r\n          detail: { mode: this.mode },\r\n        })\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error saving contact:\", error);\r\n      triggerHaptic(\"failure\");\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"error\", {\r\n          detail: { message: \"Failed to save contact\" },\r\n        })\r\n      );\r\n    } finally {\r\n      this.saving = false;\r\n    }\r\n  }\r\n\r\n  private async _addContact() {\r\n    const phoneStateId = this._getPhoneStateId();\r\n    if (!phoneStateId) {\r\n      throw new Error(\"Phone state entity not found\");\r\n    }\r\n\r\n    const serviceData: any = {\r\n      number: this.formData.number.trim(),\r\n      name: this.formData.name.trim(),\r\n    };\r\n\r\n    if (this.formData.code.trim()) {\r\n      serviceData.code = this.formData.code.trim();\r\n    }\r\n\r\n    await this.hass.callService(\"tsuryphone\", \"quick_dial_add\", serviceData, {\r\n      entity_id: phoneStateId,\r\n    });\r\n  }\r\n\r\n  private async _editContact() {\r\n    const phoneStateId = this._getPhoneStateId();\r\n    if (!phoneStateId || !this.contact) {\r\n      throw new Error(\"Phone state entity or contact not found\");\r\n    }\r\n\r\n    const serviceData: any = {\r\n      id: this.contact.id,\r\n      number: this.formData.number.trim(),\r\n      name: this.formData.name.trim(),\r\n      code: this.formData.code.trim() || \"\",\r\n      priority: this.formData.priority,\r\n    };\r\n\r\n    await this.hass.callService(\"tsuryphone\", \"edit_contact\", serviceData, {\r\n      entity_id: phoneStateId,\r\n    });\r\n  }\r\n\r\n  private async _deleteContact(id: string) {\r\n    const phoneStateId = this._getPhoneStateId();\r\n    if (!phoneStateId) {\r\n      throw new Error(\"Phone state entity not found\");\r\n    }\r\n\r\n    await this.hass.callService(\r\n      \"tsuryphone\",\r\n      \"quick_dial_remove\",\r\n      { id },\r\n      { entity_id: phoneStateId }\r\n    );\r\n  }\r\n\r\n  private async _handlePriorityChange() {\r\n    const phoneStateId = this._getPhoneStateId();\r\n    if (!phoneStateId) {\r\n      throw new Error(\"Phone state entity not found\");\r\n    }\r\n\r\n    const wasPriority =\r\n      this.mode === \"edit\" && this.contact\r\n        ? this._isContactPriority(this.contact)\r\n        : false;\r\n    const isPriority = this.formData.priority;\r\n\r\n    if (isPriority && !wasPriority) {\r\n      // Add to priority\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"priority_add\",\r\n        { number: this.formData.number.trim() },\r\n        { entity_id: phoneStateId }\r\n      );\r\n    } else if (!isPriority && wasPriority && this.contact) {\r\n      // Remove from priority - need to find the priority entry ID\r\n      const phoneState = this.hass.states[phoneStateId];\r\n      const priorityCallers = phoneState?.attributes?.priority_callers || [];\r\n      const priorityEntry = priorityCallers.find(\r\n        (p: any) => p.number === this.contact!.number\r\n      );\r\n      if (priorityEntry) {\r\n        await this.hass.callService(\r\n          \"tsuryphone\",\r\n          \"priority_remove\",\r\n          { id: priorityEntry.id },\r\n          { entity_id: phoneStateId }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  private _handleDeleteClick() {\r\n    triggerHaptic(\"medium\");\r\n    this.showDeleteConfirm = true;\r\n  }\r\n\r\n  private _handleDeleteCancel() {\r\n    triggerHaptic(\"selection\");\r\n    this.showDeleteConfirm = false;\r\n  }\r\n\r\n  private async _handleDeleteConfirm() {\r\n    if (!this.contact) return;\r\n\r\n    this.saving = true;\r\n    triggerHaptic(\"warning\");\r\n\r\n    try {\r\n      await this._deleteContact(this.contact.id);\r\n\r\n      // Also remove from priority if it's a priority contact\r\n      if (this._isContactPriority(this.contact)) {\r\n        const phoneStateId = this._getPhoneStateId();\r\n        if (phoneStateId) {\r\n          const phoneState = this.hass.states[phoneStateId];\r\n          const priorityCallers =\r\n            phoneState?.attributes?.priority_callers || [];\r\n          const priorityEntry = priorityCallers.find(\r\n            (p: any) => p.number === this.contact!.number\r\n          );\r\n          if (priorityEntry) {\r\n            await this.hass.callService(\"tsuryphone\", \"priority_remove\", {\r\n              id: priorityEntry.id,\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      this.open = false;\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"contact-deleted\", {\r\n          detail: { id: this.contact.id },\r\n        })\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error deleting contact:\", error);\r\n      triggerHaptic(\"failure\");\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"error\", {\r\n          detail: { message: \"Failed to delete contact\" },\r\n        })\r\n      );\r\n    } finally {\r\n      this.saving = false;\r\n    }\r\n  }\r\n\r\n  protected render(): TemplateResult {\r\n    if (!this.open) return html``;\r\n\r\n    const title = this.mode === \"add\" ? \"Add Contact\" : \"Edit Contact\";\r\n\r\n    return html`\r\n      <div class=\"modal\">\r\n        <div class=\"header\">\r\n          <h2 class=\"title\">${title}</h2>\r\n          <button\r\n            class=\"close-button\"\r\n            @click=${this._handleClose}\r\n            ?disabled=${this.saving}\r\n          >\r\n            <ha-icon icon=\"mdi:close\"></ha-icon>\r\n          </button>\r\n        </div>\r\n\r\n          ${\r\n            this.showDeleteConfirm\r\n              ? html`\r\n                  <div class=\"delete-confirm\">\r\n                    <div class=\"delete-confirm-text\">\r\n                      Are you sure you want to delete this contact? This action\r\n                      cannot be undone.\r\n                    </div>\r\n                    <div class=\"delete-confirm-actions\">\r\n                      <button\r\n                        @click=${this._handleDeleteCancel}\r\n                        ?disabled=${this.saving}\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                      <button\r\n                        class=\"button-delete\"\r\n                        @click=${this._handleDeleteConfirm}\r\n                        ?disabled=${this.saving}\r\n                      >\r\n                        ${this.saving\r\n                          ? html`<div class=\"spinner\"></div>`\r\n                          : \"Delete\"}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                `\r\n              : \"\"\r\n          }\r\n\r\n          <div class=\"form\">\r\n            <div class=\"form-field\">\r\n              <label>\r\n                Name <span class=\"required\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                .value=${this.formData.name}\r\n                @input=${this._handleInputChange}\r\n                class=${this.errors.name ? \"error\" : \"\"}\r\n                ?disabled=${this.saving}\r\n                placeholder=\"Contact name\"\r\n              />\r\n              ${\r\n                this.errors.name\r\n                  ? html`<div class=\"error-message\">${this.errors.name}</div>`\r\n                  : \"\"\r\n              }\r\n            </div>\r\n\r\n            <div class=\"form-field\">\r\n              <label>\r\n                Phone Number <span class=\"required\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"tel\"\r\n                name=\"number\"\r\n                .value=${this.formData.number}\r\n                @input=${this._handleInputChange}\r\n                class=${this.errors.number ? \"error\" : \"\"}\r\n                ?disabled=${this.saving}\r\n                placeholder=\"+1234567890\"\r\n              />\r\n              ${\r\n                this.errors.number\r\n                  ? html`<div class=\"error-message\">${this.errors.number}</div>`\r\n                  : \"\"\r\n              }\r\n            </div>\r\n\r\n            <div class=\"form-field\">\r\n              <label>\r\n                Quick Dial Code <span class=\"optional\">(optional)</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"code\"\r\n                .value=${this.formData.code}\r\n                @input=${this._handleInputChange}\r\n                class=${this.errors.code ? \"error\" : \"\"}\r\n                ?disabled=${this.saving}\r\n                placeholder=\"e.g., 1, 2, mom, work\"\r\n              />\r\n              ${\r\n                this.errors.code\r\n                  ? html`<div class=\"error-message\">${this.errors.code}</div>`\r\n                  : \"\"\r\n              }\r\n            </div>\r\n\r\n            <div class=\"priority-toggle\">\r\n              <input\r\n                type=\"checkbox\"\r\n                name=\"priority\"\r\n                id=\"priority-checkbox\"\r\n                .checked=${this.formData.priority}\r\n                @change=${this._handleInputChange}\r\n                ?disabled=${this.saving}\r\n              />\r\n              <label for=\"priority-checkbox\">\r\n                <ha-icon icon=\"mdi:star\"></ha-icon>\r\n                Priority Contact\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          ${\r\n            this.mode === \"edit\" && !this.showDeleteConfirm\r\n              ? html`\r\n                  <button\r\n                    class=\"button-delete\"\r\n                    @click=${this._handleDeleteClick}\r\n                    ?disabled=${this.saving}\r\n                    style=\"width: 100%; margin-top: 24px;\"\r\n                  >\r\n                    <ha-icon icon=\"mdi:delete\"></ha-icon>\r\n                    Delete Contact\r\n                  </button>\r\n                `\r\n              : \"\"\r\n          }\r\n\r\n          <div class=\"actions\">\r\n            <button\r\n              class=\"button-cancel\"\r\n              @click=${this._handleClose}\r\n              ?disabled=${this.saving}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              class=\"button-save\"\r\n              @click=${this._handleSave}\r\n              ?disabled=${this.saving}\r\n            >\r\n              ${\r\n                this.saving\r\n                  ? html`<div class=\"spinner\"></div>`\r\n                  : this.mode === \"add\"\r\n                    ? \"Add Contact\"\r\n                    : \"Save Changes\"\r\n              }\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-contact-modal\": ContactModal;\r\n  }\r\n}\r\n","/**\r\n * Call Modal Component\r\n * Full-screen in-card modal for incoming and active calls\r\n * Similar to contact-modal - position: absolute, fills entire card\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"../../types/homeassistant\";\r\nimport { triggerHaptic } from \"../../utils/haptics\";\r\nimport { normalizePhoneNumberForDisplay } from \"../../utils/formatters\";\r\n\r\nexport type CallModalMode = \"incoming\" | \"active\" | \"waiting\";\r\n\r\nexport interface CallInfo {\r\n  number: string;\r\n  name?: string;\r\n  isPriority?: boolean;\r\n  isIncoming: boolean;\r\n  duration?: number; // seconds\r\n  audioOutput?: \"earpiece\" | \"speaker\" | \"bluetooth\";\r\n}\r\n\r\nexport interface WaitingCallInfo {\r\n  number: string;\r\n  name?: string;\r\n  isPriority?: boolean;\r\n}\r\n\r\n@customElement(\"tsuryphone-call-modal\")\r\nexport class TsuryPhoneCallModal extends LitElement {\r\n  @property({ type: Object }) hass!: HomeAssistant;\r\n  @property({ type: String }) entityId?: string; // Phone state entity ID for service targeting\r\n  @property({ type: Boolean, reflect: true }) open = false;\r\n  @property({ type: String }) mode: CallModalMode = \"incoming\";\r\n  @property({ type: Object }) callInfo?: CallInfo;\r\n  @property({ type: Object }) waitingCall?: WaitingCallInfo;\r\n  @property({ type: Boolean }) callWaitingAvailable = false;\r\n\r\n  @state() private _isAnswering = false;\r\n  @state() private _isDeclining = false;\r\n  @state() private _isMuted = false;\r\n  @state() private _showKeypad = false;\r\n  @state() private _swipeStartX = 0;\r\n  @state() private _swipeDistance = 0;\r\n  @state() private _isSwipingLeft = false;\r\n  @state() private _isSwipingRight = false;\r\n\r\n  private _durationInterval?: number;\r\n  private _currentDuration = 0;\r\n\r\n  static override styles: CSSResultGroup = css`\r\n    :host {\r\n      display: none;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      z-index: 100;\r\n      background: var(--card-background-color);\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    :host([open]) {\r\n      display: flex;\r\n      flex-direction: column;\r\n      animation: slideUp 0.3s ease-out;\r\n    }\r\n\r\n    @keyframes slideUp {\r\n      from {\r\n        transform: translateY(100%);\r\n      }\r\n      to {\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n\r\n    .modal-header {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      padding: 8px 12px;\r\n      border-bottom: 1px solid var(--divider-color);\r\n      background: var(--card-background-color);\r\n    }\r\n\r\n    .modal-title {\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n    }\r\n\r\n    .close-button {\r\n      background: none;\r\n      border: none;\r\n      cursor: pointer;\r\n      padding: 4px;\r\n      color: var(--primary-text-color);\r\n      font-size: 18px;\r\n      line-height: 1;\r\n      opacity: 0.6;\r\n      transition: opacity 0.2s;\r\n    }\r\n\r\n    .close-button:hover {\r\n      opacity: 1;\r\n    }\r\n\r\n    .modal-content {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 24px;\r\n      overflow-y: auto;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    /* Incoming Call UI */\r\n    .caller-info {\r\n      text-align: center;\r\n      margin-bottom: 48px;\r\n    }\r\n\r\n    .caller-name {\r\n      font-size: 32px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .caller-number {\r\n      font-size: 18px;\r\n      color: var(--secondary-text-color);\r\n    }\r\n\r\n    .priority-badge {\r\n      display: inline-flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      padding: 4px 12px;\r\n      background: var(--warning-color);\r\n      color: var(--text-primary-color, white);\r\n      border-radius: 12px;\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      margin-top: 12px;\r\n    }\r\n\r\n    .call-status {\r\n      font-size: 16px;\r\n      color: var(--secondary-text-color);\r\n      margin-bottom: 24px;\r\n    }\r\n\r\n    /* Swipe Slider */\r\n    .swipe-slider {\r\n      width: 100%;\r\n      max-width: 320px;\r\n      height: 72px;\r\n      background: var(--divider-color);\r\n      border-radius: 36px;\r\n      position: relative;\r\n      overflow: hidden;\r\n      touch-action: none;\r\n      user-select: none;\r\n    }\r\n\r\n    .swipe-track {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0 24px;\r\n    }\r\n\r\n    .swipe-label {\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      color: var(--secondary-text-color);\r\n      pointer-events: none;\r\n    }\r\n\r\n    .swipe-handle {\r\n      position: absolute;\r\n      top: 6px;\r\n      left: 6px;\r\n      width: 60px;\r\n      height: 60px;\r\n      background: var(--card-background-color);\r\n      border-radius: 30px;\r\n      box-shadow: var(--ha-card-box-shadow, 0 2px 8px rgba(0, 0, 0, 0.2));\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      cursor: grab;\r\n      transition:\r\n        transform 0.2s ease-out,\r\n        background-color 0.2s;\r\n      z-index: 2;\r\n    }\r\n\r\n    .swipe-handle:active {\r\n      cursor: grabbing;\r\n    }\r\n\r\n    .swipe-handle.swiping-left {\r\n      background: var(--error-color);\r\n    }\r\n\r\n    .swipe-handle.swiping-right {\r\n      background: var(--success-color);\r\n    }\r\n\r\n    /* Active Call Controls */\r\n    .call-timer {\r\n      font-size: 48px;\r\n      font-weight: 300;\r\n      color: var(--primary-text-color);\r\n      margin-bottom: 48px;\r\n      font-variant-numeric: tabular-nums;\r\n    }\r\n\r\n    .call-controls {\r\n      display: grid;\r\n      grid-template-columns: repeat(3, 1fr);\r\n      gap: 24px;\r\n      width: 100%;\r\n      max-width: 400px;\r\n      margin-bottom: 24px;\r\n    }\r\n\r\n    .control-button {\r\n      width: 72px;\r\n      height: 72px;\r\n      border-radius: 50%;\r\n      border: none;\r\n      background: var(--secondary-background-color);\r\n      color: var(--primary-text-color);\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      transition: all 0.2s;\r\n      box-shadow: var(--ha-card-box-shadow, 0 2px 4px rgba(0, 0, 0, 0.1));\r\n      justify-self: center;\r\n    }\r\n\r\n    .control-button ha-icon {\r\n      --mdc-icon-size: 28px;\r\n    }\r\n\r\n    .control-button:hover {\r\n      background: var(--divider-color);\r\n    }\r\n\r\n    .control-button:active {\r\n      transform: scale(0.95);\r\n    }\r\n\r\n    .control-button.active {\r\n      background: var(--primary-color);\r\n      color: var(--text-primary-color, white);\r\n    }\r\n\r\n    .control-button.muted {\r\n      background: var(--error-color);\r\n      color: var(--text-primary-color, white);\r\n    }\r\n\r\n    .hangup-button {\r\n      grid-column: 1 / -1;\r\n      width: 72px;\r\n      height: 72px;\r\n      background: var(--error-color);\r\n      color: var(--text-primary-color, white);\r\n      justify-self: center;\r\n    }\r\n\r\n    .hangup-button:hover {\r\n      filter: brightness(0.9);\r\n    }\r\n\r\n    /* Call Waiting */\r\n    .waiting-call {\r\n      width: 100%;\r\n      max-width: 400px;\r\n      padding: 16px;\r\n      background: var(--secondary-background-color);\r\n      border-radius: 12px;\r\n      margin-bottom: 24px;\r\n    }\r\n\r\n    .waiting-call-info {\r\n      text-align: center;\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    .waiting-call-name {\r\n      font-size: 18px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color, #000);\r\n    }\r\n\r\n    .waiting-call-number {\r\n      font-size: 14px;\r\n      color: var(--secondary-text-color, #666);\r\n    }\r\n\r\n    .waiting-actions {\r\n      display: flex;\r\n      gap: 12px;\r\n      justify-content: center;\r\n    }\r\n\r\n    .waiting-action-button {\r\n      padding: 8px 16px;\r\n      border-radius: 20px;\r\n      border: none;\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n    }\r\n\r\n    .swap-button {\r\n      background: var(--primary-color, #03a9f4);\r\n      color: white;\r\n    }\r\n\r\n    .merge-button {\r\n      background: var(--success-color, #4caf50);\r\n      color: white;\r\n    }\r\n\r\n    /* Loading State */\r\n    .loading {\r\n      opacity: 0.6;\r\n      pointer-events: none;\r\n    }\r\n  `;\r\n\r\n  override connectedCallback(): void {\r\n    super.connectedCallback();\r\n    if (this.mode === \"active\" && this.callInfo?.duration !== undefined) {\r\n      this._currentDuration = this.callInfo.duration;\r\n      this._startDurationTimer();\r\n    }\r\n  }\r\n\r\n  override disconnectedCallback(): void {\r\n    super.disconnectedCallback();\r\n    this._stopDurationTimer();\r\n  }\r\n\r\n  override willUpdate(changedProps: Map<string, any>): void {\r\n    super.willUpdate(changedProps);\r\n    \r\n    // Sync mute state from HA entity\r\n    if (this.entityId && this.hass?.states[this.entityId]) {\r\n      const phoneState = this.hass.states[this.entityId];\r\n      const isMuted = phoneState.attributes?.is_muted ?? false;\r\n      if (isMuted !== this._isMuted) {\r\n        this._isMuted = isMuted;\r\n      }\r\n    }\r\n  }\r\n\r\n  override updated(changedProps: Map<string, any>): void {\r\n    if (changedProps.has(\"mode\")) {\r\n      if (this.mode === \"active\") {\r\n        this._startDurationTimer();\r\n      } else {\r\n        this._stopDurationTimer();\r\n      }\r\n    }\r\n  }\r\n\r\n  private _startDurationTimer(): void {\r\n    this._stopDurationTimer();\r\n    this._durationInterval = window.setInterval(() => {\r\n      this._currentDuration++;\r\n      this.requestUpdate();\r\n    }, 1000);\r\n  }\r\n\r\n  private _stopDurationTimer(): void {\r\n    if (this._durationInterval) {\r\n      clearInterval(this._durationInterval);\r\n      this._durationInterval = undefined;\r\n    }\r\n  }\r\n\r\n  private _formatDuration(seconds: number): string {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\r\n  }\r\n\r\n  private _handleClose(): void {\r\n    triggerHaptic(\"selection\");\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"close\", { bubbles: true, composed: true })\r\n    );\r\n  }\r\n\r\n  private _handleSwipeStart(e: TouchEvent): void {\r\n    this._swipeStartX = e.touches[0].clientX;\r\n    this._swipeDistance = 0;\r\n  }\r\n\r\n  private _handleSwipeMove(e: TouchEvent): void {\r\n    if (this._isAnswering || this._isDeclining) return;\r\n\r\n    const currentX = e.touches[0].clientX;\r\n    this._swipeDistance = currentX - this._swipeStartX;\r\n\r\n    // Limit swipe distance\r\n    const maxDistance = 200;\r\n    this._swipeDistance = Math.max(\r\n      -maxDistance,\r\n      Math.min(maxDistance, this._swipeDistance)\r\n    );\r\n\r\n    // Update visual state\r\n    this._isSwipingLeft = this._swipeDistance < -50;\r\n    this._isSwipingRight = this._swipeDistance > 50;\r\n\r\n    this.requestUpdate();\r\n  }\r\n\r\n  private _handleSwipeEnd(): void {\r\n    const threshold = 120;\r\n\r\n    if (this._swipeDistance < -threshold) {\r\n      // Swipe left to decline\r\n      this._handleDecline();\r\n    } else if (this._swipeDistance > threshold) {\r\n      // Swipe right to answer\r\n      this._handleAnswer();\r\n    }\r\n\r\n    // Reset swipe state\r\n    this._swipeDistance = 0;\r\n    this._isSwipingLeft = false;\r\n    this._isSwipingRight = false;\r\n    this.requestUpdate();\r\n  }\r\n\r\n  private async _handleAnswer(): Promise<void> {\r\n    this._isAnswering = true;\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"answer_call\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"call-answered\", { bubbles: true, composed: true })\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to answer call:\", error);\r\n      triggerHaptic(\"failure\");\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"error\", {\r\n          detail: { message: \"Failed to answer call\" },\r\n          bubbles: true,\r\n          composed: true,\r\n        })\r\n      );\r\n    } finally {\r\n      this._isAnswering = false;\r\n    }\r\n  }\r\n\r\n  private async _handleDecline(): Promise<void> {\r\n    this._isDeclining = true;\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"hangup\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"call-declined\", { bubbles: true, composed: true })\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to decline call:\", error);\r\n      triggerHaptic(\"failure\");\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"error\", {\r\n          detail: { message: \"Failed to decline call\" },\r\n          bubbles: true,\r\n          composed: true,\r\n        })\r\n      );\r\n    } finally {\r\n      this._isDeclining = false;\r\n    }\r\n  }\r\n\r\n  private async _handleHangup(): Promise<void> {\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"hangup\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"call-ended\", { bubbles: true, composed: true })\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to hang up:\", error);\r\n      triggerHaptic(\"failure\");\r\n    }\r\n  }\r\n\r\n  private async _handleMute(): Promise<void> {\r\n    triggerHaptic(\"selection\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"toggle_mute\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n      // State will be updated via HA state changes\r\n    } catch (error) {\r\n      console.error(\"Failed to toggle mute:\", error);\r\n      triggerHaptic(\"failure\");\r\n    }\r\n  }\r\n\r\n  private async _handleSpeaker(): Promise<void> {\r\n    triggerHaptic(\"selection\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"toggle_volume_mode\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to toggle speaker:\", error);\r\n    }\r\n  }\r\n\r\n  private _handleKeypad(): void {\r\n    triggerHaptic(\"selection\");\r\n    this._showKeypad = !this._showKeypad;\r\n    this.requestUpdate();\r\n  }\r\n\r\n  /**\r\n   * Get normalized phone number for display\r\n   */\r\n  private _getNormalizedNumber(number: string): string {\r\n    if (!this.entityId) {\r\n      console.log(\"[CallModal] _getNormalizedNumber: No entityId, returning raw number:\", number);\r\n      return number;\r\n    }\r\n    \r\n    const phoneStateEntity = this.hass.states[this.entityId];\r\n    const dialingContext = phoneStateEntity?.attributes?.dialing_context;\r\n    const defaultDialCode = dialingContext?.default_code || \"\";\r\n    \r\n    console.log(\"[CallModal] _getNormalizedNumber DEBUG:\", {\r\n      entityId: this.entityId,\r\n      phoneStateEntity: !!phoneStateEntity,\r\n      attributes: phoneStateEntity?.attributes,\r\n      dialingContext: dialingContext,\r\n      defaultDialCode: defaultDialCode,\r\n      inputNumber: number,\r\n      fallbackCode: defaultDialCode || \"972\"\r\n    });\r\n    \r\n    const normalized = normalizePhoneNumberForDisplay(number, defaultDialCode || \"972\");\r\n    console.log(\"[CallModal] Normalized result:\", normalized);\r\n    \r\n    return normalized;\r\n  }\r\n\r\n  private async _handleSwapCalls(): Promise<void> {\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"swap_calls\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to swap calls:\", error);\r\n    }\r\n  }\r\n\r\n  private async _handleMergeCalls(): Promise<void> {\r\n    triggerHaptic(\"medium\");\r\n\r\n    try {\r\n      if (!this.entityId) {\r\n        throw new Error(\"Entity ID is required\");\r\n      }\r\n      await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"merge_calls\",\r\n        {},\r\n        { entity_id: this.entityId }\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Failed to merge calls:\", error);\r\n    }\r\n  }\r\n\r\n  private _renderIncomingCall(): TemplateResult {\r\n    const { callInfo } = this;\r\n    if (!callInfo) return html``;\r\n\r\n    const displayNumber = this._getNormalizedNumber(callInfo.number);\r\n\r\n    return html`\r\n      <div class=\"caller-info\">\r\n        <div class=\"caller-name\">${callInfo.name || displayNumber}</div>\r\n        ${callInfo.name\r\n          ? html`<div class=\"caller-number\">${displayNumber}</div>`\r\n          : \"\"}\r\n        ${callInfo.isPriority\r\n          ? html` <div class=\"priority-badge\"> Priority Caller</div> `\r\n          : \"\"}\r\n      </div>\r\n\r\n      <div class=\"call-status\">Incoming call...</div>\r\n\r\n      <div\r\n        class=\"swipe-slider\"\r\n        @touchstart=${this._handleSwipeStart}\r\n        @touchmove=${this._handleSwipeMove}\r\n        @touchend=${this._handleSwipeEnd}\r\n      >\r\n        <div class=\"swipe-track\">\r\n          <span class=\"swipe-label\">Decline</span>\r\n          <span class=\"swipe-label\">Answer</span>\r\n        </div>\r\n        <div\r\n          class=\"swipe-handle ${this._isSwipingLeft\r\n            ? \"swiping-left\"\r\n            : \"\"} ${this._isSwipingRight ? \"swiping-right\" : \"\"}\"\r\n          style=\"transform: translateX(${this._swipeDistance}px)\"\r\n        >\r\n          ${this._isSwipingLeft\r\n            ? html`<ha-icon icon=\"mdi:close\"></ha-icon>`\r\n            : this._isSwipingRight\r\n              ? html`<ha-icon icon=\"mdi:check\"></ha-icon>`\r\n              : html`<ha-icon icon=\"mdi:phone\"></ha-icon>`}\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private _renderActiveCall(): TemplateResult {\r\n    const { callInfo } = this;\r\n    if (!callInfo) return html``;\r\n\r\n    const isSpeaker = callInfo.audioOutput === \"speaker\";\r\n    \r\n    // Check phone state to determine if we're dialing\r\n    const phoneState = this.entityId ? this.hass.states[this.entityId]?.state : null;\r\n    const isDialing = phoneState === \"DIALING\" || phoneState === \"CALLING_OUT\" || phoneState === \"RINGING_OUT\";\r\n    const callStatus = isDialing ? \"Dialing...\" : this._formatDuration(this._currentDuration);\r\n\r\n    const displayNumber = this._getNormalizedNumber(callInfo.number);\r\n\r\n    return html`\r\n      <div class=\"caller-info\">\r\n        <div class=\"caller-name\">${callInfo.name || displayNumber}</div>\r\n        ${callInfo.name\r\n          ? html`<div class=\"caller-number\">${displayNumber}</div>`\r\n          : \"\"}\r\n      </div>\r\n\r\n      <div class=\"call-timer\">\r\n        ${callStatus}\r\n      </div>\r\n\r\n      ${this.callWaitingAvailable && this.waitingCall\r\n        ? this._renderWaitingCall()\r\n        : \"\"}\r\n\r\n      <div class=\"call-controls\">\r\n        <button\r\n          class=\"control-button ${this._isMuted ? \"muted\" : \"\"}\"\r\n          @click=${this._handleMute}\r\n          title=\"Mute\"\r\n        >\r\n          <ha-icon\r\n            icon=\"${this._isMuted ? \"mdi:microphone-off\" : \"mdi:microphone\"}\"\r\n          ></ha-icon>\r\n        </button>\r\n\r\n        <button\r\n          class=\"control-button ${this._showKeypad ? \"active\" : \"\"}\"\r\n          @click=${this._handleKeypad}\r\n          title=\"Keypad\"\r\n        >\r\n          <ha-icon icon=\"mdi:dialpad\"></ha-icon>\r\n        </button>\r\n\r\n        <button\r\n          class=\"control-button ${isSpeaker ? \"active\" : \"\"}\"\r\n          @click=${this._handleSpeaker}\r\n          title=\"Speaker\"\r\n        >\r\n          \r\n        </button>\r\n\r\n        <button\r\n          class=\"control-button hangup-button\"\r\n          @click=${this._handleHangup}\r\n          title=\"Hang up\"\r\n        >\r\n          <ha-icon icon=\"mdi:phone-hangup\"></ha-icon>\r\n        </button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private _renderWaitingCall(): TemplateResult {\r\n    const { waitingCall } = this;\r\n    if (!waitingCall) return html``;\r\n\r\n    const displayNumber = this._getNormalizedNumber(waitingCall.number);\r\n\r\n    return html`\r\n      <div class=\"waiting-call\">\r\n        <div class=\"waiting-call-info\">\r\n          <div class=\"waiting-call-name\">\r\n            ${waitingCall.name || displayNumber}\r\n          </div>\r\n          ${waitingCall.name\r\n            ? html`<div class=\"waiting-call-number\">${displayNumber}</div>`\r\n            : \"\"}\r\n          ${waitingCall.isPriority\r\n            ? html`<div class=\"priority-badge\"> Priority</div>`\r\n            : \"\"}\r\n        </div>\r\n        <div class=\"waiting-actions\">\r\n          <button\r\n            class=\"waiting-action-button swap-button\"\r\n            @click=${this._handleSwapCalls}\r\n          >\r\n            Swap\r\n          </button>\r\n          <button\r\n            class=\"waiting-action-button merge-button\"\r\n            @click=${this._handleMergeCalls}\r\n          >\r\n            Merge\r\n          </button>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  override render(): TemplateResult {\r\n    const titleMap = {\r\n      incoming: \"Incoming Call\",\r\n      active: \"Active Call\",\r\n      waiting: \"Call Waiting\",\r\n    };\r\n\r\n    return html`\r\n      <div class=\"modal-header\">\r\n        <h2 class=\"modal-title\">${titleMap[this.mode]}</h2>\r\n        <button\r\n          class=\"close-button\"\r\n          @click=${this._handleClose}\r\n          title=\"Minimize\"\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n\r\n      <div\r\n        class=\"modal-content ${this._isAnswering || this._isDeclining\r\n          ? \"loading\"\r\n          : \"\"}\"\r\n      >\r\n        ${this.mode === \"incoming\"\r\n          ? this._renderIncomingCall()\r\n          : this._renderActiveCall()}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-call-modal\": TsuryPhoneCallModal;\r\n  }\r\n}\r\n","/**\r\n * Block Number Modal Component\r\n * Modal for adding a phone number to the blocked list\r\n */\r\n\r\nimport { LitElement, html, css, TemplateResult } from 'lit';\r\nimport { customElement, property, state } from 'lit/decorators.js';\r\nimport { HomeAssistant } from '../../types/homeassistant';\r\nimport { TsuryPhoneCardConfig } from '../../types/tsuryphone.d';\r\nimport { triggerHaptic } from '../../utils/haptics';\r\n\r\ninterface FormData {\r\n  number: string;\r\n  name: string;\r\n}\r\n\r\ninterface ValidationErrors {\r\n  number?: string;\r\n  name?: string;\r\n}\r\n\r\n@customElement('tsuryphone-block-number-modal')\r\nexport class BlockNumberModal extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ attribute: false }) config!: TsuryPhoneCardConfig;\r\n  @property({ type: Boolean, reflect: true }) open = false;\r\n  @property({ type: String }) prefillNumber?: string;\r\n  @property({ type: String }) prefillName?: string;\r\n\r\n  @state() private formData: FormData = {\r\n    number: '',\r\n    name: '',\r\n  };\r\n\r\n  @state() private errors: ValidationErrors = {};\r\n  @state() private saving = false;\r\n\r\n  updated(changedProperties: Map<string, any>): void {\r\n    if (changedProperties.has('open') && this.open) {\r\n      // Reset form when opening\r\n      this.formData = {\r\n        number: this.prefillNumber || '',\r\n        name: this.prefillName || '',\r\n      };\r\n      this.errors = {};\r\n      this.saving = false;\r\n    }\r\n  }\r\n\r\n  private _handleClose(): void {\r\n    if (this.saving) return;\r\n    triggerHaptic('light');\r\n    this.dispatchEvent(\r\n      new CustomEvent('close-modal', {\r\n        bubbles: true,\r\n        composed: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  private _handleInputChange(field: keyof FormData, value: string): void {\r\n    this.formData = { ...this.formData, [field]: value };\r\n    // Clear error for this field\r\n    if (this.errors[field]) {\r\n      this.errors = { ...this.errors, [field]: undefined };\r\n    }\r\n  }\r\n\r\n  private _validate(): boolean {\r\n    const errors: ValidationErrors = {};\r\n\r\n    if (!this.formData.number.trim()) {\r\n      errors.number = 'Phone number is required';\r\n    }\r\n\r\n    // Basic phone number validation (must contain digits)\r\n    if (this.formData.number && !/\\d/.test(this.formData.number)) {\r\n      errors.number = 'Must contain at least one digit';\r\n    }\r\n\r\n    this.errors = errors;\r\n    return Object.keys(errors).length === 0;\r\n  }\r\n\r\n  private async _handleSave(): Promise<void> {\r\n    if (!this._validate()) {\r\n      triggerHaptic('heavy');\r\n      return;\r\n    }\r\n\r\n    this.saving = true;\r\n    triggerHaptic('medium');\r\n\r\n    const deviceIdPrefix = this.config?.device_id || '';\r\n    const phoneStateEntityId = deviceIdPrefix\r\n      ? `sensor.${deviceIdPrefix}_phone_state`\r\n      : `sensor.phone_state`;\r\n\r\n    try {\r\n      await this.hass.callService(\r\n        'tsuryphone',\r\n        'blocked_add',\r\n        {\r\n          number: this.formData.number.trim(),\r\n          name: this.formData.name.trim() || undefined,\r\n        },\r\n        { entity_id: phoneStateEntityId }\r\n      );\r\n\r\n      triggerHaptic('medium');\r\n      this._handleClose();\r\n    } catch (err) {\r\n      console.error('Failed to add blocked number:', err);\r\n      triggerHaptic('heavy');\r\n      this.errors = {\r\n        number: 'Failed to add blocked number. Please try again.',\r\n      };\r\n    } finally {\r\n      this.saving = false;\r\n    }\r\n  }\r\n\r\n  render(): TemplateResult {\r\n    return html`\r\n      <div class=\"modal\">\r\n        <div class=\"header\">\r\n          <h2 class=\"title\">Block Number</h2>\r\n          <button\r\n            class=\"close-button\"\r\n            @click=${this._handleClose}\r\n            ?disabled=${this.saving}\r\n            aria-label=\"Close\"\r\n          >\r\n            <ha-icon icon=\"mdi:close\"></ha-icon>\r\n          </button>\r\n        </div>\r\n\r\n        <form class=\"form\" @submit=${(e: Event) => e.preventDefault()}>\r\n          ${this._renderField(\r\n            'number',\r\n            'Phone Number',\r\n            'text',\r\n            '0541234567',\r\n            true\r\n          )}\r\n          ${this._renderField(\r\n            'name',\r\n            'Name',\r\n            'text',\r\n            'Telemarketer',\r\n            false\r\n          )}\r\n\r\n          <div class=\"actions\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"button button-secondary\"\r\n              @click=${this._handleClose}\r\n              ?disabled=${this.saving}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              class=\"button button-primary\"\r\n              @click=${this._handleSave}\r\n              ?disabled=${this.saving}\r\n            >\r\n              ${this.saving ? 'Blocking...' : 'Block Number'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private _renderField(\r\n    field: keyof FormData,\r\n    label: string,\r\n    type: string,\r\n    placeholder: string,\r\n    required: boolean\r\n  ): TemplateResult {\r\n    const value = this.formData[field];\r\n    const error = this.errors[field];\r\n\r\n    return html`\r\n      <div class=\"form-field ${error ? 'has-error' : ''}\">\r\n        <label>\r\n          ${label}\r\n          ${required\r\n            ? html`<span class=\"required\">*</span>`\r\n            : html`<span class=\"optional\">(optional)</span>`}\r\n        </label>\r\n        <input\r\n          type=${type}\r\n          .value=${value}\r\n          placeholder=${placeholder}\r\n          ?disabled=${this.saving}\r\n          @input=${(e: Event) =>\r\n            this._handleInputChange(\r\n              field,\r\n              (e.target as HTMLInputElement).value\r\n            )}\r\n        />\r\n        ${error ? html`<span class=\"error-message\">${error}</span>` : ''}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: none;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      z-index: 100;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    :host([open]) {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n\r\n    .modal {\r\n      display: flex;\r\n      flex-direction: column;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: var(--card-background-color, #fff);\r\n      padding: 24px;\r\n      overflow-y: auto;\r\n      animation: slideUp 0.3s ease-out;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    @keyframes slideUp {\r\n      from {\r\n        transform: translateY(100%);\r\n      }\r\n      to {\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n\r\n    .header {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      margin-bottom: 24px;\r\n    }\r\n\r\n    .title {\r\n      font-size: 24px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n      margin: 0;\r\n    }\r\n\r\n    .close-button {\r\n      width: 40px;\r\n      height: 40px;\r\n      border-radius: 50%;\r\n      border: none;\r\n      background: transparent;\r\n      color: var(--primary-text-color);\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      transition: background-color 0.2s;\r\n    }\r\n\r\n    .close-button:hover {\r\n      background-color: var(--divider-color, rgba(0, 0, 0, 0.1));\r\n    }\r\n\r\n    .close-button:active {\r\n      transform: scale(0.95);\r\n    }\r\n\r\n    .close-button ha-icon {\r\n      --mdc-icon-size: 24px;\r\n    }\r\n\r\n    .form {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n    }\r\n\r\n    .form-field {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 8px;\r\n    }\r\n\r\n    .form-field.has-error input {\r\n      border-color: var(--error-color, #db4437);\r\n    }\r\n\r\n    .form-field label {\r\n      font-size: 14px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n    }\r\n\r\n    .form-field label .required {\r\n      color: var(--error-color, #db4437);\r\n    }\r\n\r\n    .form-field label .optional {\r\n      color: var(--secondary-text-color);\r\n      font-weight: 400;\r\n      font-size: 12px;\r\n    }\r\n\r\n    .form-field input {\r\n      padding: 12px 16px;\r\n      border: 1px solid var(--divider-color, #e0e0e0);\r\n      border-radius: 12px;\r\n      font-size: 16px;\r\n      font-family: inherit;\r\n      color: var(--primary-text-color);\r\n      background: var(--card-background-color);\r\n      transition: border-color 0.2s;\r\n    }\r\n\r\n    .form-field input:focus {\r\n      outline: none;\r\n      border-color: var(--primary-color, #03a9f4);\r\n    }\r\n\r\n    .form-field input:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n    }\r\n\r\n    .error-message {\r\n      font-size: 12px;\r\n      color: var(--error-color, #db4437);\r\n      margin-top: 4px;\r\n    }\r\n\r\n    .actions {\r\n      display: flex;\r\n      gap: 12px;\r\n      margin-top: 24px;\r\n    }\r\n\r\n    .button {\r\n      flex: 1;\r\n      padding: 14px 24px;\r\n      border-radius: 12px;\r\n      border: none;\r\n      font-size: 16px;\r\n      font-weight: 500;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n      font-family: inherit;\r\n    }\r\n\r\n    .button:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n    }\r\n\r\n    .button-secondary {\r\n      background: var(--divider-color, #e0e0e0);\r\n      color: var(--primary-text-color);\r\n    }\r\n\r\n    .button-secondary:hover:not(:disabled) {\r\n      background: var(--secondary-background-color, #d0d0d0);\r\n    }\r\n\r\n    .button-primary {\r\n      background: var(--error-color, #f44336);\r\n      color: white;\r\n    }\r\n\r\n    .button-primary:hover:not(:disabled) {\r\n      background: var(--error-color-dark, #d32f2f);\r\n      transform: translateY(-1px);\r\n      box-shadow: 0 2px 8px rgba(244, 67, 54, 0.3);\r\n    }\r\n\r\n    .button-primary:active:not(:disabled) {\r\n      transform: translateY(0);\r\n    }\r\n  `;\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'tsuryphone-block-number-modal': BlockNumberModal;\r\n  }\r\n}\r\n","/**\r\n * TsuryPhone Card - Main Component\r\n * A modern phone and contacts interface for Home Assistant\r\n */\r\n\r\nimport { LitElement, html, css, CSSResultGroup, TemplateResult } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport { HomeAssistant } from \"./types/homeassistant\";\r\nimport {\r\n  TsuryPhoneCardConfig,\r\n  QuickDialEntry,\r\n  BlockedNumberEntry,\r\n  CallHistoryEntry,\r\n} from \"./types/tsuryphone\";\r\nimport {\r\n  haThemeVariables,\r\n  haButtonStyles,\r\n  haCardStyles,\r\n  isDarkMode,\r\n} from \"./styles/theme\";\r\nimport { commonStyles } from \"./styles/common\";\r\nimport \"./components/navigation/tsuryphone-navigation\";\r\nimport \"./components/home/home-view\";\r\nimport \"./components/keypad/keypad-view\";\r\nimport \"./components/contacts/contacts-view\";\r\nimport \"./components/blocked/blocked-view\";\r\nimport \"./components/modals/contact-modal\";\r\nimport \"./components/modals/call-modal\";\r\nimport \"./components/modals/block-number-modal\";\r\nimport type {\r\n  NavigationTab,\r\n  TabChangeEvent,\r\n} from \"./components/navigation/tsuryphone-navigation\";\r\nimport type {\r\n  CallHistoryEntry as CallHistoryEntryType,\r\n  CallType,\r\n} from \"./utils/call-history-grouping\";\r\nimport type {\r\n  CallModalMode,\r\n  CallInfo,\r\n  WaitingCallInfo,\r\n} from \"./components/modals/call-modal\";\r\n\r\n// Declare the card for Home Assistant\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"tsuryphone-card\": TsuryPhoneCard;\r\n  }\r\n}\r\n\r\n// Register with custom elements registry\r\n(window as any).customCards = (window as any).customCards || [];\r\n(window as any).customCards.push({\r\n  type: \"tsuryphone-card\",\r\n  name: \"TsuryPhone Card\",\r\n  description: \"A modern phone and contacts interface\",\r\n});\r\n\r\n@customElement(\"tsuryphone-card\")\r\nexport class TsuryPhoneCard extends LitElement {\r\n  @property({ attribute: false }) hass!: HomeAssistant;\r\n  @property({ attribute: false }) config!: TsuryPhoneCardConfig;\r\n\r\n  @state() private _activeView: NavigationTab = \"home\";\r\n  @state() private _showCallModal = false;\r\n  @state() private _showContactModal = false;\r\n  @state() private _showBlockModal = false;\r\n  @state() private _isDarkMode = false;\r\n\r\n  // Cached data from coordinator\r\n  @state() private _contactsCache: QuickDialEntry[] = [];\r\n  @state() private _blockedCache: BlockedNumberEntry[] = [];\r\n  @state() private _callHistoryCache: CallHistoryEntry[] = [];\r\n  @state() private _priorityNumbers: Set<string> = new Set();\r\n  @state() private _defaultDialCode = \"\";\r\n\r\n  // Connection state\r\n  @state() private _isConnected = true;\r\n  @state() private _errorMessage = \"\";\r\n\r\n  // Contact Modal state\r\n  @state() private _contactModalOpen = false;\r\n  @state() private _contactModalMode: \"add\" | \"edit\" = \"add\";\r\n  @state() private _contactModalData?: QuickDialEntry;\r\n\r\n  // Call Modal state\r\n  @state() private _callModalOpen = false;\r\n  @state() private _callModalMode: CallModalMode = \"incoming\";\r\n  @state() private _currentCallInfo?: CallInfo;\r\n  @state() private _waitingCallInfo?: WaitingCallInfo;\r\n  @state() private _callWaitingAvailable = false;\r\n  @state() private _showCallToast = false;\r\n  private _callModalMinimized = false;\r\n\r\n  // Subscriptions\r\n  private _unsubscribers: Array<() => void> = [];\r\n\r\n  /**\r\n   * Set the configuration for this card\r\n   */\r\n  setConfig(config: TsuryPhoneCardConfig): void {\r\n    if (!config) {\r\n      throw new Error(\"Invalid configuration\");\r\n    }\r\n    this.config = config;\r\n  }\r\n\r\n  /**\r\n   * Get the card size (used by HA for layout)\r\n   */\r\n  getCardSize(): number {\r\n    return 9; // Roughly 9 grid rows (~450px) - fits keypad without scroll\r\n  }\r\n\r\n  /**\r\n   * Lifecycle: Connected to DOM\r\n   */\r\n  connectedCallback(): void {\r\n    super.connectedCallback();\r\n    this._subscribe();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle: Disconnected from DOM\r\n   */\r\n  disconnectedCallback(): void {\r\n    super.disconnectedCallback();\r\n    this._unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle: Property updated\r\n   */\r\n  protected updated(changedProps: Map<string, any>): void {\r\n    super.updated(changedProps);\r\n\r\n    if (changedProps.has(\"hass\")) {\r\n      this._handleHassUpdate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Subscribe to Home Assistant state changes\r\n   */\r\n  private _subscribe(): void {\r\n    if (!this.hass || !this.hass.connection) {\r\n      console.warn(\"TsuryPhone: Cannot subscribe - no HA connection\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Subscribe to entity state changes using subscribeEvents\r\n      // We listen for state_changed events for our entities\r\n      const deviceId = this.config?.device_id || \"tsuryphone\";\r\n\r\n      const unsubPromise = this.hass.connection.subscribeEvents(\r\n        (event: any) => {\r\n          // Check if the event is for one of our entities\r\n          const entityId = event.data?.entity_id;\r\n          if (\r\n            (entityId && entityId.startsWith(`sensor.${deviceId}_`)) ||\r\n            entityId?.startsWith(`binary_sensor.${deviceId}_`)\r\n          ) {\r\n            this._handleStateUpdate();\r\n          }\r\n        },\r\n        \"state_changed\"\r\n      );\r\n\r\n      if (unsubPromise && typeof unsubPromise.then === \"function\") {\r\n        unsubPromise\r\n          .then((unsub: () => void) => {\r\n            this._unsubscribers.push(unsub);\r\n          })\r\n          .catch((err: any) => {\r\n            console.error(\r\n              \"TsuryPhone: Failed to subscribe to state changes:\",\r\n              err\r\n            );\r\n          });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"TsuryPhone: Error in subscribe:\", err);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe from all subscriptions\r\n   */\r\n  private _unsubscribe(): void {\r\n    this._unsubscribers.forEach((unsub) => {\r\n      try {\r\n        unsub();\r\n      } catch (err) {\r\n        console.error(\"TsuryPhone: Error unsubscribing:\", err);\r\n      }\r\n    });\r\n    this._unsubscribers = [];\r\n  }\r\n\r\n  /**\r\n   * Handle Home Assistant updates\r\n   */\r\n  private _handleHassUpdate(): void {\r\n    if (!this.hass) {\r\n      this._isConnected = false;\r\n      this._errorMessage = \"Connection to Home Assistant lost\";\r\n      return;\r\n    }\r\n\r\n    this._isConnected = true;\r\n    this._errorMessage = \"\";\r\n    this._isDarkMode = isDarkMode(this.hass);\r\n\r\n    // Update cached data from coordinator state\r\n    // Support both direct entity config and device_id pattern\r\n    let deviceId = this.config?.device_id || \"tsuryphone\";\r\n    let phoneStateEntityId: string;\r\n\r\n    if (this.config?.entity) {\r\n      // Use entity directly if provided\r\n      phoneStateEntityId = this.config.entity.startsWith(\"sensor.\")\r\n        ? this.config.entity\r\n        : `sensor.${this.config.entity}`;\r\n\r\n      // Extract device ID from entity name (e.g., \"sensor.phone_state\" -> \"phone\")\r\n      // by removing \"sensor.\" prefix and \"_phone_state\" suffix\r\n      const entityName = phoneStateEntityId.replace(\"sensor.\", \"\");\r\n      if (entityName.endsWith(\"_phone_state\")) {\r\n        deviceId = entityName.replace(\"_phone_state\", \"\");\r\n      } else if (entityName === \"phone_state\") {\r\n        // Handle case where entity is just \"phone_state\" without prefix\r\n        deviceId = \"\";\r\n      }\r\n    } else {\r\n      // Fall back to device_id pattern\r\n      phoneStateEntityId = `sensor.${deviceId}_phone_state`;\r\n    }\r\n\r\n    const phoneStateEntity = this.hass.states[phoneStateEntityId];\r\n\r\n    if (!phoneStateEntity) {\r\n      this._errorMessage = `Entity ${phoneStateEntityId} not found`;\r\n      return;\r\n    }\r\n\r\n    if (phoneStateEntity.attributes) {\r\n      const attrs = phoneStateEntity.attributes as any;\r\n\r\n      // Update contacts\r\n      if (attrs.quick_dials && Array.isArray(attrs.quick_dials)) {\r\n        this._contactsCache = attrs.quick_dials;\r\n      }\r\n\r\n      // Update blocked numbers\r\n      if (attrs.blocked_numbers && Array.isArray(attrs.blocked_numbers)) {\r\n        this._blockedCache = attrs.blocked_numbers;\r\n      }\r\n\r\n      // Update priority numbers\r\n      if (attrs.priority_numbers && Array.isArray(attrs.priority_numbers)) {\r\n        this._priorityNumbers = new Set(attrs.priority_numbers);\r\n      }\r\n\r\n      // Update default dial code\r\n      if (attrs.dialing_context && attrs.dialing_context.default_code) {\r\n        this._defaultDialCode = attrs.dialing_context.default_code;\r\n        console.log('[TsuryPhone] Default dial code set to:', this._defaultDialCode);\r\n      }\r\n    }\r\n\r\n    // Update call history from call_history_size sensor\r\n    // Build entity ID based on extracted device prefix\r\n    const callHistoryEntityId = deviceId\r\n      ? `sensor.${deviceId}_call_history_size`\r\n      : `sensor.call_history_size`;\r\n\r\n    const callHistoryEntity = this.hass.states[callHistoryEntityId];\r\n\r\n    if (callHistoryEntity?.attributes) {\r\n      const historyAttrs = callHistoryEntity.attributes as any;\r\n\r\n      console.log(\r\n        `[TsuryPhone] Call history sensor state:`,\r\n        {\r\n          state: callHistoryEntity.state,\r\n          capacity: historyAttrs.capacity,\r\n          entriesCount: historyAttrs.entries?.length || 0,\r\n          hasEntries: !!historyAttrs.entries,\r\n          isArray: Array.isArray(historyAttrs.entries)\r\n        }\r\n      );\r\n\r\n      if (historyAttrs.entries && Array.isArray(historyAttrs.entries)) {\r\n        console.log(\r\n          `[TsuryPhone] Loading call history from sensor (updated()):`,\r\n          `${historyAttrs.entries.length} calls`\r\n        );\r\n        this._callHistoryCache = historyAttrs.entries;\r\n      } else {\r\n        console.log(\r\n          `[TsuryPhone] No entries in call_history_size sensor attributes`\r\n        );\r\n      }\r\n    } else {\r\n      console.log(\r\n        `[TsuryPhone] Call history sensor not found or no attributes:`,\r\n        callHistoryEntityId\r\n      );\r\n    }\r\n\r\n    // Update call modal state\r\n    this._updateCallModalState();\r\n  }\r\n\r\n  /**\r\n   * Handle state updates from subscriptions\r\n   */\r\n  private _handleStateUpdate(): void {\r\n    // Re-read all cached data from phone state entity\r\n    this._updateCachedData();\r\n    // Update call modal state\r\n    this._updateCallModalState();\r\n    // Trigger re-render\r\n    this.requestUpdate();\r\n  }\r\n\r\n  /**\r\n   * Update cached data from phone state sensor attributes\r\n   */\r\n  private _updateCachedData(): void {\r\n    if (!this.hass) return;\r\n\r\n    let deviceId = this.config?.device_id || \"tsuryphone\";\r\n    let phoneStateEntityId: string;\r\n\r\n    if (this.config?.entity) {\r\n      phoneStateEntityId = this.config.entity.startsWith(\"sensor.\")\r\n        ? this.config.entity\r\n        : `sensor.${this.config.entity}`;\r\n\r\n      const entityName = phoneStateEntityId.replace(\"sensor.\", \"\");\r\n      if (entityName.endsWith(\"_phone_state\")) {\r\n        deviceId = entityName.replace(\"_phone_state\", \"\");\r\n      } else if (entityName === \"phone_state\") {\r\n        deviceId = \"\";\r\n      }\r\n    } else {\r\n      phoneStateEntityId = `sensor.${deviceId}_phone_state`;\r\n    }\r\n\r\n    const phoneStateEntity = this.hass.states[phoneStateEntityId];\r\n    if (!phoneStateEntity?.attributes) return;\r\n\r\n    const attrs = phoneStateEntity.attributes as any;\r\n\r\n    // Update contacts\r\n    if (attrs.quick_dials && Array.isArray(attrs.quick_dials)) {\r\n      this._contactsCache = attrs.quick_dials;\r\n    }\r\n\r\n    // Update blocked numbers\r\n    if (attrs.blocked_numbers && Array.isArray(attrs.blocked_numbers)) {\r\n      this._blockedCache = attrs.blocked_numbers;\r\n    }\r\n\r\n    // Update priority numbers\r\n    if (attrs.priority_numbers && Array.isArray(attrs.priority_numbers)) {\r\n      this._priorityNumbers = new Set(attrs.priority_numbers);\r\n    }\r\n\r\n    // Update call history\r\n    const callHistoryEntityId = deviceId\r\n      ? `sensor.${deviceId}_call_history_size`\r\n      : `sensor.call_history_size`;\r\n    const callHistoryEntity = this.hass.states[callHistoryEntityId];\r\n\r\n    if (callHistoryEntity?.attributes) {\r\n      const historyAttrs = callHistoryEntity.attributes as any;\r\n      if (historyAttrs.entries && Array.isArray(historyAttrs.entries)) {\r\n        console.log(\r\n          `[TsuryPhone] Loading call history from sensor (setConfig()):`,\r\n          `${historyAttrs.entries.length} calls`\r\n        );\r\n        this._callHistoryCache = historyAttrs.entries;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update call modal visibility and data based on phone state\r\n   */\r\n  private _updateCallModalState(): void {\r\n    if (!this.hass) return;\r\n\r\n    const deviceId = this.config?.device_id || \"\";\r\n    const phoneStateEntityId = deviceId\r\n      ? `sensor.${deviceId}_phone_state`\r\n      : `sensor.phone_state`;\r\n    const inCallEntityId = deviceId\r\n      ? `binary_sensor.${deviceId}_in_call`\r\n      : `binary_sensor.in_call`;\r\n\r\n    const phoneStateEntity = this.hass.states[phoneStateEntityId];\r\n    const phoneState = phoneStateEntity?.state;\r\n    const phoneStateAttrs = phoneStateEntity?.attributes as any;\r\n    const inCall = this.hass.states[inCallEntityId]?.state === \"on\";\r\n    const currentDialingNumber = phoneStateAttrs?.current_dialing_number || \"\";\r\n\r\n    // EXTENSIVE DEBUG LOGGING\r\n    console.log(\"========== _updateCallModalState DEBUG ==========\");\r\n    console.log(\"[TsuryPhone] phoneStateEntityId:\", phoneStateEntityId);\r\n    console.log(\"[TsuryPhone] phoneStateEntity exists:\", !!phoneStateEntity);\r\n    console.log(\"[TsuryPhone] phoneState:\", phoneState);\r\n    console.log(\"[TsuryPhone] inCall:\", inCall);\r\n    console.log(\"[TsuryPhone] phoneStateAttrs:\", phoneStateAttrs);\r\n    console.log(\"[TsuryPhone] ALL attributes:\", Object.keys(phoneStateAttrs || {}));\r\n    console.log(\"[TsuryPhone] current_dialing_number attribute:\", phoneStateAttrs?.current_dialing_number);\r\n    console.log(\"[TsuryPhone] currentDialingNumber (after ||):\", currentDialingNumber);\r\n    console.log(\"[TsuryPhone] _callModalOpen:\", this._callModalOpen);\r\n    console.log(\"[TsuryPhone] Should open modal?\", \r\n      \"phoneState check:\", [\"DIALING\", \"CALLING_OUT\", \"RINGING_OUT\", \"RINGING_IN\", \"IN_CALL\"].includes(phoneState || \"\"),\r\n      \"OR inCall:\", inCall,\r\n      \"OR currentDialingNumber:\", !!currentDialingNumber\r\n    );\r\n    console.log(\"================================================\");\r\n\r\n    // Determine call modal mode\r\n    if (phoneState === \"RINGING_IN\") {\r\n      this._callModalMode = \"incoming\";\r\n      this._callModalOpen = true;\r\n      this._callModalMinimized = false; // Reset on new incoming call\r\n\r\n      // Get incoming call info\r\n      const currentCallEntity =\r\n        this.hass.states[\r\n          deviceId ? `sensor.${deviceId}_current_call` : `sensor.current_call`\r\n        ];\r\n      if (currentCallEntity?.attributes) {\r\n        const attrs = currentCallEntity.attributes as any;\r\n        this._currentCallInfo = {\r\n          number: attrs.number || \"Unknown\",\r\n          name: attrs.name,\r\n          isPriority: attrs.is_priority || false,\r\n          isIncoming: true,\r\n        };\r\n      }\r\n    } else if (phoneState === \"DIALING\" || phoneState === \"CALLING_OUT\" || phoneState === \"RINGING_OUT\" || currentDialingNumber) {\r\n      // Show modal when dialing out or calling (or if current_dialing_number is set)\r\n      console.log(\"[TsuryPhone] Detected DIALING/CALLING_OUT/RINGING_OUT state or dialing number, opening call modal\");\r\n      this._callModalMode = \"active\";\r\n      if (!this._callModalMinimized) {\r\n        this._callModalOpen = true;\r\n      }\r\n\r\n      // Get dialing call info\r\n      const currentCallEntity =\r\n        this.hass.states[\r\n          deviceId ? `sensor.${deviceId}_current_call` : `sensor.current_call`\r\n        ];\r\n      if (currentCallEntity?.attributes) {\r\n        const attrs = currentCallEntity.attributes as any;\r\n        this._currentCallInfo = {\r\n          number: attrs.number || currentDialingNumber || \"Unknown\",\r\n          name: attrs.name,\r\n          isPriority: attrs.is_priority || false,\r\n          isIncoming: false,\r\n          duration: 0, // No duration yet while dialing\r\n        };\r\n      }\r\n    } else if (inCall) {\r\n      this._callModalMode = \"active\";\r\n      // Keep modal open if it was already open, or if not manually minimized\r\n      if (\r\n        !this._callModalOpen &&\r\n        !this._callModalMinimized &&\r\n        phoneState !== \"IDLE\"\r\n      ) {\r\n        this._callModalOpen = true;\r\n      }\r\n\r\n      // Get active call info\r\n      const currentCallEntity =\r\n        this.hass.states[\r\n          deviceId ? `sensor.${deviceId}_current_call` : `sensor.current_call`\r\n        ];\r\n      const durationEntity =\r\n        this.hass.states[\r\n          deviceId ? `sensor.${deviceId}_call_duration` : `sensor.call_duration`\r\n        ];\r\n      const audioOutputEntity =\r\n        this.hass.states[\r\n          deviceId\r\n            ? `sensor.${deviceId}_call_audio_output`\r\n            : `sensor.call_audio_output`\r\n        ];\r\n\r\n      if (currentCallEntity?.attributes) {\r\n        const attrs = currentCallEntity.attributes as any;\r\n        this._currentCallInfo = {\r\n          number: attrs.number || \"Unknown\",\r\n          name: attrs.name,\r\n          isPriority: attrs.is_priority || false,\r\n          isIncoming: attrs.direction === \"incoming\",\r\n          duration: durationEntity ? parseInt(durationEntity.state) : 0,\r\n          audioOutput: (audioOutputEntity?.state as any) || \"earpiece\",\r\n        };\r\n      }\r\n\r\n      // Check for waiting call\r\n      const waitingCallEntity =\r\n        this.hass.states[\r\n          deviceId\r\n            ? `sensor.${deviceId}_current_waiting_call`\r\n            : `sensor.current_waiting_call`\r\n        ];\r\n      if (\r\n        waitingCallEntity &&\r\n        waitingCallEntity.state !== \"None\" &&\r\n        waitingCallEntity.state !== \"unavailable\"\r\n      ) {\r\n        const waitingAttrs = waitingCallEntity.attributes as any;\r\n        this._waitingCallInfo = {\r\n          number: waitingAttrs.number || \"Unknown\",\r\n          name: waitingAttrs.name,\r\n          isPriority: waitingAttrs.is_priority || false,\r\n        };\r\n      } else {\r\n        this._waitingCallInfo = undefined;\r\n      }\r\n\r\n      // Check if call waiting is available\r\n      const callWaitingAvailableEntity =\r\n        this.hass.states[\r\n          deviceId\r\n            ? `binary_sensor.${deviceId}_call_waiting_available`\r\n            : `binary_sensor.call_waiting_available`\r\n        ];\r\n      this._callWaitingAvailable = callWaitingAvailableEntity?.state === \"on\";\r\n    } else {\r\n      // No call - close modal and clear data\r\n      this._callModalOpen = false;\r\n      this._callModalMinimized = false; // Reset when call ends\r\n      this._showCallToast = false; // Hide toast when call ends\r\n      this._currentCallInfo = undefined;\r\n      this._waitingCallInfo = undefined;\r\n      this._callWaitingAvailable = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh data from services\r\n   */\r\n  private async _refreshData(): Promise<void> {\r\n    if (!this.hass) return;\r\n\r\n    try {\r\n      // Call service to get latest call history\r\n      const response = (await this.hass.callService(\r\n        \"tsuryphone\",\r\n        \"get_call_history\",\r\n        { limit: 1000 },\r\n        true\r\n      )) as any;\r\n\r\n      if (response && response.call_history) {\r\n        this._callHistoryCache = response.call_history;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"TsuryPhone: Failed to refresh call history:\", err);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get entity ID for a device sensor\r\n   */\r\n  private _getDeviceEntityId(suffix: string): string {\r\n    const deviceId = this.config?.device_id || \"tsuryphone\";\r\n    return `sensor.${deviceId}_${suffix}`;\r\n  }\r\n\r\n  /**\r\n   * Handle navigation tab change\r\n   */\r\n  private _handleTabChange(e: CustomEvent<TabChangeEvent>): void {\r\n    this._activeView = e.detail.tab;\r\n  }\r\n\r\n  /**\r\n   * Handle contact modal close\r\n   */\r\n  private _handleContactModalClose(): void {\r\n    this._contactModalOpen = false;\r\n    this._showContactModal = false;\r\n    this._contactModalData = undefined;\r\n  }\r\n\r\n  /**\r\n   * Handle contact saved\r\n   */\r\n  private _handleContactSaved(e: CustomEvent): void {\r\n    console.log(\"Contact saved:\", e.detail);\r\n    this._handleContactModalClose();\r\n    // Data will update automatically via state subscription\r\n  }\r\n\r\n  /**\r\n   * Handle contact deleted\r\n   */\r\n  private _handleContactDeleted(e: CustomEvent): void {\r\n    console.log(\"Contact deleted:\", e.detail);\r\n    this._handleContactModalClose();\r\n    // Data will update automatically via state subscription\r\n  }\r\n\r\n  /**\r\n   * Handle contact modal error\r\n   */\r\n  private _handleContactModalError(e: CustomEvent): void {\r\n    console.error(\"Contact modal error:\", e.detail);\r\n    this._errorMessage = e.detail.message;\r\n    // Show error for 3 seconds\r\n    setTimeout(() => {\r\n      this._errorMessage = \"\";\r\n    }, 3000);\r\n  }\r\n\r\n  /**\r\n   * Handle call modal close (minimize to toast)\r\n   */\r\n  private _handleCallModalClose(): void {\r\n    // Don't fully close during active call, just minimize\r\n    if (this._callModalMode === \"active\" && this._currentCallInfo) {\r\n      this._callModalOpen = false;\r\n      this._callModalMinimized = true; // Track manual minimize\r\n      this._showCallToast = true; // Show persistent toast\r\n    } else {\r\n      this._callModalOpen = false;\r\n      this._callModalMinimized = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle call answered\r\n   */\r\n  private _handleCallAnswered(e: CustomEvent): void {\r\n    console.log(\"Call answered\");\r\n    // Modal will update to active mode via state subscription\r\n  }\r\n\r\n  /**\r\n   * Handle call declined\r\n   */\r\n  private _handleCallDeclined(e: CustomEvent): void {\r\n    console.log(\"Call declined\");\r\n    this._callModalOpen = false;\r\n  }\r\n\r\n  /**\r\n   * Handle call ended\r\n   */\r\n  private _handleCallEnded(e: CustomEvent): void {\r\n    console.log(\"Call ended\");\r\n    this._callModalOpen = false;\r\n    this._showCallToast = false;\r\n  }\r\n\r\n  /**\r\n   * Handle call modal error\r\n   */\r\n  private _handleCallModalError(e: CustomEvent): void {\r\n    console.error(\"Call modal error:\", e.detail);\r\n    this._errorMessage = e.detail.message;\r\n    // Show error for 3 seconds\r\n    setTimeout(() => {\r\n      this._errorMessage = \"\";\r\n    }, 3000);\r\n  }\r\n\r\n  /**\r\n   * Handle click on call toast to reopen modal\r\n   */\r\n  private _handleCallToastClick(): void {\r\n    this._callModalOpen = true;\r\n    this._showCallToast = false;\r\n    this._callModalMinimized = false;\r\n  }\r\n\r\n  /**\r\n   * Handle edit contact (from contact item click)\r\n   */\r\n  private _handleEditContact(e: CustomEvent): void {\r\n    const contact = e.detail.contact as QuickDialEntry;\r\n    this._contactModalMode = \"edit\";\r\n    this._contactModalData = contact;\r\n    this._contactModalOpen = true;\r\n    this._showContactModal = true;\r\n  }\r\n\r\n  /**\r\n   * Handle add contact (from empty state action button)\r\n   */\r\n  private _handleAddContact(): void {\r\n    this._contactModalMode = \"add\";\r\n    this._contactModalData = undefined;\r\n    this._contactModalOpen = true;\r\n    this._showContactModal = true;\r\n  }\r\n\r\n  /**\r\n   * Handle open block modal\r\n   */\r\n  private _handleOpenBlockModal(): void {\r\n    this._showBlockModal = true;\r\n  }\r\n\r\n  /**\r\n   * Handle close block modal\r\n   */\r\n  private _handleCloseBlockModal(): void {\r\n    this._showBlockModal = false;\r\n  }\r\n\r\n  /**\r\n   * Render the card\r\n   */\r\n  render(): TemplateResult {\r\n    if (!this.hass || !this.config) {\r\n      return html`<div class=\"tsuryphone-error\">Loading...</div>`;\r\n    }\r\n\r\n    // Show error overlay if not connected\r\n    if (!this._isConnected || this._errorMessage) {\r\n      return html`\r\n        <ha-card>\r\n          <div class=\"tsuryphone-container\">\r\n            <div class=\"error-overlay\">\r\n              <ha-icon icon=\"mdi:alert-circle-outline\"></ha-icon>\r\n              <div class=\"error-title\">Connection Error</div>\r\n              <div class=\"error-message\">\r\n                ${this._errorMessage || \"Unable to connect to Home Assistant\"}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ha-card>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n      <ha-card>\r\n        <div\r\n          class=\"tsuryphone-container ${this._isDarkMode\r\n            ? \"dark-mode\"\r\n            : \"light-mode\"}\"\r\n        >\r\n          ${this._callModalOpen ? this._renderCallModal() : \"\"}\r\n          ${this._contactModalOpen ? this._renderContactModal() : \"\"}\r\n          ${this._showBlockModal ? this._renderBlockModal() : \"\"}\r\n          ${this._showCallToast ? this._renderCallToast() : \"\"}\r\n          ${this._renderMainViews()}\r\n        </div>\r\n      </ha-card>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render main views (home, keypad, contacts, blocked)\r\n   */\r\n  private _renderMainViews(): TemplateResult {\r\n    return html`\r\n      <div class=\"views-container\">\r\n        <div class=\"view-content\">\r\n          ${this._activeView === \"home\" ? this._renderHomeView() : \"\"}\r\n          ${this._activeView === \"keypad\" ? this._renderKeypadView() : \"\"}\r\n          ${this._activeView === \"contacts\" ? this._renderContactsView() : \"\"}\r\n          ${this._activeView === \"blocked\" ? this._renderBlockedView() : \"\"}\r\n        </div>\r\n\r\n        <tsuryphone-navigation\r\n          .activeTab=${this._activeView}\r\n          .disabled=${this._showCallModal}\r\n          @tab-change=${this._handleTabChange}\r\n        ></tsuryphone-navigation>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render home view\r\n   */\r\n  private _renderHomeView(): TemplateResult {\r\n    // Convert call history to the format expected by home-view\r\n    const callHistory: CallHistoryEntryType[] = this._callHistoryCache.map(\r\n      (call: any, index: number) => {\r\n        // Map call_type to our CallType enum\r\n        // Backend sends: 'incoming_answered', 'outgoing_answered', 'incoming_missed', 'blocked', etc.\r\n        let callType: CallType;\r\n        \r\n        if (call.call_type === \"blocked\") {\r\n          callType = \"missed\";\r\n        } else if (call.call_type.startsWith(\"incoming_missed\") || call.call_type.startsWith(\"outgoing_missed\")) {\r\n          callType = \"missed\";\r\n        } else if (call.call_type.startsWith(\"incoming\")) {\r\n          callType = \"incoming\";\r\n        } else if (call.call_type.startsWith(\"outgoing\")) {\r\n          callType = \"outgoing\";\r\n        } else {\r\n          // Default to missed for unknown types\r\n          callType = \"missed\";\r\n        }\r\n\r\n        const entry = {\r\n          id: call.seq || `${call.received_ts}-${call.number}`,\r\n          contactName: call.name || call.number,\r\n          phoneNumber: call.number,\r\n          timestamp: new Date(call.received_ts * 1000).toISOString(), // Convert Unix timestamp to ISO string\r\n          duration: call.duration_s || 0,\r\n          type: callType,\r\n          isBlocked: call.call_type === \"blocked\",\r\n        };\r\n\r\n        // Log first few calls to debug\r\n        if (index < 3) {\r\n          console.log(`[TsuryPhone] Call ${index}:`, {\r\n            raw_call_type: call.call_type,\r\n            duration_s: call.duration_s,\r\n            mapped_type: entry.type,\r\n            isBlocked: entry.isBlocked,\r\n            name: entry.contactName\r\n          });\r\n        }\r\n\r\n        return entry;\r\n      }\r\n    );\r\n\r\n    console.log(`[TsuryPhone] Total calls in history: ${callHistory.length}`);\r\n    console.log(`[TsuryPhone] _callHistoryCache size: ${this._callHistoryCache.length}`);\r\n\r\n    return html`\r\n      <div class=\"view home-view fade-in\">\r\n        <tsuryphone-home-view\r\n          .callHistory=${callHistory}\r\n          .defaultDialCode=${this._defaultDialCode}\r\n          .loading=${false}\r\n          @dial-contact=${this._handleDialContact}\r\n          @call-details=${this._handleCallDetails}\r\n        ></tsuryphone-home-view>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Handle dial contact event from home view\r\n   */\r\n  private _handleDialContact(e: CustomEvent): void {\r\n    const { contact } = e.detail;\r\n    console.log(\"Dial contact:\", contact);\r\n    // TODO: Open call modal or initiate call in Phase 6\r\n  }\r\n\r\n  /**\r\n   * Handle call details event from home view\r\n   */\r\n  private async _handleCallDetails(e: CustomEvent): Promise<void> {\r\n    const { call } = e.detail;\r\n    \r\n    // Initiate a call to the number from call history\r\n    if (call && call.phoneNumber) {\r\n      try {\r\n        await this.hass.callService(\r\n          \"tsuryphone\",\r\n          \"dial\",\r\n          {\r\n            number: call.phoneNumber,\r\n          },\r\n          {\r\n            entity_id: this._getPhoneStateEntityId(),\r\n          }\r\n        );\r\n      } catch (error) {\r\n        console.error(\"Failed to dial number from call history:\", error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get phone state entity ID\r\n   */\r\n  private _getPhoneStateEntityId(): string {\r\n    const deviceId = this.config?.device_id || \"tsuryphone\";\r\n\r\n    if (this.config?.entity) {\r\n      return this.config.entity.startsWith(\"sensor.\")\r\n        ? this.config.entity\r\n        : `sensor.${this.config.entity}`;\r\n    }\r\n\r\n    return `sensor.${deviceId}_phone_state`;\r\n  }\r\n\r\n  /**\r\n   * Render keypad view\r\n   */\r\n  private _renderKeypadView(): TemplateResult {\r\n    return html`\r\n      <div class=\"view keypad-view fade-in\">\r\n        <tsuryphone-keypad-view\r\n          .hass=${this.hass}\r\n          .config=${this.config}\r\n        ></tsuryphone-keypad-view>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render contacts view\r\n   */\r\n  private _renderContactsView(): TemplateResult {\r\n    return html`\r\n      <div\r\n        class=\"view contacts-view fade-in\"\r\n        @edit-contact=${this._handleEditContact}\r\n        @action=${this._handleAddContact}\r\n      >\r\n        <tsuryphone-contacts-view\r\n          .hass=${this.hass}\r\n          .config=${this.config}\r\n        ></tsuryphone-contacts-view>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render call modal\r\n   */\r\n  private _renderCallModal(): TemplateResult {\r\n    const deviceIdPrefix = this.config?.device_id || \"\";\r\n    const phoneStateEntityId = deviceIdPrefix\r\n      ? `sensor.${deviceIdPrefix}_phone_state`\r\n      : `sensor.phone_state`;\r\n\r\n    return html`\r\n      <tsuryphone-call-modal\r\n        .hass=${this.hass}\r\n        .entityId=${phoneStateEntityId}\r\n        .open=${this._callModalOpen}\r\n        .mode=${this._callModalMode}\r\n        .callInfo=${this._currentCallInfo}\r\n        .waitingCall=${this._waitingCallInfo}\r\n        .callWaitingAvailable=${this._callWaitingAvailable}\r\n        @close=${this._handleCallModalClose}\r\n        @call-answered=${this._handleCallAnswered}\r\n        @call-declined=${this._handleCallDeclined}\r\n        @call-ended=${this._handleCallEnded}\r\n        @error=${this._handleCallModalError}\r\n      ></tsuryphone-call-modal>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render call toast (minimized call indicator)\r\n   */\r\n  private _renderCallToast(): TemplateResult {\r\n    if (!this._currentCallInfo) return html``;\r\n\r\n    const displayName =\r\n      this._currentCallInfo.name || this._currentCallInfo.number;\r\n    const duration = this._currentCallInfo.duration || 0;\r\n    const minutes = Math.floor(duration / 60);\r\n    const seconds = duration % 60;\r\n    const durationText = `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\r\n\r\n    return html`\r\n      <div class=\"call-toast\" @click=${this._handleCallToastClick}>\r\n        <div class=\"call-toast-content\">\r\n          <ha-icon class=\"call-toast-icon\" icon=\"mdi:phone\"></ha-icon>\r\n          <div class=\"call-toast-name\">${displayName}</div>\r\n          <div class=\"call-toast-duration\">${durationText}</div>\r\n        </div>\r\n        <div class=\"call-toast-action\">Tap to return</div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render contact modal\r\n   */\r\n  private _renderContactModal(): TemplateResult {\r\n    return html`\r\n      <tsuryphone-contact-modal\r\n        .hass=${this.hass}\r\n        .open=${this._contactModalOpen}\r\n        .mode=${this._contactModalMode}\r\n        .contact=${this._contactModalData}\r\n        @close=${this._handleContactModalClose}\r\n        @contact-saved=${this._handleContactSaved}\r\n        @contact-deleted=${this._handleContactDeleted}\r\n        @error=${this._handleContactModalError}\r\n      ></tsuryphone-contact-modal>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render block number modal\r\n   */\r\n  private _renderBlockModal(): TemplateResult {\r\n    return html`\r\n      <tsuryphone-block-number-modal\r\n        .hass=${this.hass}\r\n        .config=${this.config}\r\n        .open=${this._showBlockModal}\r\n        @close-modal=${this._handleCloseBlockModal}\r\n      ></tsuryphone-block-number-modal>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render blocked view (placeholder)\r\n   */\r\n  private _renderBlockedView(): TemplateResult {\r\n    return html`\r\n      <div\r\n        class=\"view blocked-view fade-in\"\r\n        @open-block-modal=${this._handleOpenBlockModal}\r\n      >\r\n        <tsuryphone-blocked-view\r\n          .hass=${this.hass}\r\n          .config=${this.config}\r\n          .blockedNumbers=${this._blockedCache}\r\n        ></tsuryphone-blocked-view>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Styles for the card\r\n   */\r\n  static get styles(): CSSResultGroup {\r\n    return [\r\n      haThemeVariables,\r\n      haButtonStyles,\r\n      haCardStyles,\r\n      commonStyles,\r\n      css`\r\n        :host {\r\n          display: block;\r\n        }\r\n\r\n        ha-card {\r\n          height: 100%;\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n\r\n        .tsuryphone-container {\r\n          display: flex;\r\n          flex-direction: column;\r\n          height: 100vh;\r\n          max-height: 900px;\r\n          background: var(--tsury-card-background-color);\r\n          color: var(--tsury-primary-text-color);\r\n          font-family: var(--tsury-font-family);\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .tsuryphone-error {\r\n          padding: var(--tsury-spacing-md);\r\n          text-align: center;\r\n          color: var(--tsury-error-color);\r\n        }\r\n\r\n        .error-overlay {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: center;\r\n          background: var(--tsury-card-background-color);\r\n          z-index: 100;\r\n          padding: var(--tsury-spacing-xl);\r\n        }\r\n\r\n        .error-overlay ha-icon {\r\n          --mdc-icon-size: 64px;\r\n          color: var(--tsury-error-color);\r\n          margin-bottom: var(--tsury-spacing-md);\r\n        }\r\n\r\n        .error-title {\r\n          font-size: var(--tsury-font-size-xl);\r\n          font-weight: var(--tsury-font-weight-medium);\r\n          color: var(--tsury-primary-text-color);\r\n          margin-bottom: var(--tsury-spacing-sm);\r\n        }\r\n\r\n        .error-message {\r\n          font-size: var(--tsury-font-size-md);\r\n          color: var(--tsury-secondary-text-color);\r\n          text-align: center;\r\n        }\r\n\r\n        .views-container {\r\n          display: flex;\r\n          flex-direction: column;\r\n          flex: 1;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .view-content {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          overflow-x: hidden;\r\n          -webkit-overflow-scrolling: touch;\r\n        }\r\n\r\n        .view {\r\n          display: flex;\r\n          flex-direction: column;\r\n          min-height: 100%;\r\n          background: var(--tsury-primary-background-color);\r\n        }\r\n\r\n        .view-header {\r\n          padding: var(--tsury-spacing-md) var(--tsury-spacing-md)\r\n            var(--tsury-spacing-sm);\r\n          background: var(--tsury-card-background-color);\r\n          border-bottom: 1px solid var(--tsury-divider-color);\r\n        }\r\n\r\n        .view-header h2 {\r\n          margin: 0;\r\n          font-size: var(--tsury-font-size-xl);\r\n          font-weight: var(--tsury-font-weight-medium);\r\n          color: var(--tsury-primary-text-color);\r\n        }\r\n\r\n        .view-body {\r\n          flex: 1;\r\n          padding: var(--tsury-spacing-md);\r\n        }\r\n\r\n        .placeholder-text {\r\n          color: var(--tsury-secondary-text-color);\r\n          text-align: center;\r\n          margin: var(--tsury-spacing-md) 0;\r\n        }\r\n\r\n        .view-placeholder,\r\n        .modal-placeholder {\r\n          flex: 1;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          padding: var(--tsury-spacing-lg);\r\n          background: var(--tsury-primary-background-color);\r\n          color: var(--tsury-secondary-text-color);\r\n          font-size: var(--tsury-font-size-lg);\r\n        }\r\n\r\n        .navigation-placeholder {\r\n          display: flex;\r\n          justify-content: space-around;\r\n          padding: var(--tsury-spacing-md);\r\n          background: var(--tsury-card-background-color);\r\n          border-top: 1px solid var(--tsury-divider-color);\r\n          gap: var(--tsury-spacing-sm);\r\n        }\r\n\r\n        .navigation-placeholder button {\r\n          flex: 1;\r\n          padding: var(--tsury-spacing-sm) var(--tsury-spacing-md);\r\n          background: var(--tsury-primary-color);\r\n          color: var(--text-primary-color);\r\n          border: none;\r\n          border-radius: var(--tsury-border-radius-md);\r\n          cursor: pointer;\r\n          font-size: var(--tsury-font-size-md);\r\n          font-weight: var(--tsury-font-weight-medium);\r\n          transition: all var(--tsury-transition-duration)\r\n            var(--tsury-transition-timing);\r\n        }\r\n\r\n        .navigation-placeholder button:hover {\r\n          filter: brightness(1.1);\r\n        }\r\n\r\n        .navigation-placeholder button:active {\r\n          filter: brightness(0.9);\r\n        }\r\n\r\n        /* Call Toast (minimized call indicator) */\r\n        .call-toast {\r\n          position: absolute;\r\n          top: 8px;\r\n          left: 12px;\r\n          right: 12px;\r\n          z-index: 50;\r\n          background: var(--primary-color);\r\n          color: white;\r\n          padding: 8px 12px;\r\n          border-radius: 20px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\r\n          cursor: pointer;\r\n          transition: transform 0.2s ease;\r\n        }\r\n\r\n        .call-toast:hover {\r\n          transform: scale(1.02);\r\n        }\r\n\r\n        .call-toast:active {\r\n          transform: scale(0.98);\r\n        }\r\n\r\n        .call-toast-content {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n        }\r\n\r\n        .call-toast-icon {\r\n          --mdc-icon-size: 18px;\r\n          color: var(--tsury-primary-text-color);\r\n        }\r\n\r\n        .call-toast-name {\r\n          font-weight: 500;\r\n          font-size: 14px;\r\n          line-height: 1;\r\n        }\r\n\r\n        .call-toast-duration {\r\n          font-size: 12px;\r\n          opacity: 0.9;\r\n          line-height: 1;\r\n        }\r\n\r\n        .call-toast-action {\r\n          font-size: 11px;\r\n          opacity: 0.85;\r\n          line-height: 1;\r\n          white-space: nowrap;\r\n        }\r\n\r\n        /* Dark mode adjustments */\r\n        .tsuryphone-container.dark-mode {\r\n          /* Dark mode specific overrides if needed */\r\n        }\r\n\r\n        .tsuryphone-container.light-mode {\r\n          /* Light mode specific overrides if needed */\r\n        }\r\n      `,\r\n    ];\r\n  }\r\n}\r\n"],"names":["t","e","s","o","r","n","i","S","c","h","a","l","p","d","u","f","y","css","isDarkMode","LitElement","html","property","customElement","state"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}